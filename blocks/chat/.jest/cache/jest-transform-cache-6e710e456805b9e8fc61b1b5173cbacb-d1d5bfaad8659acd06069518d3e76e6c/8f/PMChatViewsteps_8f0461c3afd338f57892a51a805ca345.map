{"version":3,"file":"/Users/macm14/Documents/NXZWAW/nxzwav-294793-react-native/src/packages/blocks/chat/__tests__/step-definitions/PMChatView.steps.tsx","sources":["/Users/macm14/Documents/NXZWAW/nxzwav-294793-react-native/src/packages/blocks/chat/__tests__/step-definitions/PMChatView.steps.tsx"],"names":[],"mappings":"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","sourcesContent":["import { defineFeature, loadFeature } from \"jest-cucumber\";\nimport { shallow, ShallowWrapper } from \"enzyme\";\nimport DocumentPicker, { DocumentPickerResponse } from 'react-native-document-picker';\n\nimport * as helpers from \"../../../../framework/src/Helpers\";\n\nimport React from \"react\";\nimport PMChatView from \"../../src/PmChatView\";\nimport MessageEnum, { getName } from \"../../../../framework/src/Messages/MessageEnum\";\nimport { Message } from \"../../../../framework/src/Message\";\nimport { runEngine } from \"../../../../framework/src/RunEngine\";\nconst navigation = require(\"react-navigation\");\n\nconst screenProps = {\n  navigation: {\n    addListener: jest.fn().mockImplementation((event, callback) => {\n      callback();\n    }),\n    navigate: jest.fn(),\n    state: { params: { receiverUser: {}, conversationID: 0 } },\n  },\n  id: \"PMChatView\"\n};\n\nconst feature = loadFeature(\"./__tests__/features/PMChatView-scenario.feature\");\n\ndefineFeature(feature, (test) => {\n  beforeEach(() => {\n    jest.resetModules();\n    jest.doMock(\"react-native\", () => ({ Platform: { OS: \"ios\" } }));\n    jest.spyOn(helpers, \"getOS\").mockImplementation(() => \"ios\");\n  });\n\n  test(\"User navigates to PMChatView\", ({ given, when, then }) => {\n    let pmChatViewWrapper: ShallowWrapper;\n    let instance: PMChatView;\n\n    given(\"I am a User loading PMChatView\", () => {\n      pmChatViewWrapper = shallow(<PMChatView {...screenProps} />);\n    });\n\n    when(\"I navigate to PMChatView\", () => {\n      instance = pmChatViewWrapper.instance() as PMChatView;\n\n\n    });\n    then('PMChatView will load with out errors', () => {\n      expect(pmChatViewWrapper).toBeTruthy();\n    });\n\n    then('I can enter text with out errors', () => {\n      let textInputComponent = pmChatViewWrapper.findWhere((node) => node.prop('testID') === 'inputMessage');\n      textInputComponent.simulate('changeText', 'hello@aol.com');\n    });\n\n    then('I can select the button with with out errors', () => {\n      let backBtn = pmChatViewWrapper.findWhere(\n        (node) => node.prop(\"testID\") === \"backBtn\",\n      );\n      backBtn.simulate(\"press\");\n      expect(backBtn).toHaveLength(1);\n\n      let editBtn = pmChatViewWrapper.findWhere(\n        (node) => node.prop(\"testID\") === \"editBtn\",\n      );\n      editBtn.simulate(\"press\");\n      expect(editBtn).toHaveLength(1);\n\n      let btnSendMessage = pmChatViewWrapper.findWhere(\n        (node) => node.prop(\"testID\") === \"btnSendMessage\",\n      );\n      btnSendMessage.simulate(\"press\");\n      expect(btnSendMessage).toHaveLength(1);\n    });\n\n    then(\"Get Chat List API load with out errors\", () => {\n      const getChatListApiCallId: Message = new Message(\n        getName(MessageEnum.RestAPIResponceMessage),\n      );\n      getChatListApiCallId.addData(\n        getName(MessageEnum.RestAPIResponceDataMessage),\n        getChatListApiCallId.messageId,\n      );\n      getChatListApiCallId.addData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage),\n        JSON.parse(JSON.stringify({\n          \"data\": [{\n            \"id\":\n              \"244\", \"type\": \"pm_chat\", \"attributes\":\n            {\n              \"id\": 244, \"points\": 0, \"is_locked\": false, \"user_profile_info_id\": 9,\n              \"image\": null, \"message\": { \"message\": \"heloo mitang rana\", \"created_at\": \"2023-07-03T10:39:37.430Z\" }, \"profile\": null\n            }\n          },\n          {\n            \"id\": \"211\", \"type\": \"pm_chat\", \"attributes\": {\n              \"id\": 211, \"points\": 50, \"is_locked\": true, \"user_profile_info_id\": 9, \"image\": \"https://nxzwav-294793-ruby.b294793.dev.eastus.az.svc.builder.cafe/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBWjA9IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--03191c01d82d9bdf7fc902680f66f67720c653f6/IMG_0010.JPG\", \"message\": { \"message\": \"Fgh\", \"created_at\": \"2023-06-23T07:39:23.981Z\" }, \"profile\": null\n            }\n          }]\n        }\n        )));\n      getChatListApiCallId.addData(\n        getName(MessageEnum.RestAPIResponceErrorMessage),\n        JSON.parse(JSON.stringify({ Error: \"error message\" })),\n      );\n      instance.getChatListApiCallId = getChatListApiCallId.messageId;\n      runEngine.sendMessage(\"Unit Test\", getChatListApiCallId);\n      expect(pmChatViewWrapper).toBeTruthy();\n    });\n\n    then(\"Unlock Message API load with out errors\", () => {\n      const unlockMessageApiCallId: Message = new Message(\n        getName(MessageEnum.RestAPIResponceMessage),\n      );\n      unlockMessageApiCallId.addData(\n        getName(MessageEnum.RestAPIResponceDataMessage),\n        unlockMessageApiCallId.messageId,\n      );\n      unlockMessageApiCallId.addData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage),\n        JSON.parse(JSON.stringify({\n          \"data\":\n          {\n            \"id\": \"231\",\n            \"type\":\n              \"pm_chat\", \"attributes\": {\n                \"id\": 231,\n                \"points\": 0,\n                \"is_locked\": false,\n                \"user_profile_info_id\": 3,\n                \"image\": \"https://nxzwav-294793-ruby.b294793.dev.eastus.az.svc.builder.cafe/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBYUU9IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--f8276fa3961fbf5b31a48aa240f40505df068b7c/image-3.png\", \"message\": { \"message\": \"monday 2/7\", \"created_at\": \"2023-07-03T08:24:52.236Z\" },\n                \"profile\": {\n                  \"profile_pic\": null,\n                  \"user_name\": \"Bhakti_Daraniya\",\n                  \"user_role\": null\n                }\n              }\n          }\n        }\n        )));\n      unlockMessageApiCallId.addData(\n        getName(MessageEnum.RestAPIResponceErrorMessage),\n        JSON.parse(JSON.stringify({ Error: \"error message\" })),\n      );\n      instance.unlockMessageApiCallId = unlockMessageApiCallId.messageId;\n      runEngine.sendMessage(\"Unit Test\", unlockMessageApiCallId);\n      expect(pmChatViewWrapper).toBeTruthy();\n    });\n\n    then(\"Read Message API load with out errors\", () => {\n      const putReadMessageApiCallId: Message = new Message(\n        getName(MessageEnum.RestAPIResponceMessage),\n      );\n      putReadMessageApiCallId.addData(\n        getName(MessageEnum.RestAPIResponceDataMessage),\n        putReadMessageApiCallId.messageId,\n      );\n      putReadMessageApiCallId.addData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage),\n        JSON.parse(JSON.stringify({ \"message\": \"Message Readed\" }\n        )));\n      putReadMessageApiCallId.addData(\n        getName(MessageEnum.RestAPIResponceErrorMessage),\n        JSON.parse(JSON.stringify({ Error: \"error message\" })),\n      );\n      instance.putReadMessageApiCallId = putReadMessageApiCallId.messageId;\n      runEngine.sendMessage(\"Unit Test\", putReadMessageApiCallId);\n      expect(pmChatViewWrapper).toBeTruthy();\n    });\n\n    then('I can leave the screen with out errors', () => {\n      instance.componentWillUnmount()\n      expect(pmChatViewWrapper).toBeTruthy();\n    });\n\n  });\n});\n"]}