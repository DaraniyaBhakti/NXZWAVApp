0ba84c726a07072d77e41c9e32bfacd9
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var SyntheticError = function (_Error) {
  (0, _inherits2.default)(SyntheticError, _Error);
  var _super = _createSuper(SyntheticError);
  function SyntheticError() {
    var _this;
    (0, _classCallCheck2.default)(this, SyntheticError);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _this.name = '';
    return _this;
  }
  return (0, _createClass2.default)(SyntheticError);
}((0, _wrapNativeSuper2.default)(Error));
var exceptionID = 0;
function reportException(e, isFatal) {
  var NativeExceptionsManager = require('./NativeExceptionsManager').default;
  if (NativeExceptionsManager) {
    var parseErrorStack = require('./Devtools/parseErrorStack');
    var stack = parseErrorStack(e);
    var currentExceptionID = ++exceptionID;
    var originalMessage = e.message || '';
    var message = originalMessage;
    if (e.componentStack != null) {
      message += "\n\nThis error is located at:" + e.componentStack;
    }
    var namePrefix = e.name == null || e.name === '' ? '' : e.name + ": ";
    var isFromConsoleError = e.name === 'console.error';
    if (!message.startsWith(namePrefix)) {
      message = namePrefix + message;
    }
    if (!isFromConsoleError) {
      if (console._errorOriginal) {
        console._errorOriginal(message);
      } else {
        console.error(message);
      }
    }
    message = e.jsEngine == null ? message : message + ", js engine: " + e.jsEngine;
    NativeExceptionsManager.reportException({
      message: message,
      originalMessage: message === originalMessage ? null : originalMessage,
      name: e.name == null || e.name === '' ? null : e.name,
      componentStack: typeof e.componentStack === 'string' ? e.componentStack : null,
      stack: stack,
      id: currentExceptionID,
      isFatal: isFatal,
      extraData: {
        jsEngine: e.jsEngine,
        rawStack: e.stack,
        framesPopped: e.framesToPop
      }
    });
    if (__DEV__) {
      if (e.preventSymbolication === true) {
        return;
      }
      var symbolicateStackTrace = require('./Devtools/symbolicateStackTrace');
      symbolicateStackTrace(stack).then(function (prettyStack) {
        if (prettyStack) {
          var stackWithoutCollapsedFrames = prettyStack.filter(function (frame) {
            return !frame.collapse;
          });
          NativeExceptionsManager.updateExceptionMessage(message, stackWithoutCollapsedFrames, currentExceptionID);
        } else {
          throw new Error('The stack is null');
        }
      }).catch(function (error) {
        console.log('Unable to symbolicate stack trace: ' + error.message);
      });
    }
  }
}
function handleException(e, isFatal) {
  var error;
  if (e instanceof Error) {
    error = e;
  } else {
    error = new SyntheticError(e);
  }
  reportException(error, isFatal);
}
function reactConsoleErrorHandler() {
  if (!console.reportErrorsAsExceptions) {
    console._errorOriginal.apply(console, arguments);
    return;
  }
  if (arguments[0] && arguments[0].stack) {
    reportException(arguments[0], false);
  } else {
    console._errorOriginal.apply(console, arguments);
    var stringifySafe = require('../Utilities/stringifySafe');
    var str = Array.prototype.map.call(arguments, stringifySafe).join(', ');
    if (str.slice(0, 10) === '"Warning: ') {
      return;
    }
    var _error = new SyntheticError(str);
    _error.name = 'console.error';
    _error.framesToPop = (_error.framesToPop || 0) + 1;
    reportException(_error, false);
  }
}
function installConsoleErrorReporter() {
  if (console._errorOriginal) {
    return;
  }
  console._errorOriginal = console.error.bind(console);
  console.error = reactConsoleErrorHandler;
  if (console.reportErrorsAsExceptions === undefined) {
    console.reportErrorsAsExceptions = true;
  }
}
module.exports = {
  handleException: handleException,
  installConsoleErrorReporter: installConsoleErrorReporter,
  SyntheticError: SyntheticError
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jcmVhdGVDbGFzczIiLCJfY2xhc3NDYWxsQ2hlY2syIiwiX2luaGVyaXRzMiIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiIsIl9nZXRQcm90b3R5cGVPZjIiLCJfd3JhcE5hdGl2ZVN1cGVyMiIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIl9jcmVhdGVTdXBlckludGVybmFsIiwiU3VwZXIiLCJkZWZhdWx0IiwicmVzdWx0IiwiTmV3VGFyZ2V0IiwiY29uc3RydWN0b3IiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJzaGFtIiwiUHJveHkiLCJCb29sZWFuIiwicHJvdG90eXBlIiwidmFsdWVPZiIsImNhbGwiLCJlIiwiU3ludGhldGljRXJyb3IiLCJfRXJyb3IiLCJfc3VwZXIiLCJfdGhpcyIsIl9sZW4iLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiY29uY2F0IiwibmFtZSIsIkVycm9yIiwiZXhjZXB0aW9uSUQiLCJyZXBvcnRFeGNlcHRpb24iLCJpc0ZhdGFsIiwiTmF0aXZlRXhjZXB0aW9uc01hbmFnZXIiLCJwYXJzZUVycm9yU3RhY2siLCJzdGFjayIsImN1cnJlbnRFeGNlcHRpb25JRCIsIm9yaWdpbmFsTWVzc2FnZSIsIm1lc3NhZ2UiLCJjb21wb25lbnRTdGFjayIsIm5hbWVQcmVmaXgiLCJpc0Zyb21Db25zb2xlRXJyb3IiLCJzdGFydHNXaXRoIiwiY29uc29sZSIsIl9lcnJvck9yaWdpbmFsIiwiZXJyb3IiLCJqc0VuZ2luZSIsImlkIiwiZXh0cmFEYXRhIiwicmF3U3RhY2siLCJmcmFtZXNQb3BwZWQiLCJmcmFtZXNUb1BvcCIsIl9fREVWX18iLCJwcmV2ZW50U3ltYm9saWNhdGlvbiIsInN5bWJvbGljYXRlU3RhY2tUcmFjZSIsInRoZW4iLCJwcmV0dHlTdGFjayIsInN0YWNrV2l0aG91dENvbGxhcHNlZEZyYW1lcyIsImZpbHRlciIsImZyYW1lIiwiY29sbGFwc2UiLCJ1cGRhdGVFeGNlcHRpb25NZXNzYWdlIiwiY2F0Y2giLCJsb2ciLCJoYW5kbGVFeGNlcHRpb24iLCJyZWFjdENvbnNvbGVFcnJvckhhbmRsZXIiLCJyZXBvcnRFcnJvcnNBc0V4Y2VwdGlvbnMiLCJzdHJpbmdpZnlTYWZlIiwic3RyIiwibWFwIiwiam9pbiIsInNsaWNlIiwiaW5zdGFsbENvbnNvbGVFcnJvclJlcG9ydGVyIiwiYmluZCIsInVuZGVmaW5lZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJFeGNlcHRpb25zTWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93IHN0cmljdC1sb2NhbFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0V4dGVuZGVkRXJyb3J9IGZyb20gJy4vRGV2dG9vbHMvcGFyc2VFcnJvclN0YWNrJztcblxuY2xhc3MgU3ludGhldGljRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIG5hbWU6IHN0cmluZyA9ICcnO1xufVxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldmVsb3Blci12aXNpYmxlIGFzcGVjdCBvZiBlcnJvcnMgYW5kIGV4Y2VwdGlvbnNcbiAqL1xubGV0IGV4Y2VwdGlvbklEID0gMDtcbmZ1bmN0aW9uIHJlcG9ydEV4Y2VwdGlvbihlOiBFeHRlbmRlZEVycm9yLCBpc0ZhdGFsOiBib29sZWFuKSB7XG4gIGNvbnN0IE5hdGl2ZUV4Y2VwdGlvbnNNYW5hZ2VyID0gcmVxdWlyZSgnLi9OYXRpdmVFeGNlcHRpb25zTWFuYWdlcicpLmRlZmF1bHQ7XG4gIGlmIChOYXRpdmVFeGNlcHRpb25zTWFuYWdlcikge1xuICAgIGNvbnN0IHBhcnNlRXJyb3JTdGFjayA9IHJlcXVpcmUoJy4vRGV2dG9vbHMvcGFyc2VFcnJvclN0YWNrJyk7XG4gICAgY29uc3Qgc3RhY2sgPSBwYXJzZUVycm9yU3RhY2soZSk7XG4gICAgY29uc3QgY3VycmVudEV4Y2VwdGlvbklEID0gKytleGNlcHRpb25JRDtcbiAgICBjb25zdCBvcmlnaW5hbE1lc3NhZ2UgPSBlLm1lc3NhZ2UgfHwgJyc7XG4gICAgbGV0IG1lc3NhZ2UgPSBvcmlnaW5hbE1lc3NhZ2U7XG4gICAgaWYgKGUuY29tcG9uZW50U3RhY2sgIT0gbnVsbCkge1xuICAgICAgbWVzc2FnZSArPSBgXFxuXFxuVGhpcyBlcnJvciBpcyBsb2NhdGVkIGF0OiR7ZS5jb21wb25lbnRTdGFja31gO1xuICAgIH1cbiAgICBjb25zdCBuYW1lUHJlZml4ID0gZS5uYW1lID09IG51bGwgfHwgZS5uYW1lID09PSAnJyA/ICcnIDogYCR7ZS5uYW1lfTogYDtcbiAgICBjb25zdCBpc0Zyb21Db25zb2xlRXJyb3IgPSBlLm5hbWUgPT09ICdjb25zb2xlLmVycm9yJztcblxuICAgIGlmICghbWVzc2FnZS5zdGFydHNXaXRoKG5hbWVQcmVmaXgpKSB7XG4gICAgICBtZXNzYWdlID0gbmFtZVByZWZpeCArIG1lc3NhZ2U7XG4gICAgfVxuXG4gICAgLy8gRXJyb3JzIGNyZWF0ZWQgYnkgYGNvbnNvbGUuZXJyb3JgIGhhdmUgYWxyZWFkeSBiZWVuIHByaW50ZWQuXG4gICAgaWYgKCFpc0Zyb21Db25zb2xlRXJyb3IpIHtcbiAgICAgIGlmIChjb25zb2xlLl9lcnJvck9yaWdpbmFsKSB7XG4gICAgICAgIGNvbnNvbGUuX2Vycm9yT3JpZ2luYWwobWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1lc3NhZ2UgPVxuICAgICAgZS5qc0VuZ2luZSA9PSBudWxsID8gbWVzc2FnZSA6IGAke21lc3NhZ2V9LCBqcyBlbmdpbmU6ICR7ZS5qc0VuZ2luZX1gO1xuICAgIE5hdGl2ZUV4Y2VwdGlvbnNNYW5hZ2VyLnJlcG9ydEV4Y2VwdGlvbih7XG4gICAgICBtZXNzYWdlLFxuICAgICAgb3JpZ2luYWxNZXNzYWdlOiBtZXNzYWdlID09PSBvcmlnaW5hbE1lc3NhZ2UgPyBudWxsIDogb3JpZ2luYWxNZXNzYWdlLFxuICAgICAgbmFtZTogZS5uYW1lID09IG51bGwgfHwgZS5uYW1lID09PSAnJyA/IG51bGwgOiBlLm5hbWUsXG4gICAgICBjb21wb25lbnRTdGFjazpcbiAgICAgICAgdHlwZW9mIGUuY29tcG9uZW50U3RhY2sgPT09ICdzdHJpbmcnID8gZS5jb21wb25lbnRTdGFjayA6IG51bGwsXG4gICAgICBzdGFjayxcbiAgICAgIGlkOiBjdXJyZW50RXhjZXB0aW9uSUQsXG4gICAgICBpc0ZhdGFsLFxuICAgICAgZXh0cmFEYXRhOiB7XG4gICAgICAgIGpzRW5naW5lOiBlLmpzRW5naW5lLFxuICAgICAgICByYXdTdGFjazogZS5zdGFjayxcbiAgICAgICAgZnJhbWVzUG9wcGVkOiBlLmZyYW1lc1RvUG9wLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgaWYgKGUucHJldmVudFN5bWJvbGljYXRpb24gPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3ltYm9saWNhdGVTdGFja1RyYWNlID0gcmVxdWlyZSgnLi9EZXZ0b29scy9zeW1ib2xpY2F0ZVN0YWNrVHJhY2UnKTtcbiAgICAgIHN5bWJvbGljYXRlU3RhY2tUcmFjZShzdGFjaylcbiAgICAgICAgLnRoZW4ocHJldHR5U3RhY2sgPT4ge1xuICAgICAgICAgIGlmIChwcmV0dHlTdGFjaykge1xuICAgICAgICAgICAgY29uc3Qgc3RhY2tXaXRob3V0Q29sbGFwc2VkRnJhbWVzID0gcHJldHR5U3RhY2suZmlsdGVyKFxuICAgICAgICAgICAgICBmcmFtZSA9PiAhZnJhbWUuY29sbGFwc2UsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgTmF0aXZlRXhjZXB0aW9uc01hbmFnZXIudXBkYXRlRXhjZXB0aW9uTWVzc2FnZShcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgc3RhY2tXaXRob3V0Q29sbGFwc2VkRnJhbWVzLFxuICAgICAgICAgICAgICBjdXJyZW50RXhjZXB0aW9uSUQsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzdGFjayBpcyBudWxsJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gc3ltYm9saWNhdGUgc3RhY2sgdHJhY2U6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmRlY2xhcmUgdmFyIGNvbnNvbGU6IHR5cGVvZiBjb25zb2xlICYge1xuICBfZXJyb3JPcmlnaW5hbDogdHlwZW9mIGNvbnNvbGUuZXJyb3IsXG4gIHJlcG9ydEVycm9yc0FzRXhjZXB0aW9uczogYm9vbGVhbixcbn07XG5cbi8qKlxuICogTG9ncyBleGNlcHRpb25zIHRvIHRoZSAobmF0aXZlKSBjb25zb2xlIGFuZCBkaXNwbGF5cyB0aGVtXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUV4Y2VwdGlvbihlOiBtaXhlZCwgaXNGYXRhbDogYm9vbGVhbikge1xuICBsZXQgZXJyb3I6IEVycm9yO1xuICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgZXJyb3IgPSBlO1xuICB9IGVsc2Uge1xuICAgIC8vIFdvcmthcm91bmQgZm9yIHJlcG9ydGluZyBlcnJvcnMgY2F1c2VkIGJ5IGB0aHJvdyAnc29tZSBzdHJpbmcnYFxuICAgIC8vIFVuZm9ydHVuYXRlbHkgdGhlcmUgaXMgbm8gd2F5IHRvIGZpZ3VyZSBvdXQgdGhlIHN0YWNrdHJhY2UgaW4gdGhpc1xuICAgIC8vIGNhc2UsIHNvIGlmIHlvdSBlbmRlZCB1cCBoZXJlIHRyeWluZyB0byB0cmFjZSBhbiBlcnJvciwgbG9vayBmb3JcbiAgICAvLyBgdGhyb3cgJzxlcnJvciBtZXNzYWdlPidgIHNvbWV3aGVyZSBpbiB5b3VyIGNvZGViYXNlLlxuICAgIGVycm9yID0gbmV3IFN5bnRoZXRpY0Vycm9yKGUpO1xuICB9XG4gIHJlcG9ydEV4Y2VwdGlvbihlcnJvciwgaXNGYXRhbCk7XG59XG5cbmZ1bmN0aW9uIHJlYWN0Q29uc29sZUVycm9ySGFuZGxlcigpIHtcbiAgaWYgKCFjb25zb2xlLnJlcG9ydEVycm9yc0FzRXhjZXB0aW9ucykge1xuICAgIGNvbnNvbGUuX2Vycm9yT3JpZ2luYWwuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoYXJndW1lbnRzWzBdICYmIGFyZ3VtZW50c1swXS5zdGFjaykge1xuICAgIC8vIHJlcG9ydEV4Y2VwdGlvbiB3aWxsIGNvbnNvbGUuZXJyb3IgdGhpcyB3aXRoIGhpZ2ggZW5vdWdoIGZpZGVsaXR5LlxuICAgIHJlcG9ydEV4Y2VwdGlvbihhcmd1bWVudHNbMF0sIC8qIGlzRmF0YWwgKi8gZmFsc2UpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuX2Vycm9yT3JpZ2luYWwuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICBjb25zdCBzdHJpbmdpZnlTYWZlID0gcmVxdWlyZSgnLi4vVXRpbGl0aWVzL3N0cmluZ2lmeVNhZmUnKTtcbiAgICBjb25zdCBzdHIgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYXJndW1lbnRzLCBzdHJpbmdpZnlTYWZlKS5qb2luKCcsICcpO1xuICAgIGlmIChzdHIuc2xpY2UoMCwgMTApID09PSAnXCJXYXJuaW5nOiAnKSB7XG4gICAgICAvLyBSZWFjdCB3YXJuaW5ncyB1c2UgY29uc29sZS5lcnJvciBzbyB0aGF0IGEgc3RhY2sgdHJhY2UgaXMgc2hvd24sIGJ1dFxuICAgICAgLy8gd2UgZG9uJ3QgKGN1cnJlbnRseSkgd2FudCB0aGVzZSB0byBzaG93IGEgcmVkYm94XG4gICAgICAvLyAoTm90ZTogTG9naWMgZHVwbGljYXRlZCBpbiBwb2x5ZmlsbHMvY29uc29sZS5qcy4pXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGVycm9yOiBFeHRlbmRlZEVycm9yID0gbmV3IFN5bnRoZXRpY0Vycm9yKHN0cik7XG4gICAgZXJyb3IubmFtZSA9ICdjb25zb2xlLmVycm9yJztcbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IChlcnJvci5mcmFtZXNUb1BvcCB8fCAwKSArIDE7XG4gICAgcmVwb3J0RXhjZXB0aW9uKGVycm9yLCAvKiBpc0ZhdGFsICovIGZhbHNlKTtcbiAgfVxufVxuXG4vKipcbiAqIFNob3dzIGEgcmVkYm94IHdpdGggc3RhY2t0cmFjZSBmb3IgYWxsIGNvbnNvbGUuZXJyb3IgbWVzc2FnZXMuICBEaXNhYmxlIGJ5XG4gKiBzZXR0aW5nIGBjb25zb2xlLnJlcG9ydEVycm9yc0FzRXhjZXB0aW9ucyA9IGZhbHNlO2AgaW4geW91ciBhcHAuXG4gKi9cbmZ1bmN0aW9uIGluc3RhbGxDb25zb2xlRXJyb3JSZXBvcnRlcigpIHtcbiAgLy8gRW5hYmxlIHJlcG9ydEVycm9yc0FzRXhjZXB0aW9uc1xuICBpZiAoY29uc29sZS5fZXJyb3JPcmlnaW5hbCkge1xuICAgIHJldHVybjsgLy8gYWxyZWFkeSBpbnN0YWxsZWRcbiAgfVxuICAvLyBGbG93IGRvZXNuJ3QgbGlrZSBpdCB3aGVuIHlvdSBzZXQgYXJiaXRyYXJ5IHZhbHVlcyBvbiBhIGdsb2JhbCBvYmplY3RcbiAgY29uc29sZS5fZXJyb3JPcmlnaW5hbCA9IGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKTtcbiAgY29uc29sZS5lcnJvciA9IHJlYWN0Q29uc29sZUVycm9ySGFuZGxlcjtcbiAgaWYgKGNvbnNvbGUucmVwb3J0RXJyb3JzQXNFeGNlcHRpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBJbmRpdmlkdWFsIGFwcHMgY2FuIGRpc2FibGUgdGhpc1xuICAgIC8vIEZsb3cgZG9lc24ndCBsaWtlIGl0IHdoZW4geW91IHNldCBhcmJpdHJhcnkgdmFsdWVzIG9uIGEgZ2xvYmFsIG9iamVjdFxuICAgIGNvbnNvbGUucmVwb3J0RXJyb3JzQXNFeGNlcHRpb25zID0gdHJ1ZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtoYW5kbGVFeGNlcHRpb24sIGluc3RhbGxDb25zb2xlRXJyb3JSZXBvcnRlciwgU3ludGhldGljRXJyb3J9O1xuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxhQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBRSxnQkFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQUcsVUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQUksMkJBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFLLGdCQUFBLEdBQUFOLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBTSxpQkFBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsU0FBQU8sYUFBQUMsT0FBQSxRQUFBQyx5QkFBQSxHQUFBQyx5QkFBQSxvQkFBQUMscUJBQUEsUUFBQUMsS0FBQSxPQUFBUCxnQkFBQSxDQUFBUSxPQUFBLEVBQUFMLE9BQUEsR0FBQU0sTUFBQSxNQUFBTCx5QkFBQSxRQUFBTSxTQUFBLE9BQUFWLGdCQUFBLENBQUFRLE9BQUEsUUFBQUcsV0FBQSxFQUFBRixNQUFBLEdBQUFHLE9BQUEsQ0FBQUMsU0FBQSxDQUFBTixLQUFBLEVBQUFPLFNBQUEsRUFBQUosU0FB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