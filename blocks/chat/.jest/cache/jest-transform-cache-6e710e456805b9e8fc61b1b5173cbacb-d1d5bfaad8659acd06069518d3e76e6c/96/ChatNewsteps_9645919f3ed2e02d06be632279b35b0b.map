{"version":3,"file":"/Users/macm14/Documents/NXZWAW/nxzwav-294793-react-native/src/packages/blocks/chat/__tests__/step-definitions/ChatNew.steps.tsx","sources":["/Users/macm14/Documents/NXZWAW/nxzwav-294793-react-native/src/packages/blocks/chat/__tests__/step-definitions/ChatNew.steps.tsx"],"names":[],"mappings":"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","sourcesContent":["import { defineFeature, loadFeature } from \"jest-cucumber\";\nimport { shallow, ShallowWrapper } from \"enzyme\";\n\nimport * as helpersChatNew from \"../../../../framework/src/Helpers\";\n\nimport React from \"react\";\nimport ChatNew from \"../../src/ChatNew\";\nimport { Message } from \"../../../../framework/src/Message\";\nimport MessageEnum, { getName } from \"../../../../framework/src/Messages/MessageEnum\";\nimport { runEngine } from \"../../../../framework/src/RunEngine\";\nimport { UserResponse } from \"../../src/ChatNewController\";\n\nconst screenPropsChatNew = {\n  navigation: {\n    navigate: jest.fn(),\n    setOptions: jest.fn(),\n    push: jest.fn(),\n    addListener: jest.fn().mockImplementation((event, callback) => {\n      callback();\n    }),\n    goBack: jest.fn(),\n    state: {\n      params: {\n        receiverUser: \"ReceiveUser\",\n        userID: \"7\",\n        userName: \"name\",\n        userPic: \"\",\n        userPoints: \"12\",\n        userRole: \"designer\"\n      },\n    },\n  },\n  id: \"ChatNew\",\n};\n\nconst userList: UserResponse[] = \n\t[{\n\t\t\tid: \"319\",\n\t\t\ttype: \"user_profile_info\",\n\t\t\tattributes: {\n\t\t\t\tuser_name: \"Prof. Kieth Crona\",\n\t\t\t\tunlock_amount: null,\n\t\t\t\tapple_account_id: 320,\n\t\t\t\tlevel_name: \"Level 1\",\n\t\t\t\tpoints: 4950,\n\t\t\t\trank: 1,\n\t\t\t\tprofile_account_categories_id: {\n\t\t\t\t\tid: 321,\n\t\t\t\t\tname: \"Tracee Wintheiser\"\n\t\t\t\t},\n\t\t\t\tprofile_pic: null,\n\t\t\t\tcover_pic: null\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: \"320\",\n\t\t\ttype: \"user_profile_info\",\n\t\t\tattributes: {\n\t\t\t\tuser_name: \"Diana Fisher DO\",\n\t\t\t\tunlock_amount: null,\n\t\t\t\tapple_account_id: 321,\n\t\t\t\tlevel_name: \"Level 1\",\n\t\t\t\tpoints: 125,\n\t\t\t\trank: 2,\n\t\t\t\tprofile_account_categories_id: {\n\t\t\t\t\tid: 322,\n\t\t\t\t\tname: \"Bobbie Luettgen\"\n\t\t\t\t},\n\t\t\t\tprofile_pic: null,\n\t\t\t\tcover_pic: null\n\t\t\t}\n\t\t}\n\t]\n\n\nconst featureChatNew = loadFeature(\"./__tests__/features/ChatNew-scenario.feature\");\n\ndefineFeature(featureChatNew, (test) => {\n  beforeEach(() => {\n    jest.resetModules();\n    jest.clearAllMocks();\n    jest.doMock(\"react-native\", () => ({ Platform: { OS: \"ios\" } }));\n    jest.spyOn(helpersChatNew, \"getOS\").mockImplementation(() => \"ios\");\n  });\n\n  test(\"User navigates to ChatNew\", ({ given, when, then }) => {\n    let chatNewWrapper: ShallowWrapper;\n    let instanceChatNew: ChatNew;\n\n    given(\"I am a User loading ChatNew\", () => {\n      chatNewWrapper = shallow(<ChatNew {...screenPropsChatNew} />);\n    });\n\n    when(\"I navigate to ChatNew\", () => {\n      instanceChatNew = chatNewWrapper.instance() as ChatNew;\n      let textInputComponentChatNew = chatNewWrapper.findWhere(\n        (node) => node.prop(\"testID\") === \"textInputComponentChatNew\"\n      );\n      textInputComponentChatNew.simulate(\"changeText\", \"user1\");\n      instanceChatNew.onPressUserSubmitting()\n    });\n\n    then(\"ChatNew will load\", () => {\n      instanceChatNew.setState({ userList: userList });\n\n      let itemChatNew = {\n        item: {\n          id: \"319\",\n          type: \"user_profile_info\",\n          attributes: {\n            user_name: \"Prof. Kieth Crona\",\n            unlock_amount: null,\n            apple_account_id: 320,\n            level_name: \"Level 1\",\n            points: 4900,\n            rank: 1,\n            profile_account_categories_id: {\n              id: 321,\n              name: \"Tracee Wintheiser\"\n            },\n            profile_pic: null,\n            cover_pic: null\n          }\n        }\n      };\n      let flatListChatNew = chatNewWrapper.findWhere(\n        (node) => node.prop(\"testID\") === \"flatListChatNew\"\n      );\n      let rowItemChatNew = flatListChatNew\n        .renderProp(\"renderItem\")(itemChatNew)\n        .findWhere((node) => node.prop(\"testID\") === \"rowItemChatNew\");\n      rowItemChatNew.simulate(\"press\");\n\n      let touchOnMainContainerChatNew = chatNewWrapper.findWhere(\n        (node) => node.prop(\"testID\") === \"touchOnMainContainerChatNew\"\n      );\n      touchOnMainContainerChatNew.simulate(\"press\");\n\n      let btnBackChatNew = chatNewWrapper.findWhere(\n        (node) => node.prop(\"testID\") === \"btnBackChatNew\"\n      );\n      btnBackChatNew.simulate(\"press\");\n\n      let btnChatChatNew = chatNewWrapper.findWhere(\n        (node) => node.prop(\"testID\") === \"btnChatChatNew\"\n      );\n      btnChatChatNew.simulate(\"press\");\n\n      instanceChatNew.setState({currentSelectedUser:null})\n\n    });\n\n    then(\"I can leave the screen\", () => {\n      const msgGetUsersForConversation = new Message(\n        getName(MessageEnum.RestAPIResponceMessage)\n      );\n      msgGetUsersForConversation.addData(\n        getName(MessageEnum.RestAPIResponceDataMessage),\n        msgGetUsersForConversation.messageId\n      );\n      msgGetUsersForConversation.addData(\n        getName(MessageEnum.RestAPIResponceSuccessMessage),\n        {\n          data: {\n            message: \"No conversations Found\"\n          }\n        })\n      instanceChatNew.getUserListApiCallId = msgGetUsersForConversation.messageId;\n      runEngine.sendMessage(\"Unit Test\", msgGetUsersForConversation);\n    });\n  });\n});\n"]}