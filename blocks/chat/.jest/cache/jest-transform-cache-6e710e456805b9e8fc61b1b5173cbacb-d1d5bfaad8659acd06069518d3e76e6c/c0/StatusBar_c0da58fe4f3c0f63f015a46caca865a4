bc0f6ec2a4d835125d30c27317572a83
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _NativeStatusBarManager = _interopRequireDefault(require("./NativeStatusBarManager"));
var _NativeStatusBarManag;
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var Platform = require('../../Utilities/Platform');
var React = require('react');
var processColor = require('../../StyleSheet/processColor');
function mergePropsStack(propsStack, defaultValues) {
  return propsStack.reduce(function (prev, cur) {
    for (var prop in cur) {
      if (cur[prop] != null) {
        prev[prop] = cur[prop];
      }
    }
    return prev;
  }, (0, _extends2.default)({}, defaultValues));
}
function createStackEntry(props) {
  return {
    backgroundColor: props.backgroundColor != null ? {
      value: props.backgroundColor,
      animated: props.animated
    } : null,
    barStyle: props.barStyle != null ? {
      value: props.barStyle,
      animated: props.animated
    } : null,
    translucent: props.translucent,
    hidden: props.hidden != null ? {
      value: props.hidden,
      animated: props.animated,
      transition: props.showHideTransition
    } : null,
    networkActivityIndicatorVisible: props.networkActivityIndicatorVisible
  };
}
var StatusBar = function (_React$Component) {
  (0, _inherits2.default)(StatusBar, _React$Component);
  var _super = _createSuper(StatusBar);
  function StatusBar() {
    var _this;
    (0, _classCallCheck2.default)(this, StatusBar);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _this._stackEntry = null;
    return _this;
  }
  (0, _createClass2.default)(StatusBar, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this._stackEntry = StatusBar.pushStackEntry(this.props);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      StatusBar.popStackEntry(this._stackEntry);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      this._stackEntry = StatusBar.replaceStackEntry(this._stackEntry, this.props);
    }
  }, {
    key: "render",
    value: function render() {
      return null;
    }
  }], [{
    key: "setHidden",
    value: function setHidden(hidden, animation) {
      animation = animation || 'none';
      StatusBar._defaultProps.hidden.value = hidden;
      if (Platform.OS === 'ios') {
        _NativeStatusBarManager.default.setHidden(hidden, animation);
      } else if (Platform.OS === 'android') {
        _NativeStatusBarManager.default.setHidden(hidden);
      }
    }
  }, {
    key: "setBarStyle",
    value: function setBarStyle(style, animated) {
      animated = animated || false;
      StatusBar._defaultProps.barStyle.value = style;
      if (Platform.OS === 'ios') {
        _NativeStatusBarManager.default.setStyle(style, animated);
      } else if (Platform.OS === 'android') {
        _NativeStatusBarManager.default.setStyle(style);
      }
    }
  }, {
    key: "setNetworkActivityIndicatorVisible",
    value: function setNetworkActivityIndicatorVisible(visible) {
      if (Platform.OS !== 'ios') {
        console.warn('`setNetworkActivityIndicatorVisible` is only available on iOS');
        return;
      }
      StatusBar._defaultProps.networkActivityIndicatorVisible = visible;
      _NativeStatusBarManager.default.setNetworkActivityIndicatorVisible(visible);
    }
  }, {
    key: "setBackgroundColor",
    value: function setBackgroundColor(color, animated) {
      if (Platform.OS !== 'android') {
        console.warn('`setBackgroundColor` is only available on Android');
        return;
      }
      animated = animated || false;
      StatusBar._defaultProps.backgroundColor.value = color;
      var processedColor = processColor(color);
      if (processedColor == null) {
        console.warn("`StatusBar.setBackgroundColor`: Color " + color + " parsed to null or undefined");
        return;
      }
      _NativeStatusBarManager.default.setColor(processedColor, animated);
    }
  }, {
    key: "setTranslucent",
    value: function setTranslucent(translucent) {
      if (Platform.OS !== 'android') {
        console.warn('`setTranslucent` is only available on Android');
        return;
      }
      StatusBar._defaultProps.translucent = translucent;
      _NativeStatusBarManager.default.setTranslucent(translucent);
    }
  }, {
    key: "pushStackEntry",
    value: function pushStackEntry(props) {
      var entry = createStackEntry(props);
      StatusBar._propsStack.push(entry);
      StatusBar._updatePropsStack();
      return entry;
    }
  }, {
    key: "popStackEntry",
    value: function popStackEntry(entry) {
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack.splice(index, 1);
      }
      StatusBar._updatePropsStack();
    }
  }, {
    key: "replaceStackEntry",
    value: function replaceStackEntry(entry, props) {
      var newEntry = createStackEntry(props);
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack[index] = newEntry;
      }
      StatusBar._updatePropsStack();
      return newEntry;
    }
  }]);
  return StatusBar;
}(React.Component);
StatusBar._propsStack = [];
StatusBar._defaultProps = createStackEntry({
  animated: false,
  showHideTransition: 'fade',
  backgroundColor: Platform.select({
    android: (_NativeStatusBarManag = _NativeStatusBarManager.default.getConstants().DEFAULT_BACKGROUND_COLOR) != null ? _NativeStatusBarManag : 'black',
    ios: 'black'
  }),
  barStyle: 'default',
  translucent: false,
  hidden: false,
  networkActivityIndicatorVisible: false
});
StatusBar._updateImmediate = null;
StatusBar._currentValues = null;
StatusBar.currentHeight = _NativeStatusBarManager.default.getConstants().HEIGHT;
StatusBar.defaultProps = {
  animated: false,
  showHideTransition: 'fade'
};
StatusBar._updatePropsStack = function () {
  clearImmediate(StatusBar._updateImmediate);
  StatusBar._updateImmediate = setImmediate(function () {
    var oldProps = StatusBar._currentValues;
    var mergedProps = mergePropsStack(StatusBar._propsStack, StatusBar._defaultProps);
    if (Platform.OS === 'ios') {
      if (!oldProps || oldProps.barStyle.value !== mergedProps.barStyle.value) {
        _NativeStatusBarManager.default.setStyle(mergedProps.barStyle.value, mergedProps.barStyle.animated || false);
      }
      if (!oldProps || oldProps.hidden.value !== mergedProps.hidden.value) {
        _NativeStatusBarManager.default.setHidden(mergedProps.hidden.value, mergedProps.hidden.animated ? mergedProps.hidden.transition : 'none');
      }
      if (!oldProps || oldProps.networkActivityIndicatorVisible !== mergedProps.networkActivityIndicatorVisible) {
        _NativeStatusBarManager.default.setNetworkActivityIndicatorVisible(mergedProps.networkActivityIndicatorVisible);
      }
    } else if (Platform.OS === 'android') {
      if (!oldProps || oldProps.barStyle.value !== mergedProps.barStyle.value) {
        _NativeStatusBarManager.default.setStyle(mergedProps.barStyle.value);
      }
      if (!oldProps || oldProps.backgroundColor.value !== mergedProps.backgroundColor.value) {
        var processedColor = processColor(mergedProps.backgroundColor.value);
        if (processedColor == null) {
          console.warn("`StatusBar._updatePropsStack`: Color " + mergedProps.backgroundColor.value + " parsed to null or undefined");
        } else {
          _NativeStatusBarManager.default.setColor(processedColor, mergedProps.backgroundColor.animated);
        }
      }
      if (!oldProps || oldProps.hidden.value !== mergedProps.hidden.value) {
        _NativeStatusBarManager.default.setHidden(mergedProps.hidden.value);
      }
      if (!oldProps || oldProps.translucent !== mergedProps.translucent) {
        _NativeStatusBarManager.default.setTranslucent(mergedProps.translucent);
      }
    }
    StatusBar._currentValues = mergedProps;
  });
};
module.exports = StatusBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiX2luaGVyaXRzMiIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiIsIl9nZXRQcm90b3R5cGVPZjIiLCJfZXh0ZW5kczIiLCJfTmF0aXZlU3RhdHVzQmFyTWFuYWdlciIsIl9OYXRpdmVTdGF0dXNCYXJNYW5hZyIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIl9jcmVhdGVTdXBlckludGVybmFsIiwiU3VwZXIiLCJkZWZhdWx0IiwicmVzdWx0IiwiTmV3VGFyZ2V0IiwiY29uc3RydWN0b3IiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJzaGFtIiwiUHJveHkiLCJCb29sZWFuIiwicHJvdG90eXBlIiwidmFsdWVPZiIsImNhbGwiLCJlIiwiUGxhdGZvcm0iLCJSZWFjdCIsInByb2Nlc3NDb2xvciIsIm1lcmdlUHJvcHNTdGFjayIsInByb3BzU3RhY2siLCJkZWZhdWx0VmFsdWVzIiwicmVkdWNlIiwicHJldiIsImN1ciIsInByb3AiLCJjcmVhdGVTdGFja0VudHJ5IiwicHJvcHMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ2YWx1ZSIsImFuaW1hdGVkIiwiYmFyU3R5bGUiLCJ0cmFuc2x1Y2VudCIsImhpZGRlbiIsInRyYW5zaXRpb24iLCJzaG93SGlkZVRyYW5zaXRpb24iLCJuZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlIiwiU3RhdHVzQmFyIiwiX1JlYWN0JENvbXBvbmVudCIsIl9zdXBlciIsIl90aGlzIiwiX2xlbiIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJjb25jYXQiLCJfc3RhY2tFbnRyeSIsImtleSIsImNvbXBvbmVudERpZE1vdW50IiwicHVzaFN0YWNrRW50cnkiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInBvcFN0YWNrRW50cnkiLCJjb21wb25lbnREaWRVcGRhdGUiLCJyZXBsYWNlU3RhY2tFbnRyeSIsInJlbmRlciIsInNldEhpZGRlbiIsImFuaW1hdGlvbiIsIl9kZWZhdWx0UHJvcHMiLCJPUyIsIk5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIiLCJzZXRCYXJTdHlsZSIsInN0eWxlIiwic2V0U3R5bGUiLCJzZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlIiwidmlzaWJsZSIsImNvbnNvbGUiLCJ3YXJuIiwic2V0QmFja2dyb3VuZENvbG9yIiwiY29sb3IiLCJwcm9jZXNzZWRDb2xvciIsInNldENvbG9yIiwic2V0VHJhbnNsdWNlbnQiLCJlbnRyeSIsIl9wcm9wc1N0YWNrIiwicHVzaCIsIl91cGRhdGVQcm9wc1N0YWNrIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwibmV3RW50cnkiLCJDb21wb25lbnQiLCJzZWxlY3QiLCJhbmRyb2lkIiwiZ2V0Q29uc3RhbnRzIiwiREVGQVVMVF9CQUNLR1JPVU5EX0NPTE9SIiwiaW9zIiwiX3VwZGF0ZUltbWVkaWF0ZSIsIl9jdXJyZW50VmFsdWVzIiwiY3VycmVudEhlaWdodCIsIkhFSUdIVCIsImRlZmF1bHRQcm9wcyIsImNsZWFySW1tZWRpYXRlIiwic2V0SW1tZWRpYXRlIiwib2xkUHJvcHMiLCJtZXJnZWRQcm9wcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJTdGF0dXNCYXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgUGxhdGZvcm0gPSByZXF1aXJlKCcuLi8uLi9VdGlsaXRpZXMvUGxhdGZvcm0nKTtcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxuY29uc3QgcHJvY2Vzc0NvbG9yID0gcmVxdWlyZSgnLi4vLi4vU3R5bGVTaGVldC9wcm9jZXNzQ29sb3InKTtcblxuaW1wb3J0IE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIgZnJvbSAnLi9OYXRpdmVTdGF0dXNCYXJNYW5hZ2VyJztcblxuLyoqXG4gKiBTdGF0dXMgYmFyIHN0eWxlXG4gKi9cbmV4cG9ydCB0eXBlIFN0YXR1c0JhclN0eWxlID0gJEtleXM8e1xuICAvKipcbiAgICogRGVmYXVsdCBzdGF0dXMgYmFyIHN0eWxlIChkYXJrIGZvciBpT1MsIGxpZ2h0IGZvciBBbmRyb2lkKVxuICAgKi9cbiAgZGVmYXVsdDogc3RyaW5nLFxuICAvKipcbiAgICogRGFyayBiYWNrZ3JvdW5kLCB3aGl0ZSB0ZXh0cyBhbmQgaWNvbnNcbiAgICovXG4gICdsaWdodC1jb250ZW50Jzogc3RyaW5nLFxuICAvKipcbiAgICogTGlnaHQgYmFja2dyb3VuZCwgZGFyayB0ZXh0cyBhbmQgaWNvbnNcbiAgICovXG4gICdkYXJrLWNvbnRlbnQnOiBzdHJpbmcsXG59PjtcblxuLyoqXG4gKiBTdGF0dXMgYmFyIGFuaW1hdGlvblxuICovXG5leHBvcnQgdHlwZSBTdGF0dXNCYXJBbmltYXRpb24gPSAkS2V5czx7XG4gIC8qKlxuICAgKiBObyBhbmltYXRpb25cbiAgICovXG4gIG5vbmU6IHN0cmluZyxcbiAgLyoqXG4gICAqIEZhZGUgYW5pbWF0aW9uXG4gICAqL1xuICBmYWRlOiBzdHJpbmcsXG4gIC8qKlxuICAgKiBTbGlkZSBhbmltYXRpb25cbiAgICovXG4gIHNsaWRlOiBzdHJpbmcsXG59PjtcblxudHlwZSBBbmRyb2lkUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLyoqXG4gICAqIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBzdGF0dXMgYmFyLlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgYmFja2dyb3VuZENvbG9yPzogP3N0cmluZyxcbiAgLyoqXG4gICAqIElmIHRoZSBzdGF0dXMgYmFyIGlzIHRyYW5zbHVjZW50LlxuICAgKiBXaGVuIHRyYW5zbHVjZW50IGlzIHNldCB0byB0cnVlLCB0aGUgYXBwIHdpbGwgZHJhdyB1bmRlciB0aGUgc3RhdHVzIGJhci5cbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiB1c2luZyBhIHNlbWkgdHJhbnNwYXJlbnQgc3RhdHVzIGJhciBjb2xvci5cbiAgICpcbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHRyYW5zbHVjZW50PzogP2Jvb2xlYW4sXG58fT47XG5cbnR5cGUgSU9TUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLyoqXG4gICAqIElmIHRoZSBuZXR3b3JrIGFjdGl2aXR5IGluZGljYXRvciBzaG91bGQgYmUgdmlzaWJsZS5cbiAgICpcbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgbmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZT86ID9ib29sZWFuLFxuICAvKipcbiAgICogVGhlIHRyYW5zaXRpb24gZWZmZWN0IHdoZW4gc2hvd2luZyBhbmQgaGlkaW5nIHRoZSBzdGF0dXMgYmFyIHVzaW5nIHRoZSBgaGlkZGVuYFxuICAgKiBwcm9wLiBEZWZhdWx0cyB0byAnZmFkZScuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIHNob3dIaWRlVHJhbnNpdGlvbj86ID8oJ2ZhZGUnIHwgJ3NsaWRlJyksXG58fT47XG5cbnR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLi4uQW5kcm9pZFByb3BzLFxuICAuLi5JT1NQcm9wcyxcbiAgLyoqXG4gICAqIElmIHRoZSBzdGF0dXMgYmFyIGlzIGhpZGRlbi5cbiAgICovXG4gIGhpZGRlbj86ID9ib29sZWFuLFxuICAvKipcbiAgICogSWYgdGhlIHRyYW5zaXRpb24gYmV0d2VlbiBzdGF0dXMgYmFyIHByb3BlcnR5IGNoYW5nZXMgc2hvdWxkIGJlIGFuaW1hdGVkLlxuICAgKiBTdXBwb3J0ZWQgZm9yIGJhY2tncm91bmRDb2xvciwgYmFyU3R5bGUgYW5kIGhpZGRlbi5cbiAgICovXG4gIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb2xvciBvZiB0aGUgc3RhdHVzIGJhciB0ZXh0LlxuICAgKi9cbiAgYmFyU3R5bGU/OiA/KCdkZWZhdWx0JyB8ICdsaWdodC1jb250ZW50JyB8ICdkYXJrLWNvbnRlbnQnKSxcbnx9PjtcblxuLyoqXG4gKiBNZXJnZXMgdGhlIHByb3Agc3RhY2sgd2l0aCB0aGUgZGVmYXVsdCB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIG1lcmdlUHJvcHNTdGFjayhcbiAgcHJvcHNTdGFjazogQXJyYXk8T2JqZWN0PixcbiAgZGVmYXVsdFZhbHVlczogT2JqZWN0LFxuKTogT2JqZWN0IHtcbiAgcmV0dXJuIHByb3BzU3RhY2sucmVkdWNlKChwcmV2LCBjdXIpID0+IHtcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gY3VyKSB7XG4gICAgICBpZiAoY3VyW3Byb3BdICE9IG51bGwpIHtcbiAgICAgICAgcHJldltwcm9wXSA9IGN1cltwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByZXY7XG4gIH0sIE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRWYWx1ZXMpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0byBpbnNlcnQgaW4gdGhlIHByb3BzIHN0YWNrIGZyb20gdGhlIHByb3BzXG4gKiBhbmQgdGhlIHRyYW5zaXRpb24vYW5pbWF0aW9uIGluZm8uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVN0YWNrRW50cnkocHJvcHM6IGFueSk6IGFueSB7XG4gIHJldHVybiB7XG4gICAgYmFja2dyb3VuZENvbG9yOlxuICAgICAgcHJvcHMuYmFja2dyb3VuZENvbG9yICE9IG51bGxcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMuYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgYW5pbWF0ZWQ6IHByb3BzLmFuaW1hdGVkLFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsLFxuICAgIGJhclN0eWxlOlxuICAgICAgcHJvcHMuYmFyU3R5bGUgIT0gbnVsbFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5iYXJTdHlsZSxcbiAgICAgICAgICAgIGFuaW1hdGVkOiBwcm9wcy5hbmltYXRlZCxcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICB0cmFuc2x1Y2VudDogcHJvcHMudHJhbnNsdWNlbnQsXG4gICAgaGlkZGVuOlxuICAgICAgcHJvcHMuaGlkZGVuICE9IG51bGxcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMuaGlkZGVuLFxuICAgICAgICAgICAgYW5pbWF0ZWQ6IHByb3BzLmFuaW1hdGVkLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogcHJvcHMuc2hvd0hpZGVUcmFuc2l0aW9uLFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsLFxuICAgIG5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGU6IHByb3BzLm5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUsXG4gIH07XG59XG5cbi8qKlxuICogQ29tcG9uZW50IHRvIGNvbnRyb2wgdGhlIGFwcCBzdGF0dXMgYmFyLlxuICpcbiAqICMjIyBVc2FnZSB3aXRoIE5hdmlnYXRvclxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGhhdmUgbXVsdGlwbGUgYFN0YXR1c0JhcmAgY29tcG9uZW50cyBtb3VudGVkIGF0IHRoZSBzYW1lXG4gKiB0aW1lLiBUaGUgcHJvcHMgd2lsbCBiZSBtZXJnZWQgaW4gdGhlIG9yZGVyIHRoZSBgU3RhdHVzQmFyYCBjb21wb25lbnRzIHdlcmVcbiAqIG1vdW50ZWQuIE9uZSB1c2UgY2FzZSBpcyB0byBzcGVjaWZ5IHN0YXR1cyBiYXIgc3R5bGVzIHBlciByb3V0ZSB1c2luZyBgTmF2aWdhdG9yYC5cbiAqXG4gKiBgYGBcbiAqICA8Vmlldz5cbiAqICAgIDxTdGF0dXNCYXJcbiAqICAgICAgYmFja2dyb3VuZENvbG9yPVwiYmx1ZVwiXG4gKiAgICAgIGJhclN0eWxlPVwibGlnaHQtY29udGVudFwiXG4gKiAgICAvPlxuICogICAgPE5hdmlnYXRvclxuICogICAgICBpbml0aWFsUm91dGU9e3tzdGF0dXNCYXJIaWRkZW46IHRydWV9fVxuICogICAgICByZW5kZXJTY2VuZT17KHJvdXRlLCBuYXZpZ2F0b3IpID0+XG4gKiAgICAgICAgPFZpZXc+XG4gKiAgICAgICAgICA8U3RhdHVzQmFyIGhpZGRlbj17cm91dGUuc3RhdHVzQmFySGlkZGVufSAvPlxuICogICAgICAgICAgLi4uXG4gKiAgICAgICAgPC9WaWV3PlxuICogICAgICB9XG4gKiAgICAvPlxuICogIDwvVmlldz5cbiAqIGBgYFxuICpcbiAqICMjIyBJbXBlcmF0aXZlIEFQSVxuICpcbiAqIEZvciBjYXNlcyB3aGVyZSB1c2luZyBhIGNvbXBvbmVudCBpcyBub3QgaWRlYWwsIHRoZXJlIGFyZSBzdGF0aWMgbWV0aG9kc1xuICogdG8gbWFuaXB1bGF0ZSB0aGUgYFN0YXR1c0JhcmAgZGlzcGxheSBzdGFjay4gVGhlc2UgbWV0aG9kcyBoYXZlIHRoZSBzYW1lXG4gKiBiZWhhdmlvciBhcyBtb3VudGluZyBhbmQgdW5tb3VudGluZyBhIGBTdGF0dXNCYXJgIGNvbXBvbmVudC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgeW91IGNhbiBjYWxsIGBTdGF0dXNCYXIucHVzaFN0YWNrRW50cnlgIHRvIHVwZGF0ZSB0aGUgc3RhdHVzIGJhclxuICogYmVmb3JlIGxhdW5jaGluZyBhIHRoaXJkLXBhcnR5IG5hdGl2ZSBVSSBjb21wb25lbnQsIGFuZCB0aGVuIGNhbGxcbiAqIGBTdGF0dXNCYXIucG9wU3RhY2tFbnRyeWAgd2hlbiBjb21wbGV0ZWQuXG4gKlxuICogYGBgXG4gKiBjb25zdCBvcGVuVGhpcmRQYXJ0eUJ1Z1JlcG9ydGVyID0gYXN5bmMgKCkgPT4ge1xuICogICAvLyBUaGUgYnVnIHJlcG9ydGVyIGhhcyBhIGRhcmsgYmFja2dyb3VuZCwgc28gd2UgcHVzaCBhIG5ldyBzdGF0dXMgYmFyIHN0eWxlLlxuICogICBjb25zdCBzdGFja0VudHJ5ID0gU3RhdHVzQmFyLnB1c2hTdGFja0VudHJ5KHtiYXJTdHlsZTogJ2xpZ2h0LWNvbnRlbnQnfSk7XG4gKlxuICogICAvLyBgb3BlbmAgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBVSSBpcyBkaXNtaXNzZWQuXG4gKiAgIGF3YWl0IEJ1Z1JlcG9ydGVyLm9wZW4oKTtcbiAqXG4gKiAgIC8vIERvbid0IGZvcmdldCB0byBjYWxsIGBwb3BTdGFja0VudHJ5YCB3aGVuIHlvdSdyZSBkb25lLlxuICogICBTdGF0dXNCYXIucG9wU3RhY2tFbnRyeShzdGFja0VudHJ5KTtcbiAqIH07XG4gKiBgYGBcbiAqXG4gKiBUaGVyZSBpcyBhIGxlZ2FjeSBpbXBlcmF0aXZlIEFQSSB0aGF0IGVuYWJsZXMgeW91IHRvIG1hbnVhbGx5IHVwZGF0ZSB0aGVcbiAqIHN0YXR1cyBiYXIgc3R5bGVzLiBIb3dldmVyLCB0aGUgbGVnYWN5IEFQSSBkb2VzIG5vdCB1cGRhdGUgdGhlIGludGVybmFsXG4gKiBgU3RhdHVzQmFyYCBkaXNwbGF5IHN0YWNrLCB3aGljaCBtZWFucyB0aGF0IGFueSBjaGFuZ2VzIHdpbGwgYmUgb3ZlcnJpZGRlblxuICogd2hlbmV2ZXIgYSBgU3RhdHVzQmFyYCBjb21wb25lbnQgaXMgbW91bnRlZCBvciB1bm1vdW50ZWQuXG4gKlxuICogSXQgaXMgc3Ryb25nbHkgYWR2aXNlZCB0aGF0IHlvdSB1c2UgYHB1c2hTdGFja0VudHJ5YCwgYHBvcFN0YWNrRW50cnlgLCBvclxuICogYHJlcGxhY2VTdGFja0VudHJ5YCBpbnN0ZWFkIG9mIHRoZSBzdGF0aWMgbWV0aG9kcyBiZWdpbm5pbmcgd2l0aCBgc2V0YC5cbiAqXG4gKiAjIyMgQ29uc3RhbnRzXG4gKlxuICogYGN1cnJlbnRIZWlnaHRgIChBbmRyb2lkIG9ubHkpIFRoZSBoZWlnaHQgb2YgdGhlIHN0YXR1cyBiYXIuXG4gKi9cbmNsYXNzIFN0YXR1c0JhciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xuICBzdGF0aWMgX3Byb3BzU3RhY2sgPSBbXTtcblxuICBzdGF0aWMgX2RlZmF1bHRQcm9wcyA9IGNyZWF0ZVN0YWNrRW50cnkoe1xuICAgIGFuaW1hdGVkOiBmYWxzZSxcbiAgICBzaG93SGlkZVRyYW5zaXRpb246ICdmYWRlJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IFBsYXRmb3JtLnNlbGVjdCh7XG4gICAgICBhbmRyb2lkOlxuICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyLmdldENvbnN0YW50cygpLkRFRkFVTFRfQkFDS0dST1VORF9DT0xPUiA/P1xuICAgICAgICAnYmxhY2snLFxuICAgICAgaW9zOiAnYmxhY2snLFxuICAgIH0pLFxuICAgIGJhclN0eWxlOiAnZGVmYXVsdCcsXG4gICAgdHJhbnNsdWNlbnQ6IGZhbHNlLFxuICAgIGhpZGRlbjogZmFsc2UsXG4gICAgbmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZTogZmFsc2UsXG4gIH0pO1xuXG4gIC8vIFRpbWVyIGZvciB1cGRhdGluZyB0aGUgbmF0aXZlIG1vZHVsZSB2YWx1ZXMgYXQgdGhlIGVuZCBvZiB0aGUgZnJhbWUuXG4gIHN0YXRpYyBfdXBkYXRlSW1tZWRpYXRlID0gbnVsbDtcblxuICAvLyBUaGUgY3VycmVudCBtZXJnZWQgdmFsdWVzIGZyb20gdGhlIHByb3BzIHN0YWNrLlxuICBzdGF0aWMgX2N1cnJlbnRWYWx1ZXMgPSBudWxsO1xuXG4gIC8vIFRPRE8oamFuaWMpOiBQcm92aWRlIGEgcmVhbCBBUEkgdG8gZGVhbCB3aXRoIHN0YXR1cyBiYXIgaGVpZ2h0LiBTZWUgdGhlXG4gIC8vIGRpc2N1c3Npb24gaW4gIzYxOTUuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBoZWlnaHQgb2YgdGhlIHN0YXR1cyBiYXIgb24gdGhlIGRldmljZS5cbiAgICpcbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHN0YXRpYyBjdXJyZW50SGVpZ2h0OiBudW1iZXIgPSBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyLmdldENvbnN0YW50cygpLkhFSUdIVDtcblxuICAvLyBQcm92aWRlIGFuIGltcGVyYXRpdmUgQVBJIGFzIHN0YXRpYyBmdW5jdGlvbnMgb2YgdGhlIGNvbXBvbmVudC5cbiAgLy8gU2VlIHRoZSBjb3JyZXNwb25kaW5nIHByb3AgZm9yIG1vcmUgZGV0YWlsLlxuXG4gIC8qKlxuICAgKiBTaG93IG9yIGhpZGUgdGhlIHN0YXR1cyBiYXJcbiAgICogQHBhcmFtIGhpZGRlbiBIaWRlIHRoZSBzdGF0dXMgYmFyLlxuICAgKiBAcGFyYW0gYW5pbWF0aW9uIE9wdGlvbmFsIGFuaW1hdGlvbiB3aGVuXG4gICAqICAgIGNoYW5naW5nIHRoZSBzdGF0dXMgYmFyIGhpZGRlbiBwcm9wZXJ0eS5cbiAgICovXG4gIHN0YXRpYyBzZXRIaWRkZW4oaGlkZGVuOiBib29sZWFuLCBhbmltYXRpb24/OiBTdGF0dXNCYXJBbmltYXRpb24pIHtcbiAgICBhbmltYXRpb24gPSBhbmltYXRpb24gfHwgJ25vbmUnO1xuICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLmhpZGRlbi52YWx1ZSA9IGhpZGRlbjtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdpb3MnKSB7XG4gICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyLnNldEhpZGRlbihoaWRkZW4sIGFuaW1hdGlvbik7XG4gICAgfSBlbHNlIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyLnNldEhpZGRlbihoaWRkZW4pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXR1cyBiYXIgc3R5bGVcbiAgICogQHBhcmFtIHN0eWxlIFN0YXR1cyBiYXIgc3R5bGUgdG8gc2V0XG4gICAqIEBwYXJhbSBhbmltYXRlZCBBbmltYXRlIHRoZSBzdHlsZSBjaGFuZ2UuXG4gICAqL1xuICBzdGF0aWMgc2V0QmFyU3R5bGUoc3R5bGU6IFN0YXR1c0JhclN0eWxlLCBhbmltYXRlZD86IGJvb2xlYW4pIHtcbiAgICBhbmltYXRlZCA9IGFuaW1hdGVkIHx8IGZhbHNlO1xuICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLmJhclN0eWxlLnZhbHVlID0gc3R5bGU7XG4gICAgaWYgKFBsYXRmb3JtLk9TID09PSAnaW9zJykge1xuICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlci5zZXRTdHlsZShzdHlsZSwgYW5pbWF0ZWQpO1xuICAgIH0gZWxzZSBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlci5zZXRTdHlsZShzdHlsZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnRyb2wgdGhlIHZpc2liaWxpdHkgb2YgdGhlIG5ldHdvcmsgYWN0aXZpdHkgaW5kaWNhdG9yXG4gICAqIEBwYXJhbSB2aXNpYmxlIFNob3cgdGhlIGluZGljYXRvci5cbiAgICovXG4gIHN0YXRpYyBzZXROZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlKHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICBpZiAoUGxhdGZvcm0uT1MgIT09ICdpb3MnKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdgc2V0TmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZWAgaXMgb25seSBhdmFpbGFibGUgb24gaU9TJyxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLm5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUgPSB2aXNpYmxlO1xuICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIuc2V0TmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSh2aXNpYmxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBzdGF0dXMgYmFyXG4gICAqIEBwYXJhbSBjb2xvciBCYWNrZ3JvdW5kIGNvbG9yLlxuICAgKiBAcGFyYW0gYW5pbWF0ZWQgQW5pbWF0ZSB0aGUgc3R5bGUgY2hhbmdlLlxuICAgKi9cbiAgc3RhdGljIHNldEJhY2tncm91bmRDb2xvcihjb2xvcjogc3RyaW5nLCBhbmltYXRlZD86IGJvb2xlYW4pIHtcbiAgICBpZiAoUGxhdGZvcm0uT1MgIT09ICdhbmRyb2lkJykge1xuICAgICAgY29uc29sZS53YXJuKCdgc2V0QmFja2dyb3VuZENvbG9yYCBpcyBvbmx5IGF2YWlsYWJsZSBvbiBBbmRyb2lkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFuaW1hdGVkID0gYW5pbWF0ZWQgfHwgZmFsc2U7XG4gICAgU3RhdHVzQmFyLl9kZWZhdWx0UHJvcHMuYmFja2dyb3VuZENvbG9yLnZhbHVlID0gY29sb3I7XG5cbiAgICBjb25zdCBwcm9jZXNzZWRDb2xvciA9IHByb2Nlc3NDb2xvcihjb2xvcik7XG4gICAgaWYgKHByb2Nlc3NlZENvbG9yID09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFxcYFN0YXR1c0Jhci5zZXRCYWNrZ3JvdW5kQ29sb3JcXGA6IENvbG9yICR7Y29sb3J9IHBhcnNlZCB0byBudWxsIG9yIHVuZGVmaW5lZGAsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIuc2V0Q29sb3IocHJvY2Vzc2VkQ29sb3IsIGFuaW1hdGVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb250cm9sIHRoZSB0cmFuc2x1Y2VuY3kgb2YgdGhlIHN0YXR1cyBiYXJcbiAgICogQHBhcmFtIHRyYW5zbHVjZW50IFNldCBhcyB0cmFuc2x1Y2VudC5cbiAgICovXG4gIHN0YXRpYyBzZXRUcmFuc2x1Y2VudCh0cmFuc2x1Y2VudDogYm9vbGVhbikge1xuICAgIGlmIChQbGF0Zm9ybS5PUyAhPT0gJ2FuZHJvaWQnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2BzZXRUcmFuc2x1Y2VudGAgaXMgb25seSBhdmFpbGFibGUgb24gQW5kcm9pZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy50cmFuc2x1Y2VudCA9IHRyYW5zbHVjZW50O1xuICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIuc2V0VHJhbnNsdWNlbnQodHJhbnNsdWNlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFB1c2ggYSBTdGF0dXNCYXIgZW50cnkgb250byB0aGUgc3RhY2suXG4gICAqIFRoZSByZXR1cm4gdmFsdWUgc2hvdWxkIGJlIHBhc3NlZCB0byBgcG9wU3RhY2tFbnRyeWAgd2hlbiBjb21wbGV0ZS5cbiAgICpcbiAgICogQHBhcmFtIHByb3BzIE9iamVjdCBjb250YWluaW5nIHRoZSBTdGF0dXNCYXIgcHJvcHMgdG8gdXNlIGluIHRoZSBzdGFjayBlbnRyeS5cbiAgICovXG4gIHN0YXRpYyBwdXNoU3RhY2tFbnRyeShwcm9wczogYW55KTogYW55IHtcbiAgICBjb25zdCBlbnRyeSA9IGNyZWF0ZVN0YWNrRW50cnkocHJvcHMpO1xuICAgIFN0YXR1c0Jhci5fcHJvcHNTdGFjay5wdXNoKGVudHJ5KTtcbiAgICBTdGF0dXNCYXIuX3VwZGF0ZVByb3BzU3RhY2soKTtcbiAgICByZXR1cm4gZW50cnk7XG4gIH1cblxuICAvKipcbiAgICogUG9wIGEgU3RhdHVzQmFyIGVudHJ5IGZyb20gdGhlIHN0YWNrLlxuICAgKlxuICAgKiBAcGFyYW0gZW50cnkgRW50cnkgcmV0dXJuZWQgZnJvbSBgcHVzaFN0YWNrRW50cnlgLlxuICAgKi9cbiAgc3RhdGljIHBvcFN0YWNrRW50cnkoZW50cnk6IGFueSkge1xuICAgIGNvbnN0IGluZGV4ID0gU3RhdHVzQmFyLl9wcm9wc1N0YWNrLmluZGV4T2YoZW50cnkpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIFN0YXR1c0Jhci5fcHJvcHNTdGFjay5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICBTdGF0dXNCYXIuX3VwZGF0ZVByb3BzU3RhY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlIGFuIGV4aXN0aW5nIFN0YXR1c0JhciBzdGFjayBlbnRyeSB3aXRoIG5ldyBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIGVudHJ5IEVudHJ5IHJldHVybmVkIGZyb20gYHB1c2hTdGFja0VudHJ5YCB0byByZXBsYWNlLlxuICAgKiBAcGFyYW0gcHJvcHMgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIFN0YXR1c0JhciBwcm9wcyB0byB1c2UgaW4gdGhlIHJlcGxhY2VtZW50IHN0YWNrIGVudHJ5LlxuICAgKi9cbiAgc3RhdGljIHJlcGxhY2VTdGFja0VudHJ5KGVudHJ5OiBhbnksIHByb3BzOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IG5ld0VudHJ5ID0gY3JlYXRlU3RhY2tFbnRyeShwcm9wcyk7XG4gICAgY29uc3QgaW5kZXggPSBTdGF0dXNCYXIuX3Byb3BzU3RhY2suaW5kZXhPZihlbnRyeSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgU3RhdHVzQmFyLl9wcm9wc1N0YWNrW2luZGV4XSA9IG5ld0VudHJ5O1xuICAgIH1cbiAgICBTdGF0dXNCYXIuX3VwZGF0ZVByb3BzU3RhY2soKTtcbiAgICByZXR1cm4gbmV3RW50cnk7XG4gIH1cblxuICBzdGF0aWMgZGVmYXVsdFByb3BzOiAkVEVNUE9SQVJZJG9iamVjdDx7fFxuICAgIGFuaW1hdGVkOiBib29sZWFuLFxuICAgIHNob3dIaWRlVHJhbnNpdGlvbjogJFRFTVBPUkFSWSRzdHJpbmc8J2ZhZGUnPixcbiAgfH0+ID0ge1xuICAgIGFuaW1hdGVkOiBmYWxzZSxcbiAgICBzaG93SGlkZVRyYW5zaXRpb246ICdmYWRlJyxcbiAgfTtcblxuICBfc3RhY2tFbnRyeSA9IG51bGw7XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gRXZlcnkgdGltZSBhIFN0YXR1c0JhciBjb21wb25lbnQgaXMgbW91bnRlZCwgd2UgcHVzaCBpdCdzIHByb3AgdG8gYSBzdGFja1xuICAgIC8vIGFuZCBhbHdheXMgdXBkYXRlIHRoZSBuYXRpdmUgc3RhdHVzIGJhciB3aXRoIHRoZSBwcm9wcyBmcm9tIHRoZSB0b3Agb2YgdGhlblxuICAgIC8vIHN0YWNrLiBUaGlzIGFsbG93cyBoYXZpbmcgbXVsdGlwbGUgU3RhdHVzQmFyIGNvbXBvbmVudHMgYW5kIHRoZSBvbmUgdGhhdCBpc1xuICAgIC8vIGFkZGVkIGxhc3Qgb3IgaXMgZGVlcGVyIGluIHRoZSB2aWV3IGhpZXJhcmNoeSB3aWxsIGhhdmUgcHJpb3JpdHkuXG4gICAgdGhpcy5fc3RhY2tFbnRyeSA9IFN0YXR1c0Jhci5wdXNoU3RhY2tFbnRyeSh0aGlzLnByb3BzKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIC8vIFdoZW4gYSBTdGF0dXNCYXIgaXMgdW5tb3VudGVkLCByZW1vdmUgaXRzZWxmIGZyb20gdGhlIHN0YWNrIGFuZCB1cGRhdGVcbiAgICAvLyB0aGUgbmF0aXZlIGJhciB3aXRoIHRoZSBuZXh0IHByb3BzLlxuICAgIFN0YXR1c0Jhci5wb3BTdGFja0VudHJ5KHRoaXMuX3N0YWNrRW50cnkpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMuX3N0YWNrRW50cnkgPSBTdGF0dXNCYXIucmVwbGFjZVN0YWNrRW50cnkoXG4gICAgICB0aGlzLl9zdGFja0VudHJ5LFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIG5hdGl2ZSBzdGF0dXMgYmFyIHdpdGggdGhlIHByb3BzIGZyb20gdGhlIHN0YWNrLlxuICAgKi9cbiAgc3RhdGljIF91cGRhdGVQcm9wc1N0YWNrID0gKCkgPT4ge1xuICAgIC8vIFNlbmQgdGhlIHVwZGF0ZSB0byB0aGUgbmF0aXZlIG1vZHVsZSBvbmx5IG9uY2UgYXQgdGhlIGVuZCBvZiB0aGUgZnJhbWUuXG4gICAgY2xlYXJJbW1lZGlhdGUoU3RhdHVzQmFyLl91cGRhdGVJbW1lZGlhdGUpO1xuICAgIFN0YXR1c0Jhci5fdXBkYXRlSW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlKCgpID0+IHtcbiAgICAgIGNvbnN0IG9sZFByb3BzID0gU3RhdHVzQmFyLl9jdXJyZW50VmFsdWVzO1xuICAgICAgY29uc3QgbWVyZ2VkUHJvcHMgPSBtZXJnZVByb3BzU3RhY2soXG4gICAgICAgIFN0YXR1c0Jhci5fcHJvcHNTdGFjayxcbiAgICAgICAgU3RhdHVzQmFyLl9kZWZhdWx0UHJvcHMsXG4gICAgICApO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHByb3BzIHRoYXQgaGF2ZSBjaGFuZ2VkIHVzaW5nIHRoZSBtZXJnZWQgdmFsdWVzIGZyb20gdGhlIHByb3BzIHN0YWNrLlxuICAgICAgaWYgKFBsYXRmb3JtLk9TID09PSAnaW9zJykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIW9sZFByb3BzIHx8XG4gICAgICAgICAgb2xkUHJvcHMuYmFyU3R5bGUudmFsdWUgIT09IG1lcmdlZFByb3BzLmJhclN0eWxlLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIuc2V0U3R5bGUoXG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5iYXJTdHlsZS52YWx1ZSxcbiAgICAgICAgICAgIG1lcmdlZFByb3BzLmJhclN0eWxlLmFuaW1hdGVkIHx8IGZhbHNlLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvbGRQcm9wcyB8fCBvbGRQcm9wcy5oaWRkZW4udmFsdWUgIT09IG1lcmdlZFByb3BzLmhpZGRlbi52YWx1ZSkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIuc2V0SGlkZGVuKFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuaGlkZGVuLnZhbHVlLFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuaGlkZGVuLmFuaW1hdGVkXG4gICAgICAgICAgICAgID8gbWVyZ2VkUHJvcHMuaGlkZGVuLnRyYW5zaXRpb25cbiAgICAgICAgICAgICAgOiAnbm9uZScsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhb2xkUHJvcHMgfHxcbiAgICAgICAgICBvbGRQcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlICE9PVxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZVxuICAgICAgICApIHtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyLnNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUoXG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIW9sZFByb3BzIHx8XG4gICAgICAgICAgb2xkUHJvcHMuYmFyU3R5bGUudmFsdWUgIT09IG1lcmdlZFByb3BzLmJhclN0eWxlLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIuc2V0U3R5bGUobWVyZ2VkUHJvcHMuYmFyU3R5bGUudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhb2xkUHJvcHMgfHxcbiAgICAgICAgICBvbGRQcm9wcy5iYWNrZ3JvdW5kQ29sb3IudmFsdWUgIT09IG1lcmdlZFByb3BzLmJhY2tncm91bmRDb2xvci52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBwcm9jZXNzZWRDb2xvciA9IHByb2Nlc3NDb2xvcihcbiAgICAgICAgICAgIG1lcmdlZFByb3BzLmJhY2tncm91bmRDb2xvci52YWx1ZSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChwcm9jZXNzZWRDb2xvciA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgIGBcXGBTdGF0dXNCYXIuX3VwZGF0ZVByb3BzU3RhY2tcXGA6IENvbG9yICR7XG4gICAgICAgICAgICAgICAgbWVyZ2VkUHJvcHMuYmFja2dyb3VuZENvbG9yLnZhbHVlXG4gICAgICAgICAgICAgIH0gcGFyc2VkIHRvIG51bGwgb3IgdW5kZWZpbmVkYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIuc2V0Q29sb3IoXG4gICAgICAgICAgICAgIHByb2Nlc3NlZENvbG9yLFxuICAgICAgICAgICAgICBtZXJnZWRQcm9wcy5iYWNrZ3JvdW5kQ29sb3IuYW5pbWF0ZWQsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9sZFByb3BzIHx8IG9sZFByb3BzLmhpZGRlbi52YWx1ZSAhPT0gbWVyZ2VkUHJvcHMuaGlkZGVuLnZhbHVlKSB7XG4gICAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlci5zZXRIaWRkZW4obWVyZ2VkUHJvcHMuaGlkZGVuLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9sZFByb3BzIHx8IG9sZFByb3BzLnRyYW5zbHVjZW50ICE9PSBtZXJnZWRQcm9wcy50cmFuc2x1Y2VudCkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXIuc2V0VHJhbnNsdWNlbnQobWVyZ2VkUHJvcHMudHJhbnNsdWNlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgcHJvcCB2YWx1ZXMuXG4gICAgICBTdGF0dXNCYXIuX2N1cnJlbnRWYWx1ZXMgPSBtZXJnZWRQcm9wcztcbiAgICB9KTtcbiAgfTtcblxuICByZW5kZXIoKTogUmVhY3QuTm9kZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdGF0dXNCYXI7XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBLElBQUFDLGdCQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBRSxhQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBRyxVQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBSSwyQkFBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQUssZ0JBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFNLFNBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQU9iLElBQUFPLHVCQUFBLEdBQUFSLHNCQUFBLENBQUFDLE9BQUE7QUFBOEQsSUFBQVEscUJBQUE7QUFBQSxTQUFBQyxhQUFBQyxPQUFBLFFBQUFDLHlCQUFBLEdBQUFDLHlCQUFBLG9CQUFBQyxxQkFBQSxRQUFBQyxLQUFBLE9BQUFULGdCQUFBLENBQUFVLE9BQUEsRUFBQUwsT0FBQSxHQUFBTSxNQUFBLE1BQUFMLHlCQUFBLFFBQUFNLFNBQUEsT0FBQVosZ0JBQUEsQ0FBQVUsT0FBQSxRQUFBRyxXQUFBLEVBQUFGLE1BQUEsR0FBQUcsT0FBQSxDQUFBQyxTQUFBLENBQUFOLEtBQUEsRUFBQU8sU0FBQSxFQUFBSixTQUFBLFlBQUFELE1BQUEsR0FBQUYsS0FBQSxDQUFBUSxLQUFBLE9BQUFELFNBQUEsZ0JBQUFqQiwyQkFBQSxDQUFBVyxPQUFBLFFBQUFDLE1BQUE7QUFBQSxTQUFBSiwwQkFBQSxlQUFBTyxPQUFBLHFCQUFBQSxPQUFBLENBQUFDLFNBQUEsb0JBQUFELE9BQUEsQ0FBQUMsU0FBQSxDQUFBRyxJQUFBLDJCQUFBQyxLQUFBLG9DQUFBQyxPQUFB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