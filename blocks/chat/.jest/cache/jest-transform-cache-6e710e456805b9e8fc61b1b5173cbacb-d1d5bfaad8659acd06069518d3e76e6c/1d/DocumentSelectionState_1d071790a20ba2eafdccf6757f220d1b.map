{"version":3,"names":["_interopRequireDefault","require","_classCallCheck2","_createClass2","mixInEventEmitter","DocumentSelectionState","anchor","focus","default","_anchorOffset","_focusOffset","_hasFocus","key","value","update","emit","constrainLength","maxLength","Math","min","blur","hasFocus","isCollapsed","isBackward","getAnchorOffset","getFocusOffset","getStartOffset","getEndOffset","max","overlaps","start","end","module","exports"],"sources":["DocumentSelectionState.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @typechecks\n */\n\n'use strict';\n\nconst mixInEventEmitter = require('../../emitter/mixInEventEmitter');\n\n/**\n * DocumentSelectionState is responsible for maintaining selection information\n * for a document.\n *\n * It is intended for use by AbstractTextEditor-based components for\n * identifying the appropriate start/end positions to modify the\n * DocumentContent, and for programmatically setting browser selection when\n * components re-render.\n */\nclass DocumentSelectionState {\n  /**\n   * @param {number} anchor\n   * @param {number} focus\n   */\n  constructor(anchor, focus) {\n    this._anchorOffset = anchor;\n    this._focusOffset = focus;\n    this._hasFocus = false;\n  }\n\n  /**\n   * Apply an update to the state. If either offset value has changed,\n   * set the values and emit the `change` event. Otherwise no-op.\n   *\n   * @param {number} anchor\n   * @param {number} focus\n   */\n  update(anchor, focus) {\n    if (this._anchorOffset !== anchor || this._focusOffset !== focus) {\n      this._anchorOffset = anchor;\n      this._focusOffset = focus;\n      this.emit('update');\n    }\n  }\n\n  /**\n   * Given a max text length, constrain our selection offsets to ensure\n   * that the selection remains strictly within the text range.\n   *\n   * @param {number} maxLength\n   */\n  constrainLength(maxLength) {\n    this.update(\n      Math.min(this._anchorOffset, maxLength),\n      Math.min(this._focusOffset, maxLength),\n    );\n  }\n\n  focus() {\n    if (!this._hasFocus) {\n      this._hasFocus = true;\n      this.emit('focus');\n    }\n  }\n\n  blur() {\n    if (this._hasFocus) {\n      this._hasFocus = false;\n      this.emit('blur');\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasFocus() {\n    return this._hasFocus;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCollapsed() {\n    return this._anchorOffset === this._focusOffset;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isBackward() {\n    return this._anchorOffset > this._focusOffset;\n  }\n\n  /**\n   * @return {?number}\n   */\n  getAnchorOffset() {\n    return this._hasFocus ? this._anchorOffset : null;\n  }\n\n  /**\n   * @return {?number}\n   */\n  getFocusOffset() {\n    return this._hasFocus ? this._focusOffset : null;\n  }\n\n  /**\n   * @return {?number}\n   */\n  getStartOffset() {\n    return this._hasFocus\n      ? Math.min(this._anchorOffset, this._focusOffset)\n      : null;\n  }\n\n  /**\n   * @return {?number}\n   */\n  getEndOffset() {\n    return this._hasFocus\n      ? Math.max(this._anchorOffset, this._focusOffset)\n      : null;\n  }\n\n  /**\n   * @param {number} start\n   * @param {number} end\n   * @return {boolean}\n   */\n  overlaps(start, end) {\n    return (\n      this.hasFocus() &&\n      this.getStartOffset() <= end &&\n      start <= this.getEndOffset()\n    );\n  }\n}\n\nmixInEventEmitter(DocumentSelectionState, {\n  blur: true,\n  focus: true,\n  update: true,\n});\n\nmodule.exports = DocumentSelectionState;\n"],"mappings":"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"}