d9a1effc10d80b537a1658245ed36018
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var infoLog = require('../Utilities/infoLog');
var invariant = require('invariant');
var DEBUG = false;
var TaskQueue = function () {
  function TaskQueue(_ref) {
    var onMoreTasks = _ref.onMoreTasks;
    (0, _classCallCheck2.default)(this, TaskQueue);
    this._onMoreTasks = onMoreTasks;
    this._queueStack = [{
      tasks: [],
      popable: false
    }];
  }
  (0, _createClass2.default)(TaskQueue, [{
    key: "enqueue",
    value: function enqueue(task) {
      this._getCurrentQueue().push(task);
    }
  }, {
    key: "enqueueTasks",
    value: function enqueueTasks(tasks) {
      var _this = this;
      tasks.forEach(function (task) {
        return _this.enqueue(task);
      });
    }
  }, {
    key: "cancelTasks",
    value: function cancelTasks(tasksToCancel) {
      this._queueStack = this._queueStack.map(function (queue) {
        return (0, _extends2.default)({}, queue, {
          tasks: queue.tasks.filter(function (task) {
            return tasksToCancel.indexOf(task) === -1;
          })
        });
      }).filter(function (queue, idx) {
        return queue.tasks.length > 0 || idx === 0;
      });
    }
  }, {
    key: "hasTasksToProcess",
    value: function hasTasksToProcess() {
      return this._getCurrentQueue().length > 0;
    }
  }, {
    key: "processNext",
    value: function processNext() {
      var queue = this._getCurrentQueue();
      if (queue.length) {
        var task = queue.shift();
        try {
          if (task.gen) {
            DEBUG && infoLog('TaskQueue: genPromise for task ' + task.name);
            this._genPromise(task);
          } else if (task.run) {
            DEBUG && infoLog('TaskQueue: run task ' + task.name);
            task.run();
          } else {
            invariant(typeof task === 'function', 'Expected Function, SimpleTask, or PromiseTask, but got:\n' + JSON.stringify(task, null, 2));
            DEBUG && infoLog('TaskQueue: run anonymous task');
            task();
          }
        } catch (e) {
          e.message = 'TaskQueue: Error with task ' + (task.name || '') + ': ' + e.message;
          throw e;
        }
      }
    }
  }, {
    key: "_getCurrentQueue",
    value: function _getCurrentQueue() {
      var stackIdx = this._queueStack.length - 1;
      var queue = this._queueStack[stackIdx];
      if (queue.popable && queue.tasks.length === 0 && this._queueStack.length > 1) {
        this._queueStack.pop();
        DEBUG && infoLog('TaskQueue: popped queue: ', {
          stackIdx: stackIdx,
          queueStackSize: this._queueStack.length
        });
        return this._getCurrentQueue();
      } else {
        return queue.tasks;
      }
    }
  }, {
    key: "_genPromise",
    value: function _genPromise(task) {
      var _this2 = this;
      this._queueStack.push({
        tasks: [],
        popable: false
      });
      var stackIdx = this._queueStack.length - 1;
      DEBUG && infoLog('TaskQueue: push new queue: ', {
        stackIdx: stackIdx
      });
      DEBUG && infoLog('TaskQueue: exec gen task ' + task.name);
      task.gen().then(function () {
        DEBUG && infoLog('TaskQueue: onThen for gen task ' + task.name, {
          stackIdx: stackIdx,
          queueStackSize: _this2._queueStack.length
        });
        _this2._queueStack[stackIdx].popable = true;
        _this2.hasTasksToProcess() && _this2._onMoreTasks();
      }).catch(function (ex) {
        ex.message = "TaskQueue: Error resolving Promise in task " + task.name + ": " + ex.message;
        throw ex;
      }).done();
    }
  }]);
  return TaskQueue;
}();
module.exports = TaskQueue;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9leHRlbmRzMiIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiaW5mb0xvZyIsImludmFyaWFudCIsIkRFQlVHIiwiVGFza1F1ZXVlIiwiX3JlZiIsIm9uTW9yZVRhc2tzIiwiZGVmYXVsdCIsIl9vbk1vcmVUYXNrcyIsIl9xdWV1ZVN0YWNrIiwidGFza3MiLCJwb3BhYmxlIiwia2V5IiwidmFsdWUiLCJlbnF1ZXVlIiwidGFzayIsIl9nZXRDdXJyZW50UXVldWUiLCJwdXNoIiwiZW5xdWV1ZVRhc2tzIiwiX3RoaXMiLCJmb3JFYWNoIiwiY2FuY2VsVGFza3MiLCJ0YXNrc1RvQ2FuY2VsIiwibWFwIiwicXVldWUiLCJmaWx0ZXIiLCJpbmRleE9mIiwiaWR4IiwibGVuZ3RoIiwiaGFzVGFza3NUb1Byb2Nlc3MiLCJwcm9jZXNzTmV4dCIsInNoaWZ0IiwiZ2VuIiwibmFtZSIsIl9nZW5Qcm9taXNlIiwicnVuIiwiSlNPTiIsInN0cmluZ2lmeSIsImUiLCJtZXNzYWdlIiwic3RhY2tJZHgiLCJwb3AiLCJxdWV1ZVN0YWNrU2l6ZSIsIl90aGlzMiIsInRoZW4iLCJjYXRjaCIsImV4IiwiZG9uZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJUYXNrUXVldWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgaW5mb0xvZyA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9pbmZvTG9nJyk7XG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxudHlwZSBTaW1wbGVUYXNrID0ge1xuICBuYW1lOiBzdHJpbmcsXG4gIHJ1bjogKCkgPT4gdm9pZCxcbn07XG50eXBlIFByb21pc2VUYXNrID0ge1xuICBuYW1lOiBzdHJpbmcsXG4gIGdlbjogKCkgPT4gUHJvbWlzZTxhbnk+LFxufTtcbmV4cG9ydCB0eXBlIFRhc2sgPSBGdW5jdGlvbiB8IFNpbXBsZVRhc2sgfCBQcm9taXNlVGFzaztcblxuY29uc3QgREVCVUc6IGZhbHNlID0gZmFsc2U7XG5cbi8qKlxuICogVGFza1F1ZXVlIC0gQSBzeXN0ZW0gZm9yIHF1ZXVlaW5nIGFuZCBleGVjdXRpbmcgYSBtaXggb2Ygc2ltcGxlIGNhbGxiYWNrcyBhbmRcbiAqIHRyZWVzIG9mIGRlcGVuZGVudCB0YXNrcyBiYXNlZCBvbiBQcm9taXNlcy4gTm8gdGFza3MgYXJlIGV4ZWN1dGVkIHVubGVzc1xuICogYHByb2Nlc3NOZXh0YCBpcyBjYWxsZWQuXG4gKlxuICogYGVucXVldWVgIHRha2VzIGEgVGFzayBvYmplY3Qgd2l0aCBlaXRoZXIgYSBzaW1wbGUgYHJ1bmAgY2FsbGJhY2ssIG9yIGFcbiAqIGBnZW5gIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGBQcm9taXNlYCBhbmQgcHV0cyBpdCBpbiB0aGUgcXVldWUuICBJZiBhIGdlblxuICogZnVuY3Rpb24gaXMgc3VwcGxpZWQsIHRoZW4gdGhlIHByb21pc2UgaXQgcmV0dXJucyB3aWxsIGJsb2NrIGV4ZWN1dGlvbiBvZlxuICogdGFza3MgYWxyZWFkeSBpbiB0aGUgcXVldWUgdW50aWwgaXQgcmVzb2x2ZXMuIFRoaXMgY2FuIGJlIHVzZWQgdG8gbWFrZSBzdXJlXG4gKiB0aGUgZmlyc3QgdGFzayBpcyBmdWxseSByZXNvbHZlZCAoaW5jbHVkaW5nIGFzeW5jaHJvbm91cyBkZXBlbmRlbmNpZXMgdGhhdFxuICogYWxzbyBzY2hlZHVsZSBtb3JlIHRhc2tzIHZpYSBgZW5xdWV1ZWApIGJlZm9yZSBzdGFydGluZyBvbiB0aGUgbmV4dCB0YXNrLlxuICogVGhlIGBvbk1vcmVUYXNrc2AgY29uc3RydWN0b3IgYXJndW1lbnQgaXMgdXNlZCB0byBpbmZvcm0gdGhlIG93bmVyIHRoYXQgYW5cbiAqIGFzeW5jIHRhc2sgaGFzIHJlc29sdmVkIGFuZCB0aGF0IHRoZSBxdWV1ZSBzaG91bGQgYmUgcHJvY2Vzc2VkIGFnYWluLlxuICpcbiAqIE5vdGU6IFRhc2tzIGFyZSBvbmx5IGFjdHVhbGx5IGV4ZWN1dGVkIHdpdGggZXhwbGljaXQgY2FsbHMgdG8gYHByb2Nlc3NOZXh0YC5cbiAqL1xuY2xhc3MgVGFza1F1ZXVlIHtcbiAgLyoqXG4gICAqIFRhc2tRdWV1ZSBpbnN0YW5jZXMgYXJlIHNlbGYgY29udGFpbmVkIGFuZCBpbmRlcGVuZGVudCwgc28gbXVsdGlwbGUgdGFza3NcbiAgICogb2YgdmFyeWluZyBzZW1hbnRpY3MgYW5kIHByaW9yaXR5IGNhbiBvcGVyYXRlIHRvZ2V0aGVyLlxuICAgKlxuICAgKiBgb25Nb3JlVGFza3NgIGlzIGludm9rZWQgd2hlbiBgUHJvbWlzZVRhc2tgcyByZXNvbHZlIGlmIHRoZXJlIGFyZSBtb3JlXG4gICAqIHRhc2tzIHRvIHByb2Nlc3MuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7b25Nb3JlVGFza3N9OiB7b25Nb3JlVGFza3M6ICgpID0+IHZvaWR9KSB7XG4gICAgdGhpcy5fb25Nb3JlVGFza3MgPSBvbk1vcmVUYXNrcztcbiAgICB0aGlzLl9xdWV1ZVN0YWNrID0gW3t0YXNrczogW10sIHBvcGFibGU6IGZhbHNlfV07XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgdGFzayB0byB0aGUgcXVldWUuICBJdCBpcyByZWNvbW1lbmRlZCB0byBuYW1lIHlvdXIgdGFza3MgZm9yIGVhc2llclxuICAgKiBhc3luYyBkZWJ1Z2dpbmcuIFRhc2tzIHdpbGwgbm90IGJlIGV4ZWN1dGVkIHVudGlsIGBwcm9jZXNzTmV4dGAgaXMgY2FsbGVkXG4gICAqIGV4cGxpY2l0bHkuXG4gICAqL1xuICBlbnF1ZXVlKHRhc2s6IFRhc2spOiB2b2lkIHtcbiAgICB0aGlzLl9nZXRDdXJyZW50UXVldWUoKS5wdXNoKHRhc2spO1xuICB9XG5cbiAgZW5xdWV1ZVRhc2tzKHRhc2tzOiBBcnJheTxUYXNrPik6IHZvaWQge1xuICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB0aGlzLmVucXVldWUodGFzaykpO1xuICB9XG5cbiAgY2FuY2VsVGFza3ModGFza3NUb0NhbmNlbDogQXJyYXk8VGFzaz4pOiB2b2lkIHtcbiAgICAvLyBzZWFyY2ggdGhyb3VnaCBhbGwgdGFza3MgYW5kIHJlbW92ZSB0aGVtLlxuICAgIHRoaXMuX3F1ZXVlU3RhY2sgPSB0aGlzLl9xdWV1ZVN0YWNrXG4gICAgICAubWFwKHF1ZXVlID0+ICh7XG4gICAgICAgIC4uLnF1ZXVlLFxuICAgICAgICB0YXNrczogcXVldWUudGFza3MuZmlsdGVyKHRhc2sgPT4gdGFza3NUb0NhbmNlbC5pbmRleE9mKHRhc2spID09PSAtMSksXG4gICAgICB9KSlcbiAgICAgIC5maWx0ZXIoKHF1ZXVlLCBpZHgpID0+IHF1ZXVlLnRhc2tzLmxlbmd0aCA+IDAgfHwgaWR4ID09PSAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB0byBzZWUgaWYgYHByb2Nlc3NOZXh0YCBzaG91bGQgYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZXJlIGFyZSB0YXNrcyB0aGF0IGFyZSByZWFkeSB0byBiZVxuICAgKiBwcm9jZXNzZWQgd2l0aCBgcHJvY2Vzc05leHRgLCBvciByZXR1cm5zIGZhbHNlIGlmIHRoZXJlIGFyZSBubyBtb3JlIHRhc2tzXG4gICAqIHRvIGJlIHByb2Nlc3NlZCByaWdodCBub3csIGFsdGhvdWdoIHRoZXJlIG1heSBiZSB0YXNrcyBpbiB0aGUgcXVldWUgdGhhdFxuICAgKiBhcmUgYmxvY2tlZCBieSBlYXJsaWVyIGBQcm9taXNlVGFza2BzIHRoYXQgaGF2ZW4ndCByZXNvbHZlZCB5ZXQuXG4gICAqIGBvbk1vcmVUYXNrc2Agd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgZWFjaCBgUHJvbWlzZVRhc2tgIHJlc29sdmVzIGlmIHRoZXJlIGFyZVxuICAgKiB0YXNrcyByZWFkeSB0byBydW4gYXQgdGhhdCBwb2ludC5cbiAgICovXG4gIGhhc1Rhc2tzVG9Qcm9jZXNzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9nZXRDdXJyZW50UXVldWUoKS5sZW5ndGggPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIHRoZSBuZXh0IHRhc2sgaW4gdGhlIHF1ZXVlLlxuICAgKi9cbiAgcHJvY2Vzc05leHQoKTogdm9pZCB7XG4gICAgY29uc3QgcXVldWUgPSB0aGlzLl9nZXRDdXJyZW50UXVldWUoKTtcbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICBjb25zdCB0YXNrID0gcXVldWUuc2hpZnQoKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0YXNrLmdlbikge1xuICAgICAgICAgIERFQlVHICYmIGluZm9Mb2coJ1Rhc2tRdWV1ZTogZ2VuUHJvbWlzZSBmb3IgdGFzayAnICsgdGFzay5uYW1lKTtcbiAgICAgICAgICB0aGlzLl9nZW5Qcm9taXNlKCh0YXNrOiBhbnkpKTsgLy8gUmF0aGVyIHRoYW4gYW5ub3lpbmcgdGFnZ2VkIHVuaW9uXG4gICAgICAgIH0gZWxzZSBpZiAodGFzay5ydW4pIHtcbiAgICAgICAgICBERUJVRyAmJiBpbmZvTG9nKCdUYXNrUXVldWU6IHJ1biB0YXNrICcgKyB0YXNrLm5hbWUpO1xuICAgICAgICAgIHRhc2sucnVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgICAgdHlwZW9mIHRhc2sgPT09ICdmdW5jdGlvbicsXG4gICAgICAgICAgICAnRXhwZWN0ZWQgRnVuY3Rpb24sIFNpbXBsZVRhc2ssIG9yIFByb21pc2VUYXNrLCBidXQgZ290OlxcbicgK1xuICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0YXNrLCBudWxsLCAyKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIERFQlVHICYmIGluZm9Mb2coJ1Rhc2tRdWV1ZTogcnVuIGFub255bW91cyB0YXNrJyk7XG4gICAgICAgICAgdGFzaygpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGUubWVzc2FnZSA9XG4gICAgICAgICAgJ1Rhc2tRdWV1ZTogRXJyb3Igd2l0aCB0YXNrICcgKyAodGFzay5uYW1lIHx8ICcnKSArICc6ICcgKyBlLm1lc3NhZ2U7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX3F1ZXVlU3RhY2s6IEFycmF5PHt0YXNrczogQXJyYXk8VGFzaz4sIHBvcGFibGU6IGJvb2xlYW59PjtcbiAgX29uTW9yZVRhc2tzOiAoKSA9PiB2b2lkO1xuXG4gIF9nZXRDdXJyZW50UXVldWUoKTogQXJyYXk8VGFzaz4ge1xuICAgIGNvbnN0IHN0YWNrSWR4ID0gdGhpcy5fcXVldWVTdGFjay5sZW5ndGggLSAxO1xuICAgIGNvbnN0IHF1ZXVlID0gdGhpcy5fcXVldWVTdGFja1tzdGFja0lkeF07XG4gICAgaWYgKFxuICAgICAgcXVldWUucG9wYWJsZSAmJlxuICAgICAgcXVldWUudGFza3MubGVuZ3RoID09PSAwICYmXG4gICAgICB0aGlzLl9xdWV1ZVN0YWNrLmxlbmd0aCA+IDFcbiAgICApIHtcbiAgICAgIHRoaXMuX3F1ZXVlU3RhY2sucG9wKCk7XG4gICAgICBERUJVRyAmJlxuICAgICAgICBpbmZvTG9nKCdUYXNrUXVldWU6IHBvcHBlZCBxdWV1ZTogJywge1xuICAgICAgICAgIHN0YWNrSWR4LFxuICAgICAgICAgIHF1ZXVlU3RhY2tTaXplOiB0aGlzLl9xdWV1ZVN0YWNrLmxlbmd0aCxcbiAgICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0Q3VycmVudFF1ZXVlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBxdWV1ZS50YXNrcztcbiAgICB9XG4gIH1cblxuICBfZ2VuUHJvbWlzZSh0YXNrOiBQcm9taXNlVGFzaykge1xuICAgIC8vIEVhY2ggYXN5bmMgdGFzayBwdXNoZXMgaXQncyBvd24gcXVldWUgb250byB0aGUgcXVldWUgc3RhY2suIFRoaXNcbiAgICAvLyBlZmZlY3RpdmVseSBkZWZlcnMgZXhlY3V0aW9uIG9mIHByZXZpb3VzbHkgcXVldWVkIHRhc2tzIHVudGlsIHRoZSBwcm9taXNlXG4gICAgLy8gcmVzb2x2ZXMsIGF0IHdoaWNoIHBvaW50IHdlIGFsbG93IHRoZSBuZXcgcXVldWUgdG8gYmUgcG9wcGVkLCB3aGljaFxuICAgIC8vIGhhcHBlbnMgb25jZSBpdCBpcyBmdWxseSBwcm9jZXNzZWQuXG4gICAgdGhpcy5fcXVldWVTdGFjay5wdXNoKHt0YXNrczogW10sIHBvcGFibGU6IGZhbHNlfSk7XG4gICAgY29uc3Qgc3RhY2tJZHggPSB0aGlzLl9xdWV1ZVN0YWNrLmxlbmd0aCAtIDE7XG4gICAgREVCVUcgJiYgaW5mb0xvZygnVGFza1F1ZXVlOiBwdXNoIG5ldyBxdWV1ZTogJywge3N0YWNrSWR4fSk7XG4gICAgREVCVUcgJiYgaW5mb0xvZygnVGFza1F1ZXVlOiBleGVjIGdlbiB0YXNrICcgKyB0YXNrLm5hbWUpO1xuICAgIHRhc2tcbiAgICAgIC5nZW4oKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBERUJVRyAmJlxuICAgICAgICAgIGluZm9Mb2coJ1Rhc2tRdWV1ZTogb25UaGVuIGZvciBnZW4gdGFzayAnICsgdGFzay5uYW1lLCB7XG4gICAgICAgICAgICBzdGFja0lkeCxcbiAgICAgICAgICAgIHF1ZXVlU3RhY2tTaXplOiB0aGlzLl9xdWV1ZVN0YWNrLmxlbmd0aCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcXVldWVTdGFja1tzdGFja0lkeF0ucG9wYWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaGFzVGFza3NUb1Byb2Nlc3MoKSAmJiB0aGlzLl9vbk1vcmVUYXNrcygpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChleCA9PiB7XG4gICAgICAgIGV4Lm1lc3NhZ2UgPSBgVGFza1F1ZXVlOiBFcnJvciByZXNvbHZpbmcgUHJvbWlzZSBpbiB0YXNrICR7XG4gICAgICAgICAgdGFzay5uYW1lXG4gICAgICAgIH06ICR7ZXgubWVzc2FnZX1gO1xuICAgICAgICB0aHJvdyBleDtcbiAgICAgIH0pXG4gICAgICAuZG9uZSgpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGFza1F1ZXVlO1xuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxTQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBRSxnQkFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQUcsYUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBRWIsSUFBTUksT0FBTyxHQUFHSixPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFDL0MsSUFBTUssU0FBUyxHQUFHTCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBWXRDLElBQU1NLEtBQVksR0FBRyxLQUFLO0FBQUMsSUFrQnJCQyxTQUFTO0VBUWIsU0FBQUEsVUFBQUMsSUFBQSxFQUFzRDtJQUFBLElBQXpDQyxXQUFXLEdBQUFELElBQUEsQ0FBWEMsV0FBVztJQUFBLElBQUFQLGdCQUFBLENBQUFRLE9BQUEsUUFBQUgsU0FBQTtJQUN0QixJQUFJLENBQUNJLFlBQVksR0FBR0YsV0FBVztJQUMvQixJQUFJLENBQUNHLFdBQVcsR0FBRyxDQUFDO01BQUNDLEtBQUssRUFBRSxFQUFFO01BQUVDLE9BQU8sRUFBRTtJQUFLLENBQUMsQ0FBQztFQUNsRDtFQUFDLElBQUFYLGFBQUEsQ0FBQU8sT0FBQSxFQUFBSCxTQUFBO0lBQUFRLEdBQUE7SUFBQUMsS0FBQSxFQU9ELFNBQUFDLFFBQVFDLElBQVUsRUFBUTtNQUN4QixJQUFJLENBQUNDLGdCQUFnQixDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDRixJQUFJLENBQUM7SUFDcEM7RUFBQztJQUFBSCxHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBSyxhQUFhUixLQUFrQixFQUFRO01BQUEsSUFBQVMsS0FBQTtNQUNyQ1QsS0FBSyxDQUFDVSxPQUFPLENBQUMsVUFBQUwsSUFBSTtRQUFBLE9BQUlJLEtBQUksQ0FBQ0wsT0FBTyxDQUFDQyxJQUFJLENBQUM7TUFBQSxFQUFDO0lBQzNDO0VBQUM7SUFBQUgsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQVEsWUFBWUMsYUFBMEIsRUFBUTtNQUU1QyxJQUFJLENBQUNiLFdBQVcsR0FBRyxJQUFJLENBQUNBLFdBQVcsQ0FDaENjLEdBQUcsQ0FBQyxVQUFBQyxLQUFLO1FBQUEsV0FBQTFCLFNBQUEsQ0FBQVMsT0FBQSxNQUNMaUIsS0FBSztVQUNSZCxLQUFLLEVBQUVjLEtBQUssQ0FBQ2QsS0FBSyxDQUFDZSxNQUFNLENBQUMsVUFBQVYsSUFBSTtZQUFBLE9BQUlPLGFBQWEsQ0FBQ0ksT0FBTyxDQUFDWCxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7VUFBQTtRQUFDO01BQUEsQ0FDckUsQ0FBQyxDQUNGVSxNQUFNLENBQUMsVUFBQ0QsS0FBSyxFQUFFRyxHQUFHO1FBQUEsT0FBS0gsS0FBSyxDQUFDZCxLQUFLLENBQUNrQixNQUFNLEdBQUcsQ0FBQyxJQUFJRCxHQUFHLEtBQUssQ0FBQztNQUFBLEVBQUM7SUFDaEU7RUFBQztJQUFBZixHQUFBO0lBQUFDLEtBQUEsRUFZRCxTQUFBZ0Isa0JBQUEsRUFBNkI7TUFDM0IsT0FBTyxJQUFJLENBQUNiLGdCQUFnQixDQUFDLENBQUMsQ0FBQ1ksTUFBTSxHQUFHLENBQUM7SUFDM0M7RUFBQztJQUFBaEIsR0FBQTtJQUFBQyxLQUFBLEVBS0QsU0FBQWlCLFlBQUEsRUFBb0I7TUFDbEIsSUFBTU4sS0FBSyxHQUFHLElBQUksQ0FBQ1IsZ0JBQWdCLENBQUMsQ0FBQztNQUNyQyxJQUFJUSxLQUFLLENBQUNJLE1BQU0sRUFBRTtRQUNoQixJQUFNYixJQUFJLEdBQUdTLEtBQUssQ0FBQ08sS0FBSyxDQUFDLENBQUM7UUFDMUIsSUFBSTtVQUNGLElBQUloQixJQUFJLENBQUNpQixHQUFHLEVBQUU7WUFDWjdCLEtBQUssSUFBSUYsT0FBTyxDQUFDLGlDQUFpQyxHQUFHYyxJQUFJLENBQUNrQixJQUFJLENBQUM7WUFDL0QsSUFBSSxDQUFDQyxXQUFXLENBQUVuQixJQUFVLENBQUM7VUFDL0IsQ0FBQyxNQUFNLElBQUlBLElBQUksQ0FBQ29CLEdBQUcsRUFBRTtZQUNuQmhDLEtBQUssSUFBSUYsT0FBTyxDQUFDLHNCQUFzQixHQUFHYyxJQUFJLENBQUNrQixJQUFJLENBQUM7WUFDcERsQixJQUFJLENBQUNvQixHQUFHLENBQUMsQ0FBQztVQUNaLENBQUMsTUFBTTtZQUNMakMsU0FBUyxDQUNQLE9BQU9hLElBQUksS0FBSyxVQUFVLEVBQzFCLDJEQUEyRCxHQUN6RHFCLElBQUksQ0FBQ0MsU0FBUyxDQUFDdEIsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLENBQ2hDLENBQUM7WUFDRFosS0FBSyxJQUFJRixPQUFPLENBQUMsK0JBQStCLENBQUM7WUFDakRjLElBQUksQ0FBQyxDQUFDO1VBQ1I7UUFDRixDQUFDLENBQUMsT0FBT3VCLENBQUMsRUFBRTtVQUNWQSxDQUFDLENBQUNDLE9BQU8sR0FDUCw2QkFBNkIsSUFBSXhCLElBQUksQ0FBQ2tCLElBQUksSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUdLLENBQUMsQ0FBQ0MsT0FBTztVQUN0RSxNQUFNRCxDQUFDO1FBQ1Q7TUFDRjtJQUNGO0VBQUM7SUFBQTFCLEdBQUE7SUFBQUMsS0FBQSxFQUtELFNBQUFHLGlCQUFBLEVBQWdDO01BQzlCLElBQU13QixRQUFRLEdBQUcsSUFBSSxDQUFDL0IsV0FBVyxDQUFDbUIsTUFBTSxHQUFHLENBQUM7TUFDNUMsSUFBTUosS0FBSyxHQUFHLElBQUksQ0FBQ2YsV0FBVyxDQUFDK0IsUUFBUSxDQUFDO01BQ3hDLElBQ0VoQixLQUFLLENBQUNiLE9BQU8sSUFDYmEsS0FBSyxDQUFDZCxLQUFLLENBQUNrQixNQUFNLEtBQUssQ0FBQyxJQUN4QixJQUFJLENBQUNuQixXQUFXLENBQUNtQixNQUFNLEdBQUcsQ0FBQyxFQUMzQjtRQUNBLElBQUksQ0FBQ25CLFdBQVcsQ0FBQ2dDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCdEMsS0FBSyxJQUNIRixPQUFPLENBQUMsMkJBQTJCLEVBQUU7VUFDbkN1QyxRQUFRLEVBQVJBLFFBQVE7VUFDUkUsY0FBYyxFQUFFLElBQUksQ0FBQ2pDLFdBQVcsQ0FBQ21CO1FBQ25DLENBQUMsQ0FBQztRQUNKLE9BQU8sSUFBSSxDQUFDWixnQkFBZ0IsQ0FBQyxDQUFDO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU9RLEtBQUssQ0FBQ2QsS0FBSztNQUNwQjtJQUNGO0VBQUM7SUFBQUUsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQXFCLFlBQVluQixJQUFpQixFQUFFO01BQUEsSUFBQTRCLE1BQUE7TUFLN0IsSUFBSSxDQUFDbEMsV0FBVyxDQUFDUSxJQUFJLENBQUM7UUFBQ1AsS0FBSyxFQUFFLEVBQUU7UUFBRUMsT0FBTyxFQUFFO01BQUssQ0FBQyxDQUFDO01BQ2xELElBQU02QixRQUFRLEdBQUcsSUFBSSxDQUFDL0IsV0FBVyxDQUFDbUIsTUFBTSxHQUFHLENBQUM7TUFDNUN6QixLQUFLLElBQUlGLE9BQU8sQ0FBQyw2QkFBNkIsRUFBRTtRQUFDdUMsUUFBUSxFQUFSQTtNQUFRLENBQUMsQ0FBQztNQUMzRHJDLEtBQUssSUFBSUYsT0FBTyxDQUFDLDJCQUEyQixHQUFHYyxJQUFJLENBQUNrQixJQUFJLENBQUM7TUFDekRsQixJQUFJLENBQ0RpQixHQUFHLENBQUMsQ0FBQyxDQUNMWSxJQUFJLENBQUMsWUFBTTtRQUNWekMsS0FBSyxJQUNIRixPQUFPLENBQUMsaUNBQWlDLEdBQUdjLElBQUksQ0FBQ2tCLElBQUksRUFBRTtVQUNyRE8sUUFBUSxFQUFSQSxRQUFRO1VBQ1JFLGNBQWMsRUFBRUMsTUFBSSxDQUFDbEMsV0FBVyxDQUFDbUI7UUFDbkMsQ0FBQyxDQUFDO1FBQ0plLE1BQUksQ0FBQ2xDLFdBQVcsQ0FBQytCLFFBQVEsQ0FBQyxDQUFDN0IsT0FBTyxHQUFHLElBQUk7UUFDekNnQyxNQUFJLENBQUNkLGlCQUFpQixDQUFDLENBQUMsSUFBSWMsTUFBSSxDQUFDbkMsWUFBWSxDQUFDLENBQUM7TUFDakQsQ0FBQyxDQUFDLENBQ0RxQyxLQUFLLENBQUMsVUFBQUMsRUFBRSxFQUFJO1FBQ1hBLEVBQUUsQ0FBQ1AsT0FBTyxtREFDUnhCLElBQUksQ0FBQ2tCLElBQUksVUFDTmEsRUFBRSxDQUFDUCxPQUFTO1FBQ2pCLE1BQU1PLEVBQUU7TUFDVixDQUFDLENBQUMsQ0FDREMsSUFBSSxDQUFDLENBQUM7SUFDWDtFQUFDO0VBQUEsT0FBQTNDLFNBQUE7QUFBQTtBQUdINEMsTUFBTSxDQUFDQyxPQUFPLEdBQUc3QyxTQUFTIn0=