c218b572d6a26366fd88a0accf3423fb
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _NativeAsyncStorage = _interopRequireDefault(require("./NativeAsyncStorage"));
var _invariant = _interopRequireDefault(require("invariant"));
var RCTAsyncStorage = _NativeAsyncStorage.default;
var AsyncStorage = {
  _getRequests: [],
  _getKeys: [],
  _immediate: null,
  getItem: function getItem(key, callback) {
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiGet([key], function (errors, result) {
        var value = result && result[0] && result[0][1] ? result[0][1] : null;
        var errs = convertErrors(errors);
        callback && callback(errs && errs[0], value);
        if (errs) {
          reject(errs[0]);
        } else {
          resolve(value);
        }
      });
    });
  },
  setItem: function setItem(key, value, callback) {
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiSet([[key, value]], function (errors) {
        var errs = convertErrors(errors);
        callback && callback(errs && errs[0]);
        if (errs) {
          reject(errs[0]);
        } else {
          resolve(null);
        }
      });
    });
  },
  removeItem: function removeItem(key, callback) {
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiRemove([key], function (errors) {
        var errs = convertErrors(errors);
        callback && callback(errs && errs[0]);
        if (errs) {
          reject(errs[0]);
        } else {
          resolve(null);
        }
      });
    });
  },
  mergeItem: function mergeItem(key, value, callback) {
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiMerge([[key, value]], function (errors) {
        var errs = convertErrors(errors);
        callback && callback(errs && errs[0]);
        if (errs) {
          reject(errs[0]);
        } else {
          resolve(null);
        }
      });
    });
  },
  clear: function clear(callback) {
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.clear(function (error) {
        callback && callback(convertError(error));
        if (error && convertError(error)) {
          reject(convertError(error));
        } else {
          resolve(null);
        }
      });
    });
  },
  getAllKeys: function getAllKeys(callback) {
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.getAllKeys(function (error, keys) {
        callback && callback(convertError(error), keys);
        if (error) {
          reject(convertError(error));
        } else {
          resolve(keys);
        }
      });
    });
  },
  flushGetRequests: function flushGetRequests() {
    var getRequests = this._getRequests;
    var getKeys = this._getKeys;
    this._getRequests = [];
    this._getKeys = [];
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    RCTAsyncStorage.multiGet(getKeys, function (errors, result) {
      var map = {};
      result && result.forEach(function (_ref) {
        var _ref2 = (0, _slicedToArray2.default)(_ref, 2),
          key = _ref2[0],
          value = _ref2[1];
        map[key] = value;
        return value;
      });
      var reqLength = getRequests.length;
      for (var i = 0; i < reqLength; i++) {
        var request = getRequests[i];
        var requestKeys = request.keys;
        var requestResult = requestKeys.map(function (key) {
          return [key, map[key]];
        });
        request.callback && request.callback(null, requestResult);
        request.resolve && request.resolve(requestResult);
      }
    });
  },
  multiGet: function multiGet(keys, callback) {
    var _this = this;
    if (!this._immediate) {
      this._immediate = setImmediate(function () {
        _this._immediate = null;
        _this.flushGetRequests();
      });
    }
    var getRequest = {
      keys: keys,
      callback: callback,
      keyIndex: this._getKeys.length,
      resolve: null,
      reject: null
    };
    var promiseResult = new Promise(function (resolve, reject) {
      getRequest.resolve = resolve;
      getRequest.reject = reject;
    });
    this._getRequests.push(getRequest);
    keys.forEach(function (key) {
      if (_this._getKeys.indexOf(key) === -1) {
        _this._getKeys.push(key);
      }
    });
    return promiseResult;
  },
  multiSet: function multiSet(keyValuePairs, callback) {
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiSet(keyValuePairs, function (errors) {
        var error = convertErrors(errors);
        callback && callback(error);
        if (error) {
          reject(error);
        } else {
          resolve(null);
        }
      });
    });
  },
  multiRemove: function multiRemove(keys, callback) {
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiRemove(keys, function (errors) {
        var error = convertErrors(errors);
        callback && callback(error);
        if (error) {
          reject(error);
        } else {
          resolve(null);
        }
      });
    });
  },
  multiMerge: function multiMerge(keyValuePairs, callback) {
    (0, _invariant.default)(RCTAsyncStorage, 'RCTAsyncStorage not available');
    return new Promise(function (resolve, reject) {
      RCTAsyncStorage.multiMerge(keyValuePairs, function (errors) {
        var error = convertErrors(errors);
        callback && callback(error);
        if (error) {
          reject(error);
        } else {
          resolve(null);
        }
      });
    });
  }
};
if (!RCTAsyncStorage.multiMerge) {
  delete AsyncStorage.mergeItem;
  delete AsyncStorage.multiMerge;
}
function convertErrors(errs) {
  if (!errs) {
    return null;
  }
  return (Array.isArray(errs) ? errs : [errs]).map(function (e) {
    return convertError(e);
  });
}
function convertError(error) {
  if (!error) {
    return null;
  }
  var out = new Error(error.message);
  out.key = error.key;
  return out;
}
module.exports = AsyncStorage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9zbGljZWRUb0FycmF5MiIsIl9OYXRpdmVBc3luY1N0b3JhZ2UiLCJfaW52YXJpYW50IiwiUkNUQXN5bmNTdG9yYWdlIiwiTmF0aXZlQXN5bmNTdG9yYWdlIiwiQXN5bmNTdG9yYWdlIiwiX2dldFJlcXVlc3RzIiwiX2dldEtleXMiLCJfaW1tZWRpYXRlIiwiZ2V0SXRlbSIsImtleSIsImNhbGxiYWNrIiwiaW52YXJpYW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJtdWx0aUdldCIsImVycm9ycyIsInJlc3VsdCIsInZhbHVlIiwiZXJycyIsImNvbnZlcnRFcnJvcnMiLCJzZXRJdGVtIiwibXVsdGlTZXQiLCJyZW1vdmVJdGVtIiwibXVsdGlSZW1vdmUiLCJtZXJnZUl0ZW0iLCJtdWx0aU1lcmdlIiwiY2xlYXIiLCJlcnJvciIsImNvbnZlcnRFcnJvciIsImdldEFsbEtleXMiLCJrZXlzIiwiZmx1c2hHZXRSZXF1ZXN0cyIsImdldFJlcXVlc3RzIiwiZ2V0S2V5cyIsIm1hcCIsImZvckVhY2giLCJfcmVmIiwiX3JlZjIiLCJkZWZhdWx0IiwicmVxTGVuZ3RoIiwibGVuZ3RoIiwiaSIsInJlcXVlc3QiLCJyZXF1ZXN0S2V5cyIsInJlcXVlc3RSZXN1bHQiLCJfdGhpcyIsInNldEltbWVkaWF0ZSIsImdldFJlcXVlc3QiLCJrZXlJbmRleCIsInByb21pc2VSZXN1bHQiLCJwdXNoIiwiaW5kZXhPZiIsImtleVZhbHVlUGFpcnMiLCJBcnJheSIsImlzQXJyYXkiLCJlIiwib3V0IiwiRXJyb3IiLCJtZXNzYWdlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIkFzeW5jU3RvcmFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBub2Zsb3dcbiAqIEBmbG93LXdlYWtcbiAqIEBqc2RvY1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IE5hdGl2ZUFzeW5jU3RvcmFnZSBmcm9tICcuL05hdGl2ZUFzeW5jU3RvcmFnZSc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbi8vIFVzZSBTUUxpdGUgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmlsZSBzdG9yYWdlLlxuY29uc3QgUkNUQXN5bmNTdG9yYWdlID0gTmF0aXZlQXN5bmNTdG9yYWdlO1xuXG4vKipcbiAqIGBBc3luY1N0b3JhZ2VgIGlzIGEgc2ltcGxlLCB1bmVuY3J5cHRlZCwgYXN5bmNocm9ub3VzLCBwZXJzaXN0ZW50LCBrZXktdmFsdWVcbiAqIHN0b3JhZ2Ugc3lzdGVtIHRoYXQgaXMgZ2xvYmFsIHRvIHRoZSBhcHAuICBJdCBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkIG9mXG4gKiBMb2NhbFN0b3JhZ2UuXG4gKlxuICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYXN5bmNzdG9yYWdlLmh0bWxcbiAqL1xuY29uc3QgQXN5bmNTdG9yYWdlID0ge1xuICBfZ2V0UmVxdWVzdHM6IChbXTogQXJyYXk8YW55PiksXG4gIF9nZXRLZXlzOiAoW106IEFycmF5PHN0cmluZz4pLFxuICBfaW1tZWRpYXRlOiAobnVsbDogP251bWJlciksXG5cbiAgLyoqXG4gICAqIEZldGNoZXMgYW4gaXRlbSBmb3IgYSBga2V5YCBhbmQgaW52b2tlcyBhIGNhbGxiYWNrIHVwb24gY29tcGxldGlvbi5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYXN5bmNzdG9yYWdlLmh0bWwjZ2V0aXRlbVxuICAgKi9cbiAgZ2V0SXRlbTogZnVuY3Rpb24oXG4gICAga2V5OiBzdHJpbmcsXG4gICAgY2FsbGJhY2s/OiA/KGVycm9yOiA/RXJyb3IsIHJlc3VsdDogP3N0cmluZykgPT4gdm9pZCxcbiAgKTogUHJvbWlzZSB7XG4gICAgaW52YXJpYW50KFJDVEFzeW5jU3RvcmFnZSwgJ1JDVEFzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIFJDVEFzeW5jU3RvcmFnZS5tdWx0aUdldChba2V5XSwgZnVuY3Rpb24oZXJyb3JzLCByZXN1bHQpIHtcbiAgICAgICAgLy8gVW5wYWNrIHJlc3VsdCB0byBnZXQgdmFsdWUgZnJvbSBbW2tleSx2YWx1ZV1dXG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVzdWx0ICYmIHJlc3VsdFswXSAmJiByZXN1bHRbMF1bMV0gPyByZXN1bHRbMF1bMV0gOiBudWxsO1xuICAgICAgICBjb25zdCBlcnJzID0gY29udmVydEVycm9ycyhlcnJvcnMpO1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhlcnJzICYmIGVycnNbMF0sIHZhbHVlKTtcbiAgICAgICAgaWYgKGVycnMpIHtcbiAgICAgICAgICByZWplY3QoZXJyc1swXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgYSBga2V5YCBhbmQgaW52b2tlcyBhIGNhbGxiYWNrIHVwb24gY29tcGxldGlvbi5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYXN5bmNzdG9yYWdlLmh0bWwjc2V0aXRlbVxuICAgKi9cbiAgc2V0SXRlbTogZnVuY3Rpb24oXG4gICAga2V5OiBzdHJpbmcsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBjYWxsYmFjaz86ID8oZXJyb3I6ID9FcnJvcikgPT4gdm9pZCxcbiAgKTogUHJvbWlzZSB7XG4gICAgaW52YXJpYW50KFJDVEFzeW5jU3RvcmFnZSwgJ1JDVEFzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIFJDVEFzeW5jU3RvcmFnZS5tdWx0aVNldChbW2tleSwgdmFsdWVdXSwgZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgICAgIGNvbnN0IGVycnMgPSBjb252ZXJ0RXJyb3JzKGVycm9ycyk7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVycnMgJiYgZXJyc1swXSk7XG4gICAgICAgIGlmIChlcnJzKSB7XG4gICAgICAgICAgcmVqZWN0KGVycnNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuIGl0ZW0gZm9yIGEgYGtleWAgYW5kIGludm9rZXMgYSBjYWxsYmFjayB1cG9uIGNvbXBsZXRpb24uXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FzeW5jc3RvcmFnZS5odG1sI3JlbW92ZWl0ZW1cbiAgICovXG4gIHJlbW92ZUl0ZW06IGZ1bmN0aW9uKFxuICAgIGtleTogc3RyaW5nLFxuICAgIGNhbGxiYWNrPzogPyhlcnJvcjogP0Vycm9yKSA9PiB2b2lkLFxuICApOiBQcm9taXNlIHtcbiAgICBpbnZhcmlhbnQoUkNUQXN5bmNTdG9yYWdlLCAnUkNUQXN5bmNTdG9yYWdlIG5vdCBhdmFpbGFibGUnKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgUkNUQXN5bmNTdG9yYWdlLm11bHRpUmVtb3ZlKFtrZXldLCBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgICAgY29uc3QgZXJycyA9IGNvbnZlcnRFcnJvcnMoZXJyb3JzKTtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soZXJycyAmJiBlcnJzWzBdKTtcbiAgICAgICAgaWYgKGVycnMpIHtcbiAgICAgICAgICByZWplY3QoZXJyc1swXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1lcmdlcyBhbiBleGlzdGluZyBga2V5YCB2YWx1ZSB3aXRoIGFuIGlucHV0IHZhbHVlLCBhc3N1bWluZyBib3RoIHZhbHVlc1xuICAgKiBhcmUgc3RyaW5naWZpZWQgSlNPTi5cbiAgICpcbiAgICogKipOT1RFOioqIFRoaXMgaXMgbm90IHN1cHBvcnRlZCBieSBhbGwgbmF0aXZlIGltcGxlbWVudGF0aW9ucy5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYXN5bmNzdG9yYWdlLmh0bWwjbWVyZ2VpdGVtXG4gICAqL1xuICBtZXJnZUl0ZW06IGZ1bmN0aW9uKFxuICAgIGtleTogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgY2FsbGJhY2s/OiA/KGVycm9yOiA/RXJyb3IpID0+IHZvaWQsXG4gICk6IFByb21pc2Uge1xuICAgIGludmFyaWFudChSQ1RBc3luY1N0b3JhZ2UsICdSQ1RBc3luY1N0b3JhZ2Ugbm90IGF2YWlsYWJsZScpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBSQ1RBc3luY1N0b3JhZ2UubXVsdGlNZXJnZShbW2tleSwgdmFsdWVdXSwgZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgICAgIGNvbnN0IGVycnMgPSBjb252ZXJ0RXJyb3JzKGVycm9ycyk7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVycnMgJiYgZXJyc1swXSk7XG4gICAgICAgIGlmIChlcnJzKSB7XG4gICAgICAgICAgcmVqZWN0KGVycnNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFcmFzZXMgKmFsbCogYEFzeW5jU3RvcmFnZWAgZm9yIGFsbCBjbGllbnRzLCBsaWJyYXJpZXMsIGV0Yy4gWW91IHByb2JhYmx5XG4gICAqIGRvbid0IHdhbnQgdG8gY2FsbCB0aGlzOyB1c2UgYHJlbW92ZUl0ZW1gIG9yIGBtdWx0aVJlbW92ZWAgdG8gY2xlYXIgb25seVxuICAgKiB5b3VyIGFwcCdzIGtleXMuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FzeW5jc3RvcmFnZS5odG1sI2NsZWFyXG4gICAqL1xuICBjbGVhcjogZnVuY3Rpb24oY2FsbGJhY2s/OiA/KGVycm9yOiA/RXJyb3IpID0+IHZvaWQpOiBQcm9taXNlIHtcbiAgICBpbnZhcmlhbnQoUkNUQXN5bmNTdG9yYWdlLCAnUkNUQXN5bmNTdG9yYWdlIG5vdCBhdmFpbGFibGUnKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgUkNUQXN5bmNTdG9yYWdlLmNsZWFyKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGNvbnZlcnRFcnJvcihlcnJvcikpO1xuICAgICAgICBpZiAoZXJyb3IgJiYgY29udmVydEVycm9yKGVycm9yKSkge1xuICAgICAgICAgIHJlamVjdChjb252ZXJ0RXJyb3IoZXJyb3IpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogR2V0cyAqYWxsKiBrZXlzIGtub3duIHRvIHlvdXIgYXBwOyBmb3IgYWxsIGNhbGxlcnMsIGxpYnJhcmllcywgZXRjLlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hc3luY3N0b3JhZ2UuaHRtbCNnZXRhbGxrZXlzXG4gICAqL1xuICBnZXRBbGxLZXlzOiBmdW5jdGlvbihcbiAgICBjYWxsYmFjaz86ID8oZXJyb3I6ID9FcnJvciwga2V5czogP0FycmF5PHN0cmluZz4pID0+IHZvaWQsXG4gICk6IFByb21pc2Uge1xuICAgIGludmFyaWFudChSQ1RBc3luY1N0b3JhZ2UsICdSQ1RBc3luY1N0b3JhZ2Ugbm90IGF2YWlsYWJsZScpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBSQ1RBc3luY1N0b3JhZ2UuZ2V0QWxsS2V5cyhmdW5jdGlvbihlcnJvciwga2V5cykge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhjb252ZXJ0RXJyb3IoZXJyb3IpLCBrZXlzKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGNvbnZlcnRFcnJvcihlcnJvcikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUoa2V5cyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUgZm9sbG93aW5nIGJhdGNoZWQgZnVuY3Rpb25zIGFyZSB1c2VmdWwgZm9yIGV4ZWN1dGluZyBhIGxvdCBvZlxuICAgKiBvcGVyYXRpb25zIGF0IG9uY2UsIGFsbG93aW5nIGZvciBuYXRpdmUgb3B0aW1pemF0aW9ucyBhbmQgcHJvdmlkZSB0aGVcbiAgICogY29udmVuaWVuY2Ugb2YgYSBzaW5nbGUgY2FsbGJhY2sgYWZ0ZXIgYWxsIG9wZXJhdGlvbnMgYXJlIGNvbXBsZXRlLlxuICAgKlxuICAgKiBUaGVzZSBmdW5jdGlvbnMgcmV0dXJuIGFycmF5cyBvZiBlcnJvcnMsIHBvdGVudGlhbGx5IG9uZSBmb3IgZXZlcnkga2V5LlxuICAgKiBGb3Iga2V5LXNwZWNpZmljIGVycm9ycywgdGhlIEVycm9yIG9iamVjdCB3aWxsIGhhdmUgYSBrZXkgcHJvcGVydHkgdG9cbiAgICogaW5kaWNhdGUgd2hpY2gga2V5IGNhdXNlZCB0aGUgZXJyb3IuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBGbHVzaGVzIGFueSBwZW5kaW5nIHJlcXVlc3RzIHVzaW5nIGEgc2luZ2xlIGJhdGNoIGNhbGwgdG8gZ2V0IHRoZSBkYXRhLlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hc3luY3N0b3JhZ2UuaHRtbCNmbHVzaGdldHJlcXVlc3RzXG4gICAqICovXG4gIGZsdXNoR2V0UmVxdWVzdHM6IGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgIGNvbnN0IGdldFJlcXVlc3RzID0gdGhpcy5fZ2V0UmVxdWVzdHM7XG4gICAgY29uc3QgZ2V0S2V5cyA9IHRoaXMuX2dldEtleXM7XG5cbiAgICB0aGlzLl9nZXRSZXF1ZXN0cyA9IFtdO1xuICAgIHRoaXMuX2dldEtleXMgPSBbXTtcblxuICAgIGludmFyaWFudChSQ1RBc3luY1N0b3JhZ2UsICdSQ1RBc3luY1N0b3JhZ2Ugbm90IGF2YWlsYWJsZScpO1xuICAgIFJDVEFzeW5jU3RvcmFnZS5tdWx0aUdldChnZXRLZXlzLCBmdW5jdGlvbihlcnJvcnMsIHJlc3VsdCkge1xuICAgICAgLy8gRXZlbiB0aG91Z2ggdGhlIHJ1bnRpbWUgY29tcGxleGl0eSBvZiB0aGlzIGlzIHRoZW9yZXRpY2FsbHkgd29yc2UgdnMgaWYgd2UgdXNlZCBhIG1hcCxcbiAgICAgIC8vIGl0J3MgbXVjaCwgbXVjaCBmYXN0ZXIgaW4gcHJhY3RpY2UgZm9yIHRoZSBkYXRhIHNldHMgd2UgZGVhbCB3aXRoICh3ZSBhdm9pZFxuICAgICAgLy8gYWxsb2NhdGluZyByZXN1bHQgcGFpciBhcnJheXMpLiBUaGlzIHdhcyBoZWF2aWx5IGJlbmNobWFya2VkLlxuICAgICAgLy9cbiAgICAgIC8vIElzIHRoZXJlIGEgd2F5IHRvIGF2b2lkIHVzaW5nIHRoZSBtYXAgYnV0IGZpeCB0aGUgYnVnIGluIHRoaXMgYnJlYWtpbmcgdGVzdD9cbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvY29tbWl0LzhkZDhhZDc2NTc5ZDdmZWVmMzRjMDE0ZDM4N2JmMDIwNjU2OTIyNjRcbiAgICAgIGNvbnN0IG1hcCA9IHt9O1xuICAgICAgcmVzdWx0ICYmXG4gICAgICAgIHJlc3VsdC5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICBtYXBba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICBjb25zdCByZXFMZW5ndGggPSBnZXRSZXF1ZXN0cy5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcUxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRSZXF1ZXN0c1tpXTtcbiAgICAgICAgY29uc3QgcmVxdWVzdEtleXMgPSByZXF1ZXN0LmtleXM7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RSZXN1bHQgPSByZXF1ZXN0S2V5cy5tYXAoa2V5ID0+IFtrZXksIG1hcFtrZXldXSk7XG4gICAgICAgIHJlcXVlc3QuY2FsbGJhY2sgJiYgcmVxdWVzdC5jYWxsYmFjayhudWxsLCByZXF1ZXN0UmVzdWx0KTtcbiAgICAgICAgcmVxdWVzdC5yZXNvbHZlICYmIHJlcXVlc3QucmVzb2x2ZShyZXF1ZXN0UmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBhbGxvd3MgeW91IHRvIGJhdGNoIHRoZSBmZXRjaGluZyBvZiBpdGVtcyBnaXZlbiBhbiBhcnJheSBvZiBga2V5YFxuICAgKiBpbnB1dHMuIFlvdXIgY2FsbGJhY2sgd2lsbCBiZSBpbnZva2VkIHdpdGggYW4gYXJyYXkgb2YgY29ycmVzcG9uZGluZ1xuICAgKiBrZXktdmFsdWUgcGFpcnMgZm91bmQuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FzeW5jc3RvcmFnZS5odG1sI211bHRpZ2V0XG4gICAqL1xuICBtdWx0aUdldDogZnVuY3Rpb24oXG4gICAga2V5czogQXJyYXk8c3RyaW5nPixcbiAgICBjYWxsYmFjaz86ID8oZXJyb3JzOiA/QXJyYXk8RXJyb3I+LCByZXN1bHQ6ID9BcnJheTxBcnJheTxzdHJpbmc+PikgPT4gdm9pZCxcbiAgKTogUHJvbWlzZSB7XG4gICAgaWYgKCF0aGlzLl9pbW1lZGlhdGUpIHtcbiAgICAgIHRoaXMuX2ltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX2ltbWVkaWF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZmx1c2hHZXRSZXF1ZXN0cygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0UmVxdWVzdCA9IHtcbiAgICAgIGtleXM6IGtleXMsXG4gICAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICAvLyBkbyB3ZSBuZWVkIHRoaXM/XG4gICAgICBrZXlJbmRleDogdGhpcy5fZ2V0S2V5cy5sZW5ndGgsXG4gICAgICByZXNvbHZlOiBudWxsLFxuICAgICAgcmVqZWN0OiBudWxsLFxuICAgIH07XG5cbiAgICBjb25zdCBwcm9taXNlUmVzdWx0ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZ2V0UmVxdWVzdC5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIGdldFJlcXVlc3QucmVqZWN0ID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZ2V0UmVxdWVzdHMucHVzaChnZXRSZXF1ZXN0KTtcbiAgICAvLyBhdm9pZCBmZXRjaGluZyBkdXBsaWNhdGVzXG4gICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAodGhpcy5fZ2V0S2V5cy5pbmRleE9mKGtleSkgPT09IC0xKSB7XG4gICAgICAgIHRoaXMuX2dldEtleXMucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHByb21pc2VSZXN1bHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIGFzIGEgYmF0Y2ggb3BlcmF0aW9uIGZvciBzdG9yaW5nIG11bHRpcGxlIGtleS12YWx1ZSBwYWlycy4gV2hlblxuICAgKiB0aGUgb3BlcmF0aW9uIGNvbXBsZXRlcyB5b3UnbGwgZ2V0IGEgc2luZ2xlIGNhbGxiYWNrIHdpdGggYW55IGVycm9ycy5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYXN5bmNzdG9yYWdlLmh0bWwjbXVsdGlzZXRcbiAgICovXG4gIG11bHRpU2V0OiBmdW5jdGlvbihcbiAgICBrZXlWYWx1ZVBhaXJzOiBBcnJheTxBcnJheTxzdHJpbmc+PixcbiAgICBjYWxsYmFjaz86ID8oZXJyb3JzOiA/QXJyYXk8RXJyb3I+KSA9PiB2b2lkLFxuICApOiBQcm9taXNlIHtcbiAgICBpbnZhcmlhbnQoUkNUQXN5bmNTdG9yYWdlLCAnUkNUQXN5bmNTdG9yYWdlIG5vdCBhdmFpbGFibGUnKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgUkNUQXN5bmNTdG9yYWdlLm11bHRpU2V0KGtleVZhbHVlUGFpcnMsIGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgICBjb25zdCBlcnJvciA9IGNvbnZlcnRFcnJvcnMoZXJyb3JzKTtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDYWxsIHRoaXMgdG8gYmF0Y2ggdGhlIGRlbGV0aW9uIG9mIGFsbCBrZXlzIGluIHRoZSBga2V5c2AgYXJyYXkuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FzeW5jc3RvcmFnZS5odG1sI211bHRpcmVtb3ZlXG4gICAqL1xuICBtdWx0aVJlbW92ZTogZnVuY3Rpb24oXG4gICAga2V5czogQXJyYXk8c3RyaW5nPixcbiAgICBjYWxsYmFjaz86ID8oZXJyb3JzOiA/QXJyYXk8RXJyb3I+KSA9PiB2b2lkLFxuICApOiBQcm9taXNlIHtcbiAgICBpbnZhcmlhbnQoUkNUQXN5bmNTdG9yYWdlLCAnUkNUQXN5bmNTdG9yYWdlIG5vdCBhdmFpbGFibGUnKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgUkNUQXN5bmNTdG9yYWdlLm11bHRpUmVtb3ZlKGtleXMsIGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgICBjb25zdCBlcnJvciA9IGNvbnZlcnRFcnJvcnMoZXJyb3JzKTtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBCYXRjaCBvcGVyYXRpb24gdG8gbWVyZ2UgaW4gZXhpc3RpbmcgYW5kIG5ldyB2YWx1ZXMgZm9yIGEgZ2l2ZW4gc2V0IG9mXG4gICAqIGtleXMuIFRoaXMgYXNzdW1lcyB0aGF0IHRoZSB2YWx1ZXMgYXJlIHN0cmluZ2lmaWVkIEpTT04uXG4gICAqXG4gICAqICoqTk9URSoqOiBUaGlzIGlzIG5vdCBzdXBwb3J0ZWQgYnkgYWxsIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FzeW5jc3RvcmFnZS5odG1sI211bHRpbWVyZ2VcbiAgICovXG4gIG11bHRpTWVyZ2U6IGZ1bmN0aW9uKFxuICAgIGtleVZhbHVlUGFpcnM6IEFycmF5PEFycmF5PHN0cmluZz4+LFxuICAgIGNhbGxiYWNrPzogPyhlcnJvcnM6ID9BcnJheTxFcnJvcj4pID0+IHZvaWQsXG4gICk6IFByb21pc2Uge1xuICAgIGludmFyaWFudChSQ1RBc3luY1N0b3JhZ2UsICdSQ1RBc3luY1N0b3JhZ2Ugbm90IGF2YWlsYWJsZScpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBSQ1RBc3luY1N0b3JhZ2UubXVsdGlNZXJnZShrZXlWYWx1ZVBhaXJzLCBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjb252ZXJ0RXJyb3JzKGVycm9ycyk7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbn07XG5cbi8vIE5vdCBhbGwgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBzdXBwb3J0IG1lcmdlLlxuaWYgKCFSQ1RBc3luY1N0b3JhZ2UubXVsdGlNZXJnZSkge1xuICBkZWxldGUgQXN5bmNTdG9yYWdlLm1lcmdlSXRlbTtcbiAgZGVsZXRlIEFzeW5jU3RvcmFnZS5tdWx0aU1lcmdlO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0RXJyb3JzKGVycnMpIHtcbiAgaWYgKCFlcnJzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIChBcnJheS5pc0FycmF5KGVycnMpID8gZXJycyA6IFtlcnJzXSkubWFwKGUgPT4gY29udmVydEVycm9yKGUpKTtcbn1cblxuZnVuY3Rpb24gY29udmVydEVycm9yKGVycm9yKSB7XG4gIGlmICghZXJyb3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBvdXQgPSBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gIG91dC5rZXkgPSBlcnJvci5rZXk7IC8vIGZsb3cgZG9lc24ndCBsaWtlIHRoaXMgOihcbiAgcmV0dXJuIG91dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBc3luY1N0b3JhZ2U7XG4iXSwibWFwcGluZ3MiOiJBQVlBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBLElBQUFDLGVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUViLElBQUFFLG1CQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxVQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFHQSxJQUFNSSxlQUFlLEdBQUdDLDJCQUFrQjtBQVMxQyxJQUFNQyxZQUFZLEdBQUc7RUFDbkJDLFlBQVksRUFBRyxFQUFlO0VBQzlCQyxRQUFRLEVBQUcsRUFBa0I7RUFDN0JDLFVBQVUsRUFBRyxJQUFjO0VBTzNCQyxPQUFPLEVBQUUsU0FBQUEsUUFDUEMsR0FBVyxFQUNYQyxRQUFvRCxFQUMzQztJQUNULElBQUFDLGtCQUFTLEVBQUNULGVBQWUsRUFBRSwrQkFBK0IsQ0FBQztJQUMzRCxPQUFPLElBQUlVLE9BQU8sQ0FBQyxVQUFDQyxPQUFPLEVBQUVDLE1BQU0sRUFBSztNQUN0Q1osZUFBZSxDQUFDYSxRQUFRLENBQUMsQ0FBQ04sR0FBRyxDQUFDLEVBQUUsVUFBU08sTUFBTSxFQUFFQyxNQUFNLEVBQUU7UUFFdkQsSUFBTUMsS0FBSyxHQUFHRCxNQUFNLElBQUlBLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSUEsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHQSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSTtRQUN2RSxJQUFNRSxJQUFJLEdBQUdDLGFBQWEsQ0FBQ0osTUFBTSxDQUFDO1FBQ2xDTixRQUFRLElBQUlBLFFBQVEsQ0FBQ1MsSUFBSSxJQUFJQSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUVELEtBQUssQ0FBQztRQUM1QyxJQUFJQyxJQUFJLEVBQUU7VUFDUkwsTUFBTSxDQUFDSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsQ0FBQyxNQUFNO1VBQ0xOLE9BQU8sQ0FBQ0ssS0FBSyxDQUFDO1FBQ2hCO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0osQ0FBQztFQU9ERyxPQUFPLEVBQUUsU0FBQUEsUUFDUFosR0FBVyxFQUNYUyxLQUFhLEVBQ2JSLFFBQW1DLEVBQzFCO0lBQ1QsSUFBQUMsa0JBQVMsRUFBQ1QsZUFBZSxFQUFFLCtCQUErQixDQUFDO0lBQzNELE9BQU8sSUFBSVUsT0FBTyxDQUFDLFVBQUNDLE9BQU8sRUFBRUMsTUFBTSxFQUFLO01BQ3RDWixlQUFlLENBQUNvQixRQUFRLENBQUMsQ0FBQyxDQUFDYixHQUFHLEVBQUVTLEtBQUssQ0FBQyxDQUFDLEVBQUUsVUFBU0YsTUFBTSxFQUFFO1FBQ3hELElBQU1HLElBQUksR0FBR0MsYUFBYSxDQUFDSixNQUFNLENBQUM7UUFDbENOLFFBQVEsSUFBSUEsUUFBUSxDQUFDUyxJQUFJLElBQUlBLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyQyxJQUFJQSxJQUFJLEVBQUU7VUFDUkwsTUFBTSxDQUFDSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsQ0FBQyxNQUFNO1VBQ0xOLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDZjtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztFQUNKLENBQUM7RUFPRFUsVUFBVSxFQUFFLFNBQUFBLFdBQ1ZkLEdBQVcsRUFDWEMsUUFBbUMsRUFDMUI7SUFDVCxJQUFBQyxrQkFBUyxFQUFDVCxlQUFlLEVBQUUsK0JBQStCLENBQUM7SUFDM0QsT0FBTyxJQUFJVSxPQUFPLENBQUMsVUFBQ0MsT0FBTyxFQUFFQyxNQUFNLEVBQUs7TUFDdENaLGVBQWUsQ0FBQ3NCLFdBQVcsQ0FBQyxDQUFDZixHQUFHLENBQUMsRUFBRSxVQUFTTyxNQUFNLEVBQUU7UUFDbEQsSUFBTUcsSUFBSSxHQUFHQyxhQUFhLENBQUNKLE1BQU0sQ0FBQztRQUNsQ04sUUFBUSxJQUFJQSxRQUFRLENBQUNTLElBQUksSUFBSUEsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLElBQUlBLElBQUksRUFBRTtVQUNSTCxNQUFNLENBQUNLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixDQUFDLE1BQU07VUFDTE4sT0FBTyxDQUFDLElBQUksQ0FBQztRQUNmO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0osQ0FBQztFQVVEWSxTQUFTLEVBQUUsU0FBQUEsVUFDVGhCLEdBQVcsRUFDWFMsS0FBYSxFQUNiUixRQUFtQyxFQUMxQjtJQUNULElBQUFDLGtCQUFTLEVBQUNULGVBQWUsRUFBRSwrQkFBK0IsQ0FBQztJQUMzRCxPQUFPLElBQUlVLE9BQU8sQ0FBQyxVQUFDQyxPQUFPLEVBQUVDLE1BQU0sRUFBSztNQUN0Q1osZUFBZSxDQUFDd0IsVUFBVSxDQUFDLENBQUMsQ0FBQ2pCLEdBQUcsRUFBRVMsS0FBSyxDQUFDLENBQUMsRUFBRSxVQUFTRixNQUFNLEVBQUU7UUFDMUQsSUFBTUcsSUFBSSxHQUFHQyxhQUFhLENBQUNKLE1BQU0sQ0FBQztRQUNsQ04sUUFBUSxJQUFJQSxRQUFRLENBQUNTLElBQUksSUFBSUEsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLElBQUlBLElBQUksRUFBRTtVQUNSTCxNQUFNLENBQUNLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixDQUFDLE1BQU07VUFDTE4sT0FBTyxDQUFDLElBQUksQ0FBQztRQUNmO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0osQ0FBQztFQVNEYyxLQUFLLEVBQUUsU0FBQUEsTUFBU2pCLFFBQW1DLEVBQVc7SUFDNUQsSUFBQUMsa0JBQVMsRUFBQ1QsZUFBZSxFQUFFLCtCQUErQixDQUFDO0lBQzNELE9BQU8sSUFBSVUsT0FBTyxDQUFDLFVBQUNDLE9BQU8sRUFBRUMsTUFBTSxFQUFLO01BQ3RDWixlQUFlLENBQUN5QixLQUFLLENBQUMsVUFBU0MsS0FBSyxFQUFFO1FBQ3BDbEIsUUFBUSxJQUFJQSxRQUFRLENBQUNtQixZQUFZLENBQUNELEtBQUssQ0FBQyxDQUFDO1FBQ3pDLElBQUlBLEtBQUssSUFBSUMsWUFBWSxDQUFDRCxLQUFLLENBQUMsRUFBRTtVQUNoQ2QsTUFBTSxDQUFDZSxZQUFZLENBQUNELEtBQUssQ0FBQyxDQUFDO1FBQzdCLENBQUMsTUFBTTtVQUNMZixPQUFPLENBQUMsSUFBSSxDQUFDO1FBQ2Y7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDO0VBT0RpQixVQUFVLEVBQUUsU0FBQUEsV0FDVnBCLFFBQXlELEVBQ2hEO0lBQ1QsSUFBQUMsa0JBQVMsRUFBQ1QsZUFBZSxFQUFFLCtCQUErQixDQUFDO0lBQzNELE9BQU8sSUFBSVUsT0FBTyxDQUFDLFVBQUNDLE9BQU8sRUFBRUMsTUFBTSxFQUFLO01BQ3RDWixlQUFlLENBQUM0QixVQUFVLENBQUMsVUFBU0YsS0FBSyxFQUFFRyxJQUFJLEVBQUU7UUFDL0NyQixRQUFRLElBQUlBLFFBQVEsQ0FBQ21CLFlBQVksQ0FBQ0QsS0FBSyxDQUFDLEVBQUVHLElBQUksQ0FBQztRQUMvQyxJQUFJSCxLQUFLLEVBQUU7VUFDVGQsTUFBTSxDQUFDZSxZQUFZLENBQUNELEtBQUssQ0FBQyxDQUFDO1FBQzdCLENBQUMsTUFBTTtVQUNMZixPQUFPLENBQUNrQixJQUFJLENBQUM7UUFDZjtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztFQUNKLENBQUM7RUFpQkRDLGdCQUFnQixFQUFFLFNBQUFBLGlCQUFBLEVBQWlCO0lBQ2pDLElBQU1DLFdBQVcsR0FBRyxJQUFJLENBQUM1QixZQUFZO0lBQ3JDLElBQU02QixPQUFPLEdBQUcsSUFBSSxDQUFDNUIsUUFBUTtJQUU3QixJQUFJLENBQUNELFlBQVksR0FBRyxFQUFFO0lBQ3RCLElBQUksQ0FBQ0MsUUFBUSxHQUFHLEVBQUU7SUFFbEIsSUFBQUssa0JBQVMsRUFBQ1QsZUFBZSxFQUFFLCtCQUErQixDQUFDO0lBQzNEQSxlQUFlLENBQUNhLFFBQVEsQ0FBQ21CLE9BQU8sRUFBRSxVQUFTbEIsTUFBTSxFQUFFQyxNQUFNLEVBQUU7TUFPekQsSUFBTWtCLEdBQUcsR0FBRyxDQUFDLENBQUM7TUFDZGxCLE1BQU0sSUFDSkEsTUFBTSxDQUFDbUIsT0FBTyxDQUFDLFVBQUFDLElBQUEsRUFBa0I7UUFBQSxJQUFBQyxLQUFBLE9BQUF2QyxlQUFBLENBQUF3QyxPQUFBLEVBQUFGLElBQUE7VUFBaEI1QixHQUFHLEdBQUE2QixLQUFBO1VBQUVwQixLQUFLLEdBQUFvQixLQUFBO1FBQ3pCSCxHQUFHLENBQUMxQixHQUFHLENBQUMsR0FBR1MsS0FBSztRQUNoQixPQUFPQSxLQUFLO01BQ2QsQ0FBQyxDQUFDO01BQ0osSUFBTXNCLFNBQVMsR0FBR1AsV0FBVyxDQUFDUSxNQUFNO01BQ3BDLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHRixTQUFTLEVBQUVFLENBQUMsRUFBRSxFQUFFO1FBQ2xDLElBQU1DLE9BQU8sR0FBR1YsV0FBVyxDQUFDUyxDQUFDLENBQUM7UUFDOUIsSUFBTUUsV0FBVyxHQUFHRCxPQUFPLENBQUNaLElBQUk7UUFDaEMsSUFBTWMsYUFBYSxHQUFHRCxXQUFXLENBQUNULEdBQUcsQ0FBQyxVQUFBMUIsR0FBRztVQUFBLE9BQUksQ0FBQ0EsR0FBRyxFQUFFMEIsR0FBRyxDQUFDMUIsR0FBRyxDQUFDLENBQUM7UUFBQSxFQUFDO1FBQzdEa0MsT0FBTyxDQUFDakMsUUFBUSxJQUFJaUMsT0FBTyxDQUFDakMsUUFBUSxDQUFDLElBQUksRUFBRW1DLGFBQWEsQ0FBQztRQUN6REYsT0FBTyxDQUFDOUIsT0FBTyxJQUFJOEIsT0FBTyxDQUFDOUIsT0FBTyxDQUFDZ0MsYUFBYSxDQUFDO01BQ25EO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQztFQVNEOUIsUUFBUSxFQUFFLFNBQUFBLFNBQ1JnQixJQUFtQixFQUNuQnJCLFFBQTBFLEVBQ2pFO0lBQUEsSUFBQW9DLEtBQUE7SUFDVCxJQUFJLENBQUMsSUFBSSxDQUFDdkMsVUFBVSxFQUFFO01BQ3BCLElBQUksQ0FBQ0EsVUFBVSxHQUFHd0MsWUFBWSxDQUFDLFlBQU07UUFDbkNELEtBQUksQ0FBQ3ZDLFVBQVUsR0FBRyxJQUFJO1FBQ3RCdUMsS0FBSSxDQUFDZCxnQkFBZ0IsQ0FBQyxDQUFDO01BQ3pCLENBQUMsQ0FBQztJQUNKO0lBRUEsSUFBTWdCLFVBQVUsR0FBRztNQUNqQmpCLElBQUksRUFBRUEsSUFBSTtNQUNWckIsUUFBUSxFQUFFQSxRQUFRO01BRWxCdUMsUUFBUSxFQUFFLElBQUksQ0FBQzNDLFFBQVEsQ0FBQ21DLE1BQU07TUFDOUI1QixPQUFPLEVBQUUsSUFBSTtNQUNiQyxNQUFNLEVBQUU7SUFDVixDQUFDO0lBRUQsSUFBTW9DLGFBQWEsR0FBRyxJQUFJdEMsT0FBTyxDQUFDLFVBQUNDLE9BQU8sRUFBRUMsTUFBTSxFQUFLO01BQ3JEa0MsVUFBVSxDQUFDbkMsT0FBTyxHQUFHQSxPQUFPO01BQzVCbUMsVUFBVSxDQUFDbEMsTUFBTSxHQUFHQSxNQUFNO0lBQzVCLENBQUMsQ0FBQztJQUVGLElBQUksQ0FBQ1QsWUFBWSxDQUFDOEMsSUFBSSxDQUFDSCxVQUFVLENBQUM7SUFFbENqQixJQUFJLENBQUNLLE9BQU8sQ0FBQyxVQUFBM0IsR0FBRyxFQUFJO01BQ2xCLElBQUlxQyxLQUFJLENBQUN4QyxRQUFRLENBQUM4QyxPQUFPLENBQUMzQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtRQUNyQ3FDLEtBQUksQ0FBQ3hDLFFBQVEsQ0FBQzZDLElBQUksQ0FBQzFDLEdBQUcsQ0FBQztNQUN6QjtJQUNGLENBQUMsQ0FBQztJQUVGLE9BQU95QyxhQUFhO0VBQ3RCLENBQUM7RUFRRDVCLFFBQVEsRUFBRSxTQUFBQSxTQUNSK0IsYUFBbUMsRUFDbkMzQyxRQUEyQyxFQUNsQztJQUNULElBQUFDLGtCQUFTLEVBQUNULGVBQWUsRUFBRSwrQkFBK0IsQ0FBQztJQUMzRCxPQUFPLElBQUlVLE9BQU8sQ0FBQyxVQUFDQyxPQUFPLEVBQUVDLE1BQU0sRUFBSztNQUN0Q1osZUFBZSxDQUFDb0IsUUFBUSxDQUFDK0IsYUFBYSxFQUFFLFVBQVNyQyxNQUFNLEVBQUU7UUFDdkQsSUFBTVksS0FBSyxHQUFHUixhQUFhLENBQUNKLE1BQU0sQ0FBQztRQUNuQ04sUUFBUSxJQUFJQSxRQUFRLENBQUNrQixLQUFLLENBQUM7UUFDM0IsSUFBSUEsS0FBSyxFQUFFO1VBQ1RkLE1BQU0sQ0FBQ2MsS0FBSyxDQUFDO1FBQ2YsQ0FBQyxNQUFNO1VBQ0xmLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDZjtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztFQUNKLENBQUM7RUFPRFcsV0FBVyxFQUFFLFNBQUFBLFlBQ1hPLElBQW1CLEVBQ25CckIsUUFBMkMsRUFDbEM7SUFDVCxJQUFBQyxrQkFBUyxFQUFDVCxlQUFlLEVBQUUsK0JBQStCLENBQUM7SUFDM0QsT0FBTyxJQUFJVSxPQUFPLENBQUMsVUFBQ0MsT0FBTyxFQUFFQyxNQUFNLEVBQUs7TUFDdENaLGVBQWUsQ0FBQ3NCLFdBQVcsQ0FBQ08sSUFBSSxFQUFFLFVBQVNmLE1BQU0sRUFBRTtRQUNqRCxJQUFNWSxLQUFLLEdBQUdSLGFBQWEsQ0FBQ0osTUFBTSxDQUFDO1FBQ25DTixRQUFRLElBQUlBLFFBQVEsQ0FBQ2tCLEtBQUssQ0FBQztRQUMzQixJQUFJQSxLQUFLLEVBQUU7VUFDVGQsTUFBTSxDQUFDYyxLQUFLLENBQUM7UUFDZixDQUFDLE1BQU07VUFDTGYsT0FBTyxDQUFDLElBQUksQ0FBQztRQUNmO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0osQ0FBQztFQVVEYSxVQUFVLEVBQUUsU0FBQUEsV0FDVjJCLGFBQW1DLEVBQ25DM0MsUUFBMkMsRUFDbEM7SUFDVCxJQUFBQyxrQkFBUyxFQUFDVCxlQUFlLEVBQUUsK0JBQStCLENBQUM7SUFDM0QsT0FBTyxJQUFJVSxPQUFPLENBQUMsVUFBQ0MsT0FBTyxFQUFFQyxNQUFNLEVBQUs7TUFDdENaLGVBQWUsQ0FBQ3dCLFVBQVUsQ0FBQzJCLGFBQWEsRUFBRSxVQUFTckMsTUFBTSxFQUFFO1FBQ3pELElBQU1ZLEtBQUssR0FBR1IsYUFBYSxDQUFDSixNQUFNLENBQUM7UUFDbkNOLFFBQVEsSUFBSUEsUUFBUSxDQUFDa0IsS0FBSyxDQUFDO1FBQzNCLElBQUlBLEtBQUssRUFBRTtVQUNUZCxNQUFNLENBQUNjLEtBQUssQ0FBQztRQUNmLENBQUMsTUFBTTtVQUNMZixPQUFPLENBQUMsSUFBSSxDQUFDO1FBQ2Y7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUM7QUFHRCxJQUFJLENBQUNYLGVBQWUsQ0FBQ3dCLFVBQVUsRUFBRTtFQUMvQixPQUFPdEIsWUFBWSxDQUFDcUIsU0FBUztFQUM3QixPQUFPckIsWUFBWSxDQUFDc0IsVUFBVTtBQUNoQztBQUVBLFNBQVNOLGFBQWFBLENBQUNELElBQUksRUFBRTtFQUMzQixJQUFJLENBQUNBLElBQUksRUFBRTtJQUNULE9BQU8sSUFBSTtFQUNiO0VBQ0EsT0FBTyxDQUFDbUMsS0FBSyxDQUFDQyxPQUFPLENBQUNwQyxJQUFJLENBQUMsR0FBR0EsSUFBSSxHQUFHLENBQUNBLElBQUksQ0FBQyxFQUFFZ0IsR0FBRyxDQUFDLFVBQUFxQixDQUFDO0lBQUEsT0FBSTNCLFlBQVksQ0FBQzJCLENBQUMsQ0FBQztFQUFBLEVBQUM7QUFDeEU7QUFFQSxTQUFTM0IsWUFBWUEsQ0FBQ0QsS0FBSyxFQUFFO0VBQzNCLElBQUksQ0FBQ0EsS0FBSyxFQUFFO0lBQ1YsT0FBTyxJQUFJO0VBQ2I7RUFDQSxJQUFNNkIsR0FBRyxHQUFHLElBQUlDLEtBQUssQ0FBQzlCLEtBQUssQ0FBQytCLE9BQU8sQ0FBQztFQUNwQ0YsR0FBRyxDQUFDaEQsR0FBRyxHQUFHbUIsS0FBSyxDQUFDbkIsR0FBRztFQUNuQixPQUFPZ0QsR0FBRztBQUNaO0FBRUFHLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHekQsWUFBWSJ9