{"version":3,"names":["_react","_interopRequireDefault","require","_propTypes","_reactNative","_helpers","_config","_excluded","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","default","result","NewTarget","constructor","Reflect","construct","arguments","apply","_possibleConstructorReturn2","sham","Proxy","Boolean","prototype","valueOf","call","e","Image","_React$Component","_inherits2","_super","_this","_classCallCheck2","_len","length","args","Array","_key","concat","state","placeholderOpacity","Animated","Value","onLoad","minimumWait","staggerNonce","Math","random","setTimeout","timing","toValue","duration","useNativeDriver","Platform","OS","start","floor","_createClass2","key","value","render","_this$props","props","placeholderStyle","PlaceholderContent","containerStyle","style","ImageComponent","children","attributes","_objectWithoutProperties2","hasImage","source","createElement","View","accessibilityIgnoresInvertColors","StyleSheet","flatten","styles","container","_extends2","testID","absoluteFill","width","height","pointerEvents","accessibilityElementsHidden","importantForAccessibility","placeholderContainer","opacity","placeholder","React","Component","exports","backgroundColor","position","absoluteFillObject","alignItems","justifyContent","propTypes","ImageNative","PropTypes","elementType","nodeType","ViewPropTypes","defaultProps","_default","withTheme"],"sources":["Image.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Animated,\n  Image as ImageNative,\n  StyleSheet,\n  View,\n  Platform,\n} from 'react-native';\n\nimport { nodeType } from '../helpers';\nimport { ViewPropTypes, withTheme } from '../config';\n\nclass Image extends React.Component {\n  state = {\n    placeholderOpacity: new Animated.Value(1),\n  };\n\n  onLoad = () => {\n    const minimumWait = 100;\n    const staggerNonce = 200 * Math.random();\n\n    setTimeout(\n      () => {\n        Animated.timing(this.state.placeholderOpacity, {\n          toValue: 0,\n          duration: 350,\n          useNativeDriver: Platform.OS === 'android' ? false : true,\n        }).start();\n      },\n      Platform.OS === 'android' ? 0 : Math.floor(minimumWait + staggerNonce)\n    );\n  };\n\n  render() {\n    const {\n      placeholderStyle,\n      PlaceholderContent,\n      containerStyle,\n      style,\n      ImageComponent,\n      children,\n      ...attributes\n    } = this.props;\n    const hasImage = Boolean(attributes.source);\n\n    return (\n      <View\n        accessibilityIgnoresInvertColors={true}\n        style={StyleSheet.flatten([styles.container, containerStyle])}\n      >\n        <ImageComponent\n          testID=\"RNE__Image\"\n          {...attributes}\n          onLoad={this.onLoad}\n          style={[\n            StyleSheet.absoluteFill,\n            {\n              width: style.width,\n              height: style.height,\n            },\n          ]}\n        />\n\n        <Animated.View\n          pointerEvents={hasImage ? 'none' : 'auto'}\n          accessibilityElementsHidden={hasImage}\n          importantForAccessibility={hasImage ? 'no-hide-descendants' : 'yes'}\n          style={[\n            styles.placeholderContainer,\n            {\n              opacity: hasImage ? this.state.placeholderOpacity : 1,\n            },\n          ]}\n        >\n          <View\n            testID=\"RNE__Image__placeholder\"\n            style={StyleSheet.flatten([\n              style,\n              styles.placeholder,\n              placeholderStyle,\n            ])}\n          >\n            {PlaceholderContent}\n          </View>\n        </Animated.View>\n\n        <View style={style}>{children}</View>\n      </View>\n    );\n  }\n}\n\nconst styles = {\n  container: {\n    backgroundColor: 'transparent',\n    position: 'relative',\n  },\n  placeholderContainer: {\n    ...StyleSheet.absoluteFillObject,\n  },\n  placeholder: {\n    backgroundColor: '#bdbdbd',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n};\n\nImage.propTypes = {\n  ...ImageNative.propTypes,\n  ImageComponent: PropTypes.elementType,\n  PlaceholderContent: nodeType,\n  containerStyle: ViewPropTypes.style,\n  placeholderStyle: ImageNative.propTypes.style,\n};\n\nImage.defaultProps = {\n  ImageComponent: ImageNative,\n  style: {},\n};\n\nexport { Image };\nexport default withTheme(Image, 'Image');\n"],"mappings":"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"}