4fc24aff2802e7a57705b95b26ecf677
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Channel = exports._ = void 0;
exports._ = '';
class Channel {
  constructor(topic) {
    this.topic = topic;
    this.subscribers = [];
  }
  pub(from, message) {
    this.subscribers.forEach(subscriber => {
      try {
        subscriber.receive(from, message);
      } catch (_a) {}
    });
  }
  sub(subscriber) {
    this.subscribers.push(subscriber);
  }
  unsub(subscriber) {
    for (let i = 0; i < this.subscribers.length; i++) {
      if (this.subscribers[i] === subscriber) {
        this.subscribers.splice(i, 1);
      }
    }
  }
}
exports.Channel = Channel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiXyIsIkNoYW5uZWwiLCJjb25zdHJ1Y3RvciIsInRvcGljIiwic3Vic2NyaWJlcnMiLCJwdWIiLCJmcm9tIiwibWVzc2FnZSIsImZvckVhY2giLCJzdWJzY3JpYmVyIiwicmVjZWl2ZSIsIl9hIiwic3ViIiwicHVzaCIsInVuc3ViIiwiaSIsImxlbmd0aCIsInNwbGljZSJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNtMTQvRG9jdW1lbnRzL05YWldBVy9ueHp3YXYtMjk0NzkzLXJlYWN0LW5hdGl2ZS9zcmMvcGFja2FnZXMvZnJhbWV3b3JrL3NyYy9DaGFubmVsLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQmxvY2sgfSBmcm9tICcuL0lCbG9jayc7XG5pbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnLi9NZXNzYWdlJztcblxuZXhwb3J0IGNvbnN0IF8gPSAnJztcblxuZXhwb3J0IGNsYXNzIENoYW5uZWwge1xuICBzdWJzY3JpYmVyczogSUJsb2NrW107XG5cbiAgdG9waWM6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcih0b3BpYzogc3RyaW5nKSB7XG4gICAgdGhpcy50b3BpYyA9IHRvcGljO1xuICAgIHRoaXMuc3Vic2NyaWJlcnMgPSBbXTtcbiAgfVxuXG4gIHB1Yihmcm9tOiBzdHJpbmcsIG1lc3NhZ2U6IE1lc3NhZ2UpIHtcbiAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goc3Vic2NyaWJlciA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzdWJzY3JpYmVyLnJlY2VpdmUoZnJvbSwgbWVzc2FnZSk7XG4gICAgICB9IGNhdGNoIHt9XG4gICAgfSk7XG4gIH1cblxuICBzdWIoc3Vic2NyaWJlcjogSUJsb2NrKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5wdXNoKHN1YnNjcmliZXIpO1xuICB9XG5cbiAgdW5zdWIoc3Vic2NyaWJlcjogSUJsb2NrKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN1YnNjcmliZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5zdWJzY3JpYmVyc1tpXSA9PT0gc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBR2FBLE9BQUEsQ0FBQUMsQ0FBQyxHQUFHLEVBQUU7QUFFbkIsTUFBYUMsT0FBTztFQUtsQkMsWUFBWUMsS0FBYTtJQUN2QixJQUFJLENBQUNBLEtBQUssR0FBR0EsS0FBSztJQUNsQixJQUFJLENBQUNDLFdBQVcsR0FBRyxFQUFFO0VBQ3ZCO0VBRUFDLEdBQUdBLENBQUNDLElBQVksRUFBRUMsT0FBZ0I7SUFDaEMsSUFBSSxDQUFDSCxXQUFXLENBQUNJLE9BQU8sQ0FBQ0MsVUFBVSxJQUFHO01BQ3BDLElBQUk7UUFDRkEsVUFBVSxDQUFDQyxPQUFPLENBQUNKLElBQUksRUFBRUMsT0FBTyxDQUFDO09BQ2xDLENBQUMsT0FBQUksRUFBQSxFQUFNO0lBQ1YsQ0FBQyxDQUFDO0VBQ0o7RUFFQUMsR0FBR0EsQ0FBQ0gsVUFBa0I7SUFDcEIsSUFBSSxDQUFDTCxXQUFXLENBQUNTLElBQUksQ0FBQ0osVUFBVSxDQUFDO0VBQ25DO0VBRUFLLEtBQUtBLENBQUNMLFVBQWtCO0lBQ3RCLEtBQUssSUFBSU0sQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ1gsV0FBVyxDQUFDWSxNQUFNLEVBQUVELENBQUMsRUFBRSxFQUFFO01BQ2hELElBQUksSUFBSSxDQUFDWCxXQUFXLENBQUNXLENBQUMsQ0FBQyxLQUFLTixVQUFVLEVBQUU7UUFDdEMsSUFBSSxDQUFDTCxXQUFXLENBQUNhLE1BQU0sQ0FBQ0YsQ0FBQyxFQUFFLENBQUMsQ0FBQzs7O0VBR25DOztBQTVCRmhCLE9BQUEsQ0FBQUUsT0FBQSxHQUFBQSxPQUFBIn0=