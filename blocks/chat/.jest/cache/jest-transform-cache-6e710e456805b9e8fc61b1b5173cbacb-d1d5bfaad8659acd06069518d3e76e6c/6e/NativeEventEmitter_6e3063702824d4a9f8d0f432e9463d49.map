{"version":3,"names":["_interopRequireDefault","require","_classCallCheck2","_createClass2","_get2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","default","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","EventEmitter","Platform","RCTDeviceEventEmitter","invariant","NativeEventEmitter","_EventEmitter","_super","nativeModule","_this","sharedSubscriber","OS","_nativeModule","key","value","addListener","eventType","listener","context","removeAllListeners","count","listeners","length","removeListeners","removeSubscription","subscription","module","exports"],"sources":["NativeEventEmitter.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nconst EventEmitter = require('../vendor/emitter/EventEmitter');\nconst Platform = require('../Utilities/Platform');\nconst RCTDeviceEventEmitter = require('./RCTDeviceEventEmitter');\n\nconst invariant = require('invariant');\n\nimport type EmitterSubscription from '../vendor/emitter/EmitterSubscription';\n\ntype NativeModule = {\n  +addListener: (eventType: string) => void,\n  +removeListeners: (count: number) => void,\n};\n\n/**\n * Abstract base class for implementing event-emitting modules. This implements\n * a subset of the standard EventEmitter node module API.\n */\nclass NativeEventEmitter extends EventEmitter {\n  _nativeModule: ?NativeModule;\n\n  constructor(nativeModule: ?NativeModule) {\n    super(RCTDeviceEventEmitter.sharedSubscriber);\n    if (Platform.OS === 'ios') {\n      invariant(nativeModule, 'Native module cannot be null.');\n      this._nativeModule = nativeModule;\n    }\n  }\n\n  addListener(\n    eventType: string,\n    listener: Function,\n    context: ?Object,\n  ): EmitterSubscription {\n    if (this._nativeModule != null) {\n      this._nativeModule.addListener(eventType);\n    }\n    return super.addListener(eventType, listener, context);\n  }\n\n  removeAllListeners(eventType: string) {\n    invariant(eventType, 'eventType argument is required.');\n    const count = this.listeners(eventType).length;\n    if (this._nativeModule != null) {\n      this._nativeModule.removeListeners(count);\n    }\n    super.removeAllListeners(eventType);\n  }\n\n  removeSubscription(subscription: EmitterSubscription) {\n    if (this._nativeModule != null) {\n      this._nativeModule.removeListeners(1);\n    }\n    super.removeSubscription(subscription);\n  }\n}\n\nmodule.exports = NativeEventEmitter;\n"],"mappings":"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"}