{"version":3,"names":["invariant","require","customBubblingEventTypes","customDirectEventTypes","exports","viewConfigCallbacks","Map","viewConfigs","processEventTypes","viewConfig","bubblingEventTypes","directEventTypes","__DEV__","topLevelType","register","name","callback","has","set","get","test"],"sources":["ReactNativeViewConfigRegistry.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow strict-local\n */\n\n/* eslint-disable react-internal/warning-and-invariant-args */\n\n'use strict';\n\nimport type {\n  ReactNativeBaseComponentViewConfig,\n  ViewConfigGetter,\n} from './ReactNativeTypes';\n\nconst invariant = require('invariant');\n\n// Event configs\nconst customBubblingEventTypes: $TEMPORARY$object<{||}> = {};\nconst customDirectEventTypes: $TEMPORARY$object<{||}> = {};\n\nexports.customBubblingEventTypes = customBubblingEventTypes;\nexports.customDirectEventTypes = customDirectEventTypes;\n\nconst viewConfigCallbacks = new Map();\nconst viewConfigs = new Map();\n\nfunction processEventTypes(\n  viewConfig: ReactNativeBaseComponentViewConfig<>,\n): void {\n  const {bubblingEventTypes, directEventTypes} = viewConfig;\n\n  if (__DEV__) {\n    if (bubblingEventTypes != null && directEventTypes != null) {\n      for (const topLevelType in directEventTypes) {\n        invariant(\n          bubblingEventTypes[topLevelType] == null,\n          'Event cannot be both direct and bubbling: %s',\n          topLevelType,\n        );\n      }\n    }\n  }\n\n  if (bubblingEventTypes != null) {\n    for (const topLevelType in bubblingEventTypes) {\n      if (customBubblingEventTypes[topLevelType] == null) {\n        customBubblingEventTypes[topLevelType] =\n          bubblingEventTypes[topLevelType];\n      }\n    }\n  }\n\n  if (directEventTypes != null) {\n    for (const topLevelType in directEventTypes) {\n      if (customDirectEventTypes[topLevelType] == null) {\n        customDirectEventTypes[topLevelType] = directEventTypes[topLevelType];\n      }\n    }\n  }\n}\n\n/**\n * Registers a native view/component by name.\n * A callback is provided to load the view config from UIManager.\n * The callback is deferred until the view is actually rendered.\n */\nexports.register = function(name: string, callback: ViewConfigGetter): string {\n  invariant(\n    !viewConfigCallbacks.has(name),\n    'Tried to register two views with the same name %s',\n    name,\n  );\n  viewConfigCallbacks.set(name, callback);\n  return name;\n};\n\n/**\n * Retrieves a config for the specified view.\n * If this is the first time the view has been used,\n * This configuration will be lazy-loaded from UIManager.\n */\nexports.get = function(name: string): ReactNativeBaseComponentViewConfig<> {\n  let viewConfig;\n  if (!viewConfigs.has(name)) {\n    const callback = viewConfigCallbacks.get(name);\n    if (typeof callback !== 'function') {\n      invariant(\n        false,\n        'View config not found for name %s.%s',\n        name,\n        typeof name[0] === 'string' && /[a-z]/.test(name[0])\n          ? ' Make sure to start component names with a capital letter.'\n          : '',\n      );\n    }\n    viewConfigCallbacks.set(name, null);\n    viewConfig = callback();\n    processEventTypes(viewConfig);\n    viewConfigs.set(name, viewConfig);\n  } else {\n    viewConfig = viewConfigs.get(name);\n  }\n  invariant(viewConfig, 'View config not found for name %s', name);\n  return viewConfig;\n};\n"],"mappings":"AAYA,YAAY;;AAOZ,IAAMA,SAAS,GAAGC,OAAO,CAAC,WAAW,CAAC;AAGtC,IAAMC,wBAAiD,GAAG,CAAC,CAAC;AAC5D,IAAMC,sBAA+C,GAAG,CAAC,CAAC;AAE1DC,OAAO,CAACF,wBAAwB,GAAGA,wBAAwB;AAC3DE,OAAO,CAACD,sBAAsB,GAAGA,sBAAsB;AAEvD,IAAME,mBAAmB,GAAG,IAAIC,GAAG,CAAC,CAAC;AACrC,IAAMC,WAAW,GAAG,IAAID,GAAG,CAAC,CAAC;AAE7B,SAASE,iBAAiBA,CACxBC,UAAgD,EAC1C;EACN,IAAOC,kBAAkB,GAAsBD,UAAU,CAAlDC,kBAAkB;IAAEC,gBAAgB,GAAIF,UAAU,CAA9BE,gBAAgB;EAE3C,IAAIC,OAAO,EAAE;IACX,IAAIF,kBAAkB,IAAI,IAAI,IAAIC,gBAAgB,IAAI,IAAI,EAAE;MAC1D,KAAK,IAAME,YAAY,IAAIF,gBAAgB,EAAE;QAC3CX,SAAS,CACPU,kBAAkB,CAACG,YAAY,CAAC,IAAI,IAAI,EACxC,8CAA8C,EAC9CA,YACF,CAAC;MACH;IACF;EACF;EAEA,IAAIH,kBAAkB,IAAI,IAAI,EAAE;IAC9B,KAAK,IAAMG,aAAY,IAAIH,kBAAkB,EAAE;MAC7C,IAAIR,wBAAwB,CAACW,aAAY,CAAC,IAAI,IAAI,EAAE;QAClDX,wBAAwB,CAACW,aAAY,CAAC,GACpCH,kBAAkB,CAACG,aAAY,CAAC;MACpC;IACF;EACF;EAEA,IAAIF,gBAAgB,IAAI,IAAI,EAAE;IAC5B,KAAK,IAAME,cAAY,IAAIF,gBAAgB,EAAE;MAC3C,IAAIR,sBAAsB,CAACU,cAAY,CAAC,IAAI,IAAI,EAAE;QAChDV,sBAAsB,CAACU,cAAY,CAAC,GAAGF,gBAAgB,CAACE,cAAY,CAAC;MACvE;IACF;EACF;AACF;AAOAT,OAAO,CAACU,QAAQ,GAAG,UAASC,IAAY,EAAEC,QAA0B,EAAU;EAC5EhB,SAAS,CACP,CAACK,mBAAmB,CAACY,GAAG,CAACF,IAAI,CAAC,EAC9B,mDAAmD,EACnDA,IACF,CAAC;EACDV,mBAAmB,CAACa,GAAG,CAACH,IAAI,EAAEC,QAAQ,CAAC;EACvC,OAAOD,IAAI;AACb,CAAC;AAODX,OAAO,CAACe,GAAG,GAAG,UAASJ,IAAY,EAAwC;EACzE,IAAIN,UAAU;EACd,IAAI,CAACF,WAAW,CAACU,GAAG,CAACF,IAAI,CAAC,EAAE;IAC1B,IAAMC,QAAQ,GAAGX,mBAAmB,CAACc,GAAG,CAACJ,IAAI,CAAC;IAC9C,IAAI,OAAOC,QAAQ,KAAK,UAAU,EAAE;MAClChB,SAAS,CACP,KAAK,EACL,sCAAsC,EACtCe,IAAI,EACJ,OAAOA,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,OAAO,CAACK,IAAI,CAACL,IAAI,CAAC,CAAC,CAAC,CAAC,GAChD,4DAA4D,GAC5D,EACN,CAAC;IACH;IACAV,mBAAmB,CAACa,GAAG,CAACH,IAAI,EAAE,IAAI,CAAC;IACnCN,UAAU,GAAGO,QAAQ,CAAC,CAAC;IACvBR,iBAAiB,CAACC,UAAU,CAAC;IAC7BF,WAAW,CAACW,GAAG,CAACH,IAAI,EAAEN,UAAU,CAAC;EACnC,CAAC,MAAM;IACLA,UAAU,GAAGF,WAAW,CAACY,GAAG,CAACJ,IAAI,CAAC;EACpC;EACAf,SAAS,CAACS,UAAU,EAAE,mCAAmC,EAAEM,IAAI,CAAC;EAChE,OAAON,UAAU;AACnB,CAAC"}