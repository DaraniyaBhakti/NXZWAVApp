eecf311fdb375fc1050c0d5e3ee19d80
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _require = require('./AnimatedEvent'),
  AnimatedEvent = _require.AnimatedEvent,
  attachNativeEvent = _require.attachNativeEvent;
var AnimatedAddition = require('./nodes/AnimatedAddition');
var AnimatedDiffClamp = require('./nodes/AnimatedDiffClamp');
var AnimatedDivision = require('./nodes/AnimatedDivision');
var AnimatedInterpolation = require('./nodes/AnimatedInterpolation');
var AnimatedModulo = require('./nodes/AnimatedModulo');
var AnimatedMultiplication = require('./nodes/AnimatedMultiplication');
var AnimatedNode = require('./nodes/AnimatedNode');
var AnimatedProps = require('./nodes/AnimatedProps');
var AnimatedSubtraction = require('./nodes/AnimatedSubtraction');
var AnimatedTracking = require('./nodes/AnimatedTracking');
var AnimatedValue = require('./nodes/AnimatedValue');
var AnimatedValueXY = require('./nodes/AnimatedValueXY');
var DecayAnimation = require('./animations/DecayAnimation');
var SpringAnimation = require('./animations/SpringAnimation');
var TimingAnimation = require('./animations/TimingAnimation');
var createAnimatedComponent = require('./createAnimatedComponent');
var add = function add(a, b) {
  return new AnimatedAddition(a, b);
};
var subtract = function subtract(a, b) {
  return new AnimatedSubtraction(a, b);
};
var divide = function divide(a, b) {
  return new AnimatedDivision(a, b);
};
var multiply = function multiply(a, b) {
  return new AnimatedMultiplication(a, b);
};
var modulo = function modulo(a, modulus) {
  return new AnimatedModulo(a, modulus);
};
var diffClamp = function diffClamp(a, min, max) {
  return new AnimatedDiffClamp(a, min, max);
};
var _combineCallbacks = function _combineCallbacks(callback, config) {
  if (callback && config.onComplete) {
    return function () {
      config.onComplete && config.onComplete.apply(config, arguments);
      callback && callback.apply(void 0, arguments);
    };
  } else {
    return callback || config.onComplete;
  }
};
var maybeVectorAnim = function maybeVectorAnim(value, config, anim) {
  if (value instanceof AnimatedValueXY) {
    var configX = (0, _extends2.default)({}, config);
    var configY = (0, _extends2.default)({}, config);
    for (var key in config) {
      var _config$key = config[key],
        x = _config$key.x,
        y = _config$key.y;
      if (x !== undefined && y !== undefined) {
        configX[key] = x;
        configY[key] = y;
      }
    }
    var aX = anim(value.x, configX);
    var aY = anim(value.y, configY);
    return parallel([aX, aY], {
      stopTogether: false
    });
  }
  return null;
};
var spring = function spring(value, config) {
  var _start = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    if (configuration.toValue instanceof AnimatedNode) {
      singleValue.track(new AnimatedTracking(singleValue, configuration.toValue, SpringAnimation, singleConfig, callback));
    } else {
      singleValue.animate(new SpringAnimation(singleConfig), callback);
    }
  };
  return maybeVectorAnim(value, config, spring) || {
    start: function start(callback) {
      _start(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = (0, _extends2.default)({}, config, {
        iterations: iterations
      });
      _start(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};
var timing = function timing(value, config) {
  var _start2 = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    if (configuration.toValue instanceof AnimatedNode) {
      singleValue.track(new AnimatedTracking(singleValue, configuration.toValue, TimingAnimation, singleConfig, callback));
    } else {
      singleValue.animate(new TimingAnimation(singleConfig), callback);
    }
  };
  return maybeVectorAnim(value, config, timing) || {
    start: function start(callback) {
      _start2(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = (0, _extends2.default)({}, config, {
        iterations: iterations
      });
      _start2(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};
var decay = function decay(value, config) {
  var _start3 = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    singleValue.animate(new DecayAnimation(singleConfig), callback);
  };
  return maybeVectorAnim(value, config, decay) || {
    start: function start(callback) {
      _start3(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = (0, _extends2.default)({}, config, {
        iterations: iterations
      });
      _start3(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};
var sequence = function sequence(animations) {
  var current = 0;
  return {
    start: function start(callback) {
      var onComplete = function onComplete(result) {
        if (!result.finished) {
          callback && callback(result);
          return;
        }
        current++;
        if (current === animations.length) {
          callback && callback(result);
          return;
        }
        animations[current].start(onComplete);
      };
      if (animations.length === 0) {
        callback && callback({
          finished: true
        });
      } else {
        animations[current].start(onComplete);
      }
    },
    stop: function stop() {
      if (current < animations.length) {
        animations[current].stop();
      }
    },
    reset: function reset() {
      animations.forEach(function (animation, idx) {
        if (idx <= current) {
          animation.reset();
        }
      });
      current = 0;
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.sequence animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return false;
    }
  };
};
var parallel = function parallel(animations, config) {
  var doneCount = 0;
  var hasEnded = {};
  var stopTogether = !(config && config.stopTogether === false);
  var result = {
    start: function start(callback) {
      if (doneCount === animations.length) {
        callback && callback({
          finished: true
        });
        return;
      }
      animations.forEach(function (animation, idx) {
        var cb = function cb(endResult) {
          hasEnded[idx] = true;
          doneCount++;
          if (doneCount === animations.length) {
            doneCount = 0;
            callback && callback(endResult);
            return;
          }
          if (!endResult.finished && stopTogether) {
            result.stop();
          }
        };
        if (!animation) {
          cb({
            finished: true
          });
        } else {
          animation.start(cb);
        }
      });
    },
    stop: function stop() {
      animations.forEach(function (animation, idx) {
        !hasEnded[idx] && animation.stop();
        hasEnded[idx] = true;
      });
    },
    reset: function reset() {
      animations.forEach(function (animation, idx) {
        animation.reset();
        hasEnded[idx] = false;
        doneCount = 0;
      });
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.parallel animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return false;
    }
  };
  return result;
};
var delay = function delay(time) {
  return timing(new AnimatedValue(0), {
    toValue: 0,
    delay: time,
    duration: 0,
    useNativeDriver: false
  });
};
var stagger = function stagger(time, animations) {
  return parallel(animations.map(function (animation, i) {
    return sequence([delay(time * i), animation]);
  }));
};
var loop = function loop(animation) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$iterations = _ref.iterations,
    iterations = _ref$iterations === void 0 ? -1 : _ref$iterations,
    _ref$resetBeforeItera = _ref.resetBeforeIteration,
    resetBeforeIteration = _ref$resetBeforeItera === void 0 ? true : _ref$resetBeforeItera;
  var isFinished = false;
  var iterationsSoFar = 0;
  return {
    start: function start(callback) {
      var restart = function restart() {
        var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
          finished: true
        };
        if (isFinished || iterationsSoFar === iterations || result.finished === false) {
          callback && callback(result);
        } else {
          iterationsSoFar++;
          resetBeforeIteration && animation.reset();
          animation.start(restart);
        }
      };
      if (!animation || iterations === 0) {
        callback && callback({
          finished: true
        });
      } else {
        if (animation._isUsingNativeDriver()) {
          animation._startNativeLoop(iterations);
        } else {
          restart();
        }
      }
    },
    stop: function stop() {
      isFinished = true;
      animation.stop();
    },
    reset: function reset() {
      iterationsSoFar = 0;
      isFinished = false;
      animation.reset();
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.loop animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return animation._isUsingNativeDriver();
    }
  };
};
function forkEvent(event, listener) {
  if (!event) {
    return listener;
  } else if (event instanceof AnimatedEvent) {
    event.__addListener(listener);
    return event;
  } else {
    return function () {
      typeof event === 'function' && event.apply(void 0, arguments);
      listener.apply(void 0, arguments);
    };
  }
}
function unforkEvent(event, listener) {
  if (event && event instanceof AnimatedEvent) {
    event.__removeListener(listener);
  }
}
var event = function event(argMapping, config) {
  var animatedEvent = new AnimatedEvent(argMapping, config);
  if (animatedEvent.__isNative) {
    return animatedEvent;
  } else {
    return animatedEvent.__getHandler();
  }
};
module.exports = {
  Value: AnimatedValue,
  ValueXY: AnimatedValueXY,
  Interpolation: AnimatedInterpolation,
  Node: AnimatedNode,
  decay: decay,
  timing: timing,
  spring: spring,
  add: add,
  subtract: subtract,
  divide: divide,
  multiply: multiply,
  modulo: modulo,
  diffClamp: diffClamp,
  delay: delay,
  sequence: sequence,
  parallel: parallel,
  stagger: stagger,
  loop: loop,
  event: event,
  createAnimatedComponent: createAnimatedComponent,
  attachNativeEvent: attachNativeEvent,
  forkEvent: forkEvent,
  unforkEvent: unforkEvent,
  Event: AnimatedEvent,
  __PropsOnlyForTests: AnimatedProps
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9leHRlbmRzMiIsIl9yZXF1aXJlIiwiQW5pbWF0ZWRFdmVudCIsImF0dGFjaE5hdGl2ZUV2ZW50IiwiQW5pbWF0ZWRBZGRpdGlvbiIsIkFuaW1hdGVkRGlmZkNsYW1wIiwiQW5pbWF0ZWREaXZpc2lvbiIsIkFuaW1hdGVkSW50ZXJwb2xhdGlvbiIsIkFuaW1hdGVkTW9kdWxvIiwiQW5pbWF0ZWRNdWx0aXBsaWNhdGlvbiIsIkFuaW1hdGVkTm9kZSIsIkFuaW1hdGVkUHJvcHMiLCJBbmltYXRlZFN1YnRyYWN0aW9uIiwiQW5pbWF0ZWRUcmFja2luZyIsIkFuaW1hdGVkVmFsdWUiLCJBbmltYXRlZFZhbHVlWFkiLCJEZWNheUFuaW1hdGlvbiIsIlNwcmluZ0FuaW1hdGlvbiIsIlRpbWluZ0FuaW1hdGlvbiIsImNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50IiwiYWRkIiwiYSIsImIiLCJzdWJ0cmFjdCIsImRpdmlkZSIsIm11bHRpcGx5IiwibW9kdWxvIiwibW9kdWx1cyIsImRpZmZDbGFtcCIsIm1pbiIsIm1heCIsIl9jb21iaW5lQ2FsbGJhY2tzIiwiY2FsbGJhY2siLCJjb25maWciLCJvbkNvbXBsZXRlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJtYXliZVZlY3RvckFuaW0iLCJ2YWx1ZSIsImFuaW0iLCJjb25maWdYIiwiZGVmYXVsdCIsImNvbmZpZ1kiLCJrZXkiLCJfY29uZmlnJGtleSIsIngiLCJ5IiwidW5kZWZpbmVkIiwiYVgiLCJhWSIsInBhcmFsbGVsIiwic3RvcFRvZ2V0aGVyIiwic3ByaW5nIiwic3RhcnQiLCJhbmltYXRlZFZhbHVlIiwiY29uZmlndXJhdGlvbiIsInNpbmdsZVZhbHVlIiwic2luZ2xlQ29uZmlnIiwic3RvcFRyYWNraW5nIiwidG9WYWx1ZSIsInRyYWNrIiwiYW5pbWF0ZSIsInN0b3AiLCJzdG9wQW5pbWF0aW9uIiwicmVzZXQiLCJyZXNldEFuaW1hdGlvbiIsIl9zdGFydE5hdGl2ZUxvb3AiLCJpdGVyYXRpb25zIiwiX2lzVXNpbmdOYXRpdmVEcml2ZXIiLCJ1c2VOYXRpdmVEcml2ZXIiLCJ0aW1pbmciLCJkZWNheSIsInNlcXVlbmNlIiwiYW5pbWF0aW9ucyIsImN1cnJlbnQiLCJyZXN1bHQiLCJmaW5pc2hlZCIsImxlbmd0aCIsImZvckVhY2giLCJhbmltYXRpb24iLCJpZHgiLCJFcnJvciIsImRvbmVDb3VudCIsImhhc0VuZGVkIiwiY2IiLCJlbmRSZXN1bHQiLCJkZWxheSIsInRpbWUiLCJkdXJhdGlvbiIsInN0YWdnZXIiLCJtYXAiLCJpIiwibG9vcCIsIl9yZWYiLCJfcmVmJGl0ZXJhdGlvbnMiLCJfcmVmJHJlc2V0QmVmb3JlSXRlcmEiLCJyZXNldEJlZm9yZUl0ZXJhdGlvbiIsImlzRmluaXNoZWQiLCJpdGVyYXRpb25zU29GYXIiLCJyZXN0YXJ0IiwiZm9ya0V2ZW50IiwiZXZlbnQiLCJsaXN0ZW5lciIsIl9fYWRkTGlzdGVuZXIiLCJ1bmZvcmtFdmVudCIsIl9fcmVtb3ZlTGlzdGVuZXIiLCJhcmdNYXBwaW5nIiwiYW5pbWF0ZWRFdmVudCIsIl9faXNOYXRpdmUiLCJfX2dldEhhbmRsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiVmFsdWUiLCJWYWx1ZVhZIiwiSW50ZXJwb2xhdGlvbiIsIk5vZGUiLCJFdmVudCIsIl9fUHJvcHNPbmx5Rm9yVGVzdHMiXSwic291cmNlcyI6WyJBbmltYXRlZEltcGxlbWVudGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqIEBwcmV2ZW50TXVuZ2VcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7QW5pbWF0ZWRFdmVudCwgYXR0YWNoTmF0aXZlRXZlbnR9ID0gcmVxdWlyZSgnLi9BbmltYXRlZEV2ZW50Jyk7XG5jb25zdCBBbmltYXRlZEFkZGl0aW9uID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZEFkZGl0aW9uJyk7XG5jb25zdCBBbmltYXRlZERpZmZDbGFtcCA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWREaWZmQ2xhbXAnKTtcbmNvbnN0IEFuaW1hdGVkRGl2aXNpb24gPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkRGl2aXNpb24nKTtcbmNvbnN0IEFuaW1hdGVkSW50ZXJwb2xhdGlvbiA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRJbnRlcnBvbGF0aW9uJyk7XG5jb25zdCBBbmltYXRlZE1vZHVsbyA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRNb2R1bG8nKTtcbmNvbnN0IEFuaW1hdGVkTXVsdGlwbGljYXRpb24gPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkTXVsdGlwbGljYXRpb24nKTtcbmNvbnN0IEFuaW1hdGVkTm9kZSA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWROb2RlJyk7XG5jb25zdCBBbmltYXRlZFByb3BzID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZFByb3BzJyk7XG5jb25zdCBBbmltYXRlZFN1YnRyYWN0aW9uID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZFN1YnRyYWN0aW9uJyk7XG5jb25zdCBBbmltYXRlZFRyYWNraW5nID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZFRyYWNraW5nJyk7XG5jb25zdCBBbmltYXRlZFZhbHVlID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZFZhbHVlJyk7XG5jb25zdCBBbmltYXRlZFZhbHVlWFkgPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkVmFsdWVYWScpO1xuY29uc3QgRGVjYXlBbmltYXRpb24gPSByZXF1aXJlKCcuL2FuaW1hdGlvbnMvRGVjYXlBbmltYXRpb24nKTtcbmNvbnN0IFNwcmluZ0FuaW1hdGlvbiA9IHJlcXVpcmUoJy4vYW5pbWF0aW9ucy9TcHJpbmdBbmltYXRpb24nKTtcbmNvbnN0IFRpbWluZ0FuaW1hdGlvbiA9IHJlcXVpcmUoJy4vYW5pbWF0aW9ucy9UaW1pbmdBbmltYXRpb24nKTtcblxuY29uc3QgY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQgPSByZXF1aXJlKCcuL2NyZWF0ZUFuaW1hdGVkQ29tcG9uZW50Jyk7XG5cbmltcG9ydCB0eXBlIHtcbiAgQW5pbWF0aW9uQ29uZmlnLFxuICBFbmRDYWxsYmFjayxcbiAgRW5kUmVzdWx0LFxufSBmcm9tICcuL2FuaW1hdGlvbnMvQW5pbWF0aW9uJztcbmltcG9ydCB0eXBlIHtUaW1pbmdBbmltYXRpb25Db25maWd9IGZyb20gJy4vYW5pbWF0aW9ucy9UaW1pbmdBbmltYXRpb24nO1xuaW1wb3J0IHR5cGUge0RlY2F5QW5pbWF0aW9uQ29uZmlnfSBmcm9tICcuL2FuaW1hdGlvbnMvRGVjYXlBbmltYXRpb24nO1xuaW1wb3J0IHR5cGUge1NwcmluZ0FuaW1hdGlvbkNvbmZpZ30gZnJvbSAnLi9hbmltYXRpb25zL1NwcmluZ0FuaW1hdGlvbic7XG5pbXBvcnQgdHlwZSB7TWFwcGluZywgRXZlbnRDb25maWd9IGZyb20gJy4vQW5pbWF0ZWRFdmVudCc7XG5cbmV4cG9ydCB0eXBlIENvbXBvc2l0ZUFuaW1hdGlvbiA9IHtcbiAgc3RhcnQ6IChjYWxsYmFjaz86ID9FbmRDYWxsYmFjaykgPT4gdm9pZCxcbiAgc3RvcDogKCkgPT4gdm9pZCxcbiAgcmVzZXQ6ICgpID0+IHZvaWQsXG4gIF9zdGFydE5hdGl2ZUxvb3A6IChpdGVyYXRpb25zPzogbnVtYmVyKSA9PiB2b2lkLFxuICBfaXNVc2luZ05hdGl2ZURyaXZlcjogKCkgPT4gYm9vbGVhbixcbn07XG5cbmNvbnN0IGFkZCA9IGZ1bmN0aW9uKFxuICBhOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4gIGI6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbik6IEFuaW1hdGVkQWRkaXRpb24ge1xuICByZXR1cm4gbmV3IEFuaW1hdGVkQWRkaXRpb24oYSwgYik7XG59O1xuXG5jb25zdCBzdWJ0cmFjdCA9IGZ1bmN0aW9uKFxuICBhOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4gIGI6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbik6IEFuaW1hdGVkU3VidHJhY3Rpb24ge1xuICByZXR1cm4gbmV3IEFuaW1hdGVkU3VidHJhY3Rpb24oYSwgYik7XG59O1xuXG5jb25zdCBkaXZpZGUgPSBmdW5jdGlvbihcbiAgYTogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuICBiOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4pOiBBbmltYXRlZERpdmlzaW9uIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZERpdmlzaW9uKGEsIGIpO1xufTtcblxuY29uc3QgbXVsdGlwbHkgPSBmdW5jdGlvbihcbiAgYTogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuICBiOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4pOiBBbmltYXRlZE11bHRpcGxpY2F0aW9uIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZE11bHRpcGxpY2F0aW9uKGEsIGIpO1xufTtcblxuY29uc3QgbW9kdWxvID0gZnVuY3Rpb24oYTogQW5pbWF0ZWROb2RlLCBtb2R1bHVzOiBudW1iZXIpOiBBbmltYXRlZE1vZHVsbyB7XG4gIHJldHVybiBuZXcgQW5pbWF0ZWRNb2R1bG8oYSwgbW9kdWx1cyk7XG59O1xuXG5jb25zdCBkaWZmQ2xhbXAgPSBmdW5jdGlvbihcbiAgYTogQW5pbWF0ZWROb2RlLFxuICBtaW46IG51bWJlcixcbiAgbWF4OiBudW1iZXIsXG4pOiBBbmltYXRlZERpZmZDbGFtcCB7XG4gIHJldHVybiBuZXcgQW5pbWF0ZWREaWZmQ2xhbXAoYSwgbWluLCBtYXgpO1xufTtcblxuY29uc3QgX2NvbWJpbmVDYWxsYmFja3MgPSBmdW5jdGlvbihcbiAgY2FsbGJhY2s6ID9FbmRDYWxsYmFjayxcbiAgY29uZmlnOiBBbmltYXRpb25Db25maWcsXG4pIHtcbiAgaWYgKGNhbGxiYWNrICYmIGNvbmZpZy5vbkNvbXBsZXRlKSB7XG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25maWcub25Db21wbGV0ZSAmJiBjb25maWcub25Db21wbGV0ZSguLi5hcmdzKTtcbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrIHx8IGNvbmZpZy5vbkNvbXBsZXRlO1xuICB9XG59O1xuXG5jb25zdCBtYXliZVZlY3RvckFuaW0gPSBmdW5jdGlvbihcbiAgdmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gIGNvbmZpZzogT2JqZWN0LFxuICBhbmltOiAodmFsdWU6IEFuaW1hdGVkVmFsdWUsIGNvbmZpZzogT2JqZWN0KSA9PiBDb21wb3NpdGVBbmltYXRpb24sXG4pOiA/Q29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWRWYWx1ZVhZKSB7XG4gICAgY29uc3QgY29uZmlnWCA9IHsuLi5jb25maWd9O1xuICAgIGNvbnN0IGNvbmZpZ1kgPSB7Li4uY29uZmlnfTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjb25maWcpIHtcbiAgICAgIGNvbnN0IHt4LCB5fSA9IGNvbmZpZ1trZXldO1xuICAgICAgaWYgKHggIT09IHVuZGVmaW5lZCAmJiB5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uZmlnWFtrZXldID0geDtcbiAgICAgICAgY29uZmlnWVtrZXldID0geTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYVggPSBhbmltKCh2YWx1ZTogQW5pbWF0ZWRWYWx1ZVhZKS54LCBjb25maWdYKTtcbiAgICBjb25zdCBhWSA9IGFuaW0oKHZhbHVlOiBBbmltYXRlZFZhbHVlWFkpLnksIGNvbmZpZ1kpO1xuICAgIC8vIFdlIHVzZSBgc3RvcFRvZ2V0aGVyOiBmYWxzZWAgaGVyZSBiZWNhdXNlIG90aGVyd2lzZSB0cmFja2luZyB3aWxsIGJyZWFrXG4gICAgLy8gYmVjYXVzZSB0aGUgc2Vjb25kIGFuaW1hdGlvbiB3aWxsIGdldCBzdG9wcGVkIGJlZm9yZSBpdCBjYW4gdXBkYXRlLlxuICAgIHJldHVybiBwYXJhbGxlbChbYVgsIGFZXSwge3N0b3BUb2dldGhlcjogZmFsc2V9KTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmNvbnN0IHNwcmluZyA9IGZ1bmN0aW9uKFxuICB2YWx1ZTogQW5pbWF0ZWRWYWx1ZSB8IEFuaW1hdGVkVmFsdWVYWSxcbiAgY29uZmlnOiBTcHJpbmdBbmltYXRpb25Db25maWcsXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBjb25zdCBzdGFydCA9IGZ1bmN0aW9uKFxuICAgIGFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gICAgY29uZmlndXJhdGlvbjogU3ByaW5nQW5pbWF0aW9uQ29uZmlnLFxuICAgIGNhbGxiYWNrPzogP0VuZENhbGxiYWNrLFxuICApOiB2b2lkIHtcbiAgICBjYWxsYmFjayA9IF9jb21iaW5lQ2FsbGJhY2tzKGNhbGxiYWNrLCBjb25maWd1cmF0aW9uKTtcbiAgICBjb25zdCBzaW5nbGVWYWx1ZTogYW55ID0gYW5pbWF0ZWRWYWx1ZTtcbiAgICBjb25zdCBzaW5nbGVDb25maWc6IGFueSA9IGNvbmZpZ3VyYXRpb247XG4gICAgc2luZ2xlVmFsdWUuc3RvcFRyYWNraW5nKCk7XG4gICAgaWYgKGNvbmZpZ3VyYXRpb24udG9WYWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgc2luZ2xlVmFsdWUudHJhY2soXG4gICAgICAgIG5ldyBBbmltYXRlZFRyYWNraW5nKFxuICAgICAgICAgIHNpbmdsZVZhbHVlLFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb24udG9WYWx1ZSxcbiAgICAgICAgICBTcHJpbmdBbmltYXRpb24sXG4gICAgICAgICAgc2luZ2xlQ29uZmlnLFxuICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2luZ2xlVmFsdWUuYW5pbWF0ZShuZXcgU3ByaW5nQW5pbWF0aW9uKHNpbmdsZUNvbmZpZyksIGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiAoXG4gICAgbWF5YmVWZWN0b3JBbmltKHZhbHVlLCBjb25maWcsIHNwcmluZykgfHwge1xuICAgICAgc3RhcnQ6IGZ1bmN0aW9uKGNhbGxiYWNrPzogP0VuZENhbGxiYWNrKTogdm9pZCB7XG4gICAgICAgIHN0YXJ0KHZhbHVlLCBjb25maWcsIGNhbGxiYWNrKTtcbiAgICAgIH0sXG5cbiAgICAgIHN0b3A6IGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgICAgICB2YWx1ZS5zdG9wQW5pbWF0aW9uKCk7XG4gICAgICB9LFxuXG4gICAgICByZXNldDogZnVuY3Rpb24oKTogdm9pZCB7XG4gICAgICAgIHZhbHVlLnJlc2V0QW5pbWF0aW9uKCk7XG4gICAgICB9LFxuXG4gICAgICBfc3RhcnROYXRpdmVMb29wOiBmdW5jdGlvbihpdGVyYXRpb25zPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNpbmdsZUNvbmZpZyA9IHsuLi5jb25maWcsIGl0ZXJhdGlvbnN9O1xuICAgICAgICBzdGFydCh2YWx1ZSwgc2luZ2xlQ29uZmlnKTtcbiAgICAgIH0sXG5cbiAgICAgIF9pc1VzaW5nTmF0aXZlRHJpdmVyOiBmdW5jdGlvbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy51c2VOYXRpdmVEcml2ZXIgfHwgZmFsc2U7XG4gICAgICB9LFxuICAgIH1cbiAgKTtcbn07XG5cbmNvbnN0IHRpbWluZyA9IGZ1bmN0aW9uKFxuICB2YWx1ZTogQW5pbWF0ZWRWYWx1ZSB8IEFuaW1hdGVkVmFsdWVYWSxcbiAgY29uZmlnOiBUaW1pbmdBbmltYXRpb25Db25maWcsXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBjb25zdCBzdGFydCA9IGZ1bmN0aW9uKFxuICAgIGFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gICAgY29uZmlndXJhdGlvbjogVGltaW5nQW5pbWF0aW9uQ29uZmlnLFxuICAgIGNhbGxiYWNrPzogP0VuZENhbGxiYWNrLFxuICApOiB2b2lkIHtcbiAgICBjYWxsYmFjayA9IF9jb21iaW5lQ2FsbGJhY2tzKGNhbGxiYWNrLCBjb25maWd1cmF0aW9uKTtcbiAgICBjb25zdCBzaW5nbGVWYWx1ZTogYW55ID0gYW5pbWF0ZWRWYWx1ZTtcbiAgICBjb25zdCBzaW5nbGVDb25maWc6IGFueSA9IGNvbmZpZ3VyYXRpb247XG4gICAgc2luZ2xlVmFsdWUuc3RvcFRyYWNraW5nKCk7XG4gICAgaWYgKGNvbmZpZ3VyYXRpb24udG9WYWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgc2luZ2xlVmFsdWUudHJhY2soXG4gICAgICAgIG5ldyBBbmltYXRlZFRyYWNraW5nKFxuICAgICAgICAgIHNpbmdsZVZhbHVlLFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb24udG9WYWx1ZSxcbiAgICAgICAgICBUaW1pbmdBbmltYXRpb24sXG4gICAgICAgICAgc2luZ2xlQ29uZmlnLFxuICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2luZ2xlVmFsdWUuYW5pbWF0ZShuZXcgVGltaW5nQW5pbWF0aW9uKHNpbmdsZUNvbmZpZyksIGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICBtYXliZVZlY3RvckFuaW0odmFsdWUsIGNvbmZpZywgdGltaW5nKSB8fCB7XG4gICAgICBzdGFydDogZnVuY3Rpb24oY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spOiB2b2lkIHtcbiAgICAgICAgc3RhcnQodmFsdWUsIGNvbmZpZywgY2FsbGJhY2spO1xuICAgICAgfSxcblxuICAgICAgc3RvcDogZnVuY3Rpb24oKTogdm9pZCB7XG4gICAgICAgIHZhbHVlLnN0b3BBbmltYXRpb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlc2V0OiBmdW5jdGlvbigpOiB2b2lkIHtcbiAgICAgICAgdmFsdWUucmVzZXRBbmltYXRpb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIF9zdGFydE5hdGl2ZUxvb3A6IGZ1bmN0aW9uKGl0ZXJhdGlvbnM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc2luZ2xlQ29uZmlnID0gey4uLmNvbmZpZywgaXRlcmF0aW9uc307XG4gICAgICAgIHN0YXJ0KHZhbHVlLCBzaW5nbGVDb25maWcpO1xuICAgICAgfSxcblxuICAgICAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY29uZmlnLnVzZU5hdGl2ZURyaXZlciB8fCBmYWxzZTtcbiAgICAgIH0sXG4gICAgfVxuICApO1xufTtcblxuY29uc3QgZGVjYXkgPSBmdW5jdGlvbihcbiAgdmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gIGNvbmZpZzogRGVjYXlBbmltYXRpb25Db25maWcsXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBjb25zdCBzdGFydCA9IGZ1bmN0aW9uKFxuICAgIGFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gICAgY29uZmlndXJhdGlvbjogRGVjYXlBbmltYXRpb25Db25maWcsXG4gICAgY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2ssXG4gICk6IHZvaWQge1xuICAgIGNhbGxiYWNrID0gX2NvbWJpbmVDYWxsYmFja3MoY2FsbGJhY2ssIGNvbmZpZ3VyYXRpb24pO1xuICAgIGNvbnN0IHNpbmdsZVZhbHVlOiBhbnkgPSBhbmltYXRlZFZhbHVlO1xuICAgIGNvbnN0IHNpbmdsZUNvbmZpZzogYW55ID0gY29uZmlndXJhdGlvbjtcbiAgICBzaW5nbGVWYWx1ZS5zdG9wVHJhY2tpbmcoKTtcbiAgICBzaW5nbGVWYWx1ZS5hbmltYXRlKG5ldyBEZWNheUFuaW1hdGlvbihzaW5nbGVDb25maWcpLCBjYWxsYmFjayk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICBtYXliZVZlY3RvckFuaW0odmFsdWUsIGNvbmZpZywgZGVjYXkpIHx8IHtcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbihjYWxsYmFjaz86ID9FbmRDYWxsYmFjayk6IHZvaWQge1xuICAgICAgICBzdGFydCh2YWx1ZSwgY29uZmlnLCBjYWxsYmFjayk7XG4gICAgICB9LFxuXG4gICAgICBzdG9wOiBmdW5jdGlvbigpOiB2b2lkIHtcbiAgICAgICAgdmFsdWUuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgfSxcblxuICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgICAgICB2YWx1ZS5yZXNldEFuaW1hdGlvbigpO1xuICAgICAgfSxcblxuICAgICAgX3N0YXJ0TmF0aXZlTG9vcDogZnVuY3Rpb24oaXRlcmF0aW9ucz86IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBzaW5nbGVDb25maWcgPSB7Li4uY29uZmlnLCBpdGVyYXRpb25zfTtcbiAgICAgICAgc3RhcnQodmFsdWUsIHNpbmdsZUNvbmZpZyk7XG4gICAgICB9LFxuXG4gICAgICBfaXNVc2luZ05hdGl2ZURyaXZlcjogZnVuY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjb25maWcudXNlTmF0aXZlRHJpdmVyIHx8IGZhbHNlO1xuICAgICAgfSxcbiAgICB9XG4gICk7XG59O1xuXG5jb25zdCBzZXF1ZW5jZSA9IGZ1bmN0aW9uKFxuICBhbmltYXRpb25zOiBBcnJheTxDb21wb3NpdGVBbmltYXRpb24+LFxuKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgbGV0IGN1cnJlbnQgPSAwO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBmdW5jdGlvbihjYWxsYmFjaz86ID9FbmRDYWxsYmFjaykge1xuICAgICAgY29uc3Qgb25Db21wbGV0ZSA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICBpZiAoIXJlc3VsdC5maW5pc2hlZCkge1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudCsrO1xuXG4gICAgICAgIGlmIChjdXJyZW50ID09PSBhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYW5pbWF0aW9uc1tjdXJyZW50XS5zdGFydChvbkNvbXBsZXRlKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChhbmltYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7ZmluaXNoZWQ6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuaW1hdGlvbnNbY3VycmVudF0uc3RhcnQob25Db21wbGV0ZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGN1cnJlbnQgPCBhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICBhbmltYXRpb25zW2N1cnJlbnRdLnN0b3AoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb24sIGlkeCkgPT4ge1xuICAgICAgICBpZiAoaWR4IDw9IGN1cnJlbnQpIHtcbiAgICAgICAgICBhbmltYXRpb24ucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjdXJyZW50ID0gMDtcbiAgICB9LFxuXG4gICAgX3N0YXJ0TmF0aXZlTG9vcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdMb29wcyBydW4gdXNpbmcgdGhlIG5hdGl2ZSBkcml2ZXIgY2Fubm90IGNvbnRhaW4gQW5pbWF0ZWQuc2VxdWVuY2UgYW5pbWF0aW9ucycsXG4gICAgICApO1xuICAgIH0sXG5cbiAgICBfaXNVc2luZ05hdGl2ZURyaXZlcjogZnVuY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgfTtcbn07XG5cbnR5cGUgUGFyYWxsZWxDb25maWcgPSB7XG4gIHN0b3BUb2dldGhlcj86IGJvb2xlYW4sIC8vIElmIG9uZSBpcyBzdG9wcGVkLCBzdG9wIGFsbC4gIGRlZmF1bHQ6IHRydWVcbn07XG5jb25zdCBwYXJhbGxlbCA9IGZ1bmN0aW9uKFxuICBhbmltYXRpb25zOiBBcnJheTxDb21wb3NpdGVBbmltYXRpb24+LFxuICBjb25maWc/OiA/UGFyYWxsZWxDb25maWcsXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBsZXQgZG9uZUNvdW50ID0gMDtcbiAgLy8gTWFrZSBzdXJlIHdlIG9ubHkgY2FsbCBzdG9wKCkgYXQgbW9zdCBvbmNlIGZvciBlYWNoIGFuaW1hdGlvblxuICBjb25zdCBoYXNFbmRlZCA9IHt9O1xuICBjb25zdCBzdG9wVG9nZXRoZXIgPSAhKGNvbmZpZyAmJiBjb25maWcuc3RvcFRvZ2V0aGVyID09PSBmYWxzZSk7XG5cbiAgY29uc3QgcmVzdWx0ID0ge1xuICAgIHN0YXJ0OiBmdW5jdGlvbihjYWxsYmFjaz86ID9FbmRDYWxsYmFjaykge1xuICAgICAgaWYgKGRvbmVDb3VudCA9PT0gYW5pbWF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soe2ZpbmlzaGVkOiB0cnVlfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb24sIGlkeCkgPT4ge1xuICAgICAgICBjb25zdCBjYiA9IGZ1bmN0aW9uKGVuZFJlc3VsdCkge1xuICAgICAgICAgIGhhc0VuZGVkW2lkeF0gPSB0cnVlO1xuICAgICAgICAgIGRvbmVDb3VudCsrO1xuICAgICAgICAgIGlmIChkb25lQ291bnQgPT09IGFuaW1hdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBkb25lQ291bnQgPSAwO1xuICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soZW5kUmVzdWx0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWVuZFJlc3VsdC5maW5pc2hlZCAmJiBzdG9wVG9nZXRoZXIpIHtcbiAgICAgICAgICAgIHJlc3VsdC5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICghYW5pbWF0aW9uKSB7XG4gICAgICAgICAgY2Ioe2ZpbmlzaGVkOiB0cnVlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYW5pbWF0aW9uLnN0YXJ0KGNiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgICAgYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb24sIGlkeCkgPT4ge1xuICAgICAgICAhaGFzRW5kZWRbaWR4XSAmJiBhbmltYXRpb24uc3RvcCgpO1xuICAgICAgICBoYXNFbmRlZFtpZHhdID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24oKTogdm9pZCB7XG4gICAgICBhbmltYXRpb25zLmZvckVhY2goKGFuaW1hdGlvbiwgaWR4KSA9PiB7XG4gICAgICAgIGFuaW1hdGlvbi5yZXNldCgpO1xuICAgICAgICBoYXNFbmRlZFtpZHhdID0gZmFsc2U7XG4gICAgICAgIGRvbmVDb3VudCA9IDA7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgX3N0YXJ0TmF0aXZlTG9vcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdMb29wcyBydW4gdXNpbmcgdGhlIG5hdGl2ZSBkcml2ZXIgY2Fubm90IGNvbnRhaW4gQW5pbWF0ZWQucGFyYWxsZWwgYW5pbWF0aW9ucycsXG4gICAgICApO1xuICAgIH0sXG5cbiAgICBfaXNVc2luZ05hdGl2ZURyaXZlcjogZnVuY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuY29uc3QgZGVsYXkgPSBmdW5jdGlvbih0aW1lOiBudW1iZXIpOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICAvLyBXb3VsZCBiZSBuaWNlIHRvIG1ha2UgYSBzcGVjaWFsaXplZCBpbXBsZW1lbnRhdGlvblxuICByZXR1cm4gdGltaW5nKG5ldyBBbmltYXRlZFZhbHVlKDApLCB7XG4gICAgdG9WYWx1ZTogMCxcbiAgICBkZWxheTogdGltZSxcbiAgICBkdXJhdGlvbjogMCxcbiAgICB1c2VOYXRpdmVEcml2ZXI6IGZhbHNlLFxuICB9KTtcbn07XG5cbmNvbnN0IHN0YWdnZXIgPSBmdW5jdGlvbihcbiAgdGltZTogbnVtYmVyLFxuICBhbmltYXRpb25zOiBBcnJheTxDb21wb3NpdGVBbmltYXRpb24+LFxuKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgcmV0dXJuIHBhcmFsbGVsKFxuICAgIGFuaW1hdGlvbnMubWFwKChhbmltYXRpb24sIGkpID0+IHtcbiAgICAgIHJldHVybiBzZXF1ZW5jZShbZGVsYXkodGltZSAqIGkpLCBhbmltYXRpb25dKTtcbiAgICB9KSxcbiAgKTtcbn07XG5cbnR5cGUgTG9vcEFuaW1hdGlvbkNvbmZpZyA9IHtcbiAgaXRlcmF0aW9uczogbnVtYmVyLFxuICByZXNldEJlZm9yZUl0ZXJhdGlvbj86IGJvb2xlYW4sXG59O1xuXG5jb25zdCBsb29wID0gZnVuY3Rpb24oXG4gIGFuaW1hdGlvbjogQ29tcG9zaXRlQW5pbWF0aW9uLFxuICB7aXRlcmF0aW9ucyA9IC0xLCByZXNldEJlZm9yZUl0ZXJhdGlvbiA9IHRydWV9OiBMb29wQW5pbWF0aW9uQ29uZmlnID0ge30sXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBsZXQgaXNGaW5pc2hlZCA9IGZhbHNlO1xuICBsZXQgaXRlcmF0aW9uc1NvRmFyID0gMDtcbiAgcmV0dXJuIHtcbiAgICBzdGFydDogZnVuY3Rpb24oY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IHJlc3RhcnQgPSBmdW5jdGlvbihyZXN1bHQ6IEVuZFJlc3VsdCA9IHtmaW5pc2hlZDogdHJ1ZX0pOiB2b2lkIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzRmluaXNoZWQgfHxcbiAgICAgICAgICBpdGVyYXRpb25zU29GYXIgPT09IGl0ZXJhdGlvbnMgfHxcbiAgICAgICAgICByZXN1bHQuZmluaXNoZWQgPT09IGZhbHNlXG4gICAgICAgICkge1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlcmF0aW9uc1NvRmFyKys7XG4gICAgICAgICAgcmVzZXRCZWZvcmVJdGVyYXRpb24gJiYgYW5pbWF0aW9uLnJlc2V0KCk7XG4gICAgICAgICAgYW5pbWF0aW9uLnN0YXJ0KHJlc3RhcnQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKCFhbmltYXRpb24gfHwgaXRlcmF0aW9ucyA9PT0gMCkge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7ZmluaXNoZWQ6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChhbmltYXRpb24uX2lzVXNpbmdOYXRpdmVEcml2ZXIoKSkge1xuICAgICAgICAgIGFuaW1hdGlvbi5fc3RhcnROYXRpdmVMb29wKGl0ZXJhdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3RhcnQoKTsgLy8gU3RhcnQgbG9vcGluZyByZWN1cnNpdmVseSBvbiB0aGUganMgdGhyZWFkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKTogdm9pZCB7XG4gICAgICBpc0ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIGFuaW1hdGlvbi5zdG9wKCk7XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbigpOiB2b2lkIHtcbiAgICAgIGl0ZXJhdGlvbnNTb0ZhciA9IDA7XG4gICAgICBpc0ZpbmlzaGVkID0gZmFsc2U7XG4gICAgICBhbmltYXRpb24ucmVzZXQoKTtcbiAgICB9LFxuXG4gICAgX3N0YXJ0TmF0aXZlTG9vcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdMb29wcyBydW4gdXNpbmcgdGhlIG5hdGl2ZSBkcml2ZXIgY2Fubm90IGNvbnRhaW4gQW5pbWF0ZWQubG9vcCBhbmltYXRpb25zJyxcbiAgICAgICk7XG4gICAgfSxcblxuICAgIF9pc1VzaW5nTmF0aXZlRHJpdmVyOiBmdW5jdGlvbigpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiBhbmltYXRpb24uX2lzVXNpbmdOYXRpdmVEcml2ZXIoKTtcbiAgICB9LFxuICB9O1xufTtcblxuZnVuY3Rpb24gZm9ya0V2ZW50KFxuICBldmVudDogP0FuaW1hdGVkRXZlbnQgfCA/RnVuY3Rpb24sXG4gIGxpc3RlbmVyOiBGdW5jdGlvbixcbik6IEFuaW1hdGVkRXZlbnQgfCBGdW5jdGlvbiB7XG4gIGlmICghZXZlbnQpIHtcbiAgICByZXR1cm4gbGlzdGVuZXI7XG4gIH0gZWxzZSBpZiAoZXZlbnQgaW5zdGFuY2VvZiBBbmltYXRlZEV2ZW50KSB7XG4gICAgZXZlbnQuX19hZGRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgcmV0dXJuIGV2ZW50O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgdHlwZW9mIGV2ZW50ID09PSAnZnVuY3Rpb24nICYmIGV2ZW50KC4uLmFyZ3MpO1xuICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1bmZvcmtFdmVudChcbiAgZXZlbnQ6ID9BbmltYXRlZEV2ZW50IHwgP0Z1bmN0aW9uLFxuICBsaXN0ZW5lcjogRnVuY3Rpb24sXG4pOiB2b2lkIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50IGluc3RhbmNlb2YgQW5pbWF0ZWRFdmVudCkge1xuICAgIGV2ZW50Ll9fcmVtb3ZlTGlzdGVuZXIobGlzdGVuZXIpO1xuICB9XG59XG5cbmNvbnN0IGV2ZW50ID0gZnVuY3Rpb24oYXJnTWFwcGluZzogQXJyYXk8P01hcHBpbmc+LCBjb25maWc/OiBFdmVudENvbmZpZyk6IGFueSB7XG4gIGNvbnN0IGFuaW1hdGVkRXZlbnQgPSBuZXcgQW5pbWF0ZWRFdmVudChhcmdNYXBwaW5nLCBjb25maWcpO1xuICBpZiAoYW5pbWF0ZWRFdmVudC5fX2lzTmF0aXZlKSB7XG4gICAgcmV0dXJuIGFuaW1hdGVkRXZlbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFuaW1hdGVkRXZlbnQuX19nZXRIYW5kbGVyKCk7XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIGBBbmltYXRlZGAgbGlicmFyeSBpcyBkZXNpZ25lZCB0byBtYWtlIGFuaW1hdGlvbnMgZmx1aWQsIHBvd2VyZnVsLCBhbmRcbiAqIGVhc3kgdG8gYnVpbGQgYW5kIG1haW50YWluLiBgQW5pbWF0ZWRgIGZvY3VzZXMgb24gZGVjbGFyYXRpdmUgcmVsYXRpb25zaGlwc1xuICogYmV0d2VlbiBpbnB1dHMgYW5kIG91dHB1dHMsIHdpdGggY29uZmlndXJhYmxlIHRyYW5zZm9ybXMgaW4gYmV0d2VlbiwgYW5kXG4gKiBzaW1wbGUgYHN0YXJ0YC9gc3RvcGAgbWV0aG9kcyB0byBjb250cm9sIHRpbWUtYmFzZWQgYW5pbWF0aW9uIGV4ZWN1dGlvbi5cbiAqIElmIGFkZGl0aW9uYWwgdHJhbnNmb3JtcyBhcmUgYWRkZWQsIGJlIHN1cmUgdG8gaW5jbHVkZSB0aGVtIGluXG4gKiBBbmltYXRlZE1vY2suanMgYXMgd2VsbC5cbiAqXG4gKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZC5odG1sXG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvKipcbiAgICogU3RhbmRhcmQgdmFsdWUgY2xhc3MgZm9yIGRyaXZpbmcgYW5pbWF0aW9ucy4gIFR5cGljYWxseSBpbml0aWFsaXplZCB3aXRoXG4gICAqIGBuZXcgQW5pbWF0ZWQuVmFsdWUoMCk7YFxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZC5odG1sI3ZhbHVlXG4gICAqL1xuICBWYWx1ZTogQW5pbWF0ZWRWYWx1ZSxcbiAgLyoqXG4gICAqIDJEIHZhbHVlIGNsYXNzIGZvciBkcml2aW5nIDJEIGFuaW1hdGlvbnMsIHN1Y2ggYXMgcGFuIGdlc3R1cmVzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWR2YWx1ZXh5Lmh0bWxcbiAgICovXG4gIFZhbHVlWFk6IEFuaW1hdGVkVmFsdWVYWSxcbiAgLyoqXG4gICAqIEV4cG9ydGVkIHRvIHVzZSB0aGUgSW50ZXJwb2xhdGlvbiB0eXBlIGluIGZsb3cuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkLmh0bWwjaW50ZXJwb2xhdGlvblxuICAgKi9cbiAgSW50ZXJwb2xhdGlvbjogQW5pbWF0ZWRJbnRlcnBvbGF0aW9uLFxuICAvKipcbiAgICogRXhwb3J0ZWQgZm9yIGVhc2Ugb2YgdHlwZSBjaGVja2luZy4gQWxsIGFuaW1hdGVkIHZhbHVlcyBkZXJpdmUgZnJvbSB0aGlzXG4gICAqIGNsYXNzLlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZC5odG1sI25vZGVcbiAgICovXG4gIE5vZGU6IEFuaW1hdGVkTm9kZSxcblxuICAvKipcbiAgICogQW5pbWF0ZXMgYSB2YWx1ZSBmcm9tIGFuIGluaXRpYWwgdmVsb2NpdHkgdG8gemVybyBiYXNlZCBvbiBhIGRlY2F5XG4gICAqIGNvZWZmaWNpZW50LlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZC5odG1sI2RlY2F5XG4gICAqL1xuICBkZWNheSxcbiAgLyoqXG4gICAqIEFuaW1hdGVzIGEgdmFsdWUgYWxvbmcgYSB0aW1lZCBlYXNpbmcgY3VydmUuIFRoZSBFYXNpbmcgbW9kdWxlIGhhcyB0b25zIG9mXG4gICAqIHByZWRlZmluZWQgY3VydmVzLCBvciB5b3UgY2FuIHVzZSB5b3VyIG93biBmdW5jdGlvbi5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWQuaHRtbCN0aW1pbmdcbiAgICovXG4gIHRpbWluZyxcbiAgLyoqXG4gICAqIEFuaW1hdGVzIGEgdmFsdWUgYWNjb3JkaW5nIHRvIGFuIGFuYWx5dGljYWwgc3ByaW5nIG1vZGVsIGJhc2VkIG9uXG4gICAqIGRhbXBlZCBoYXJtb25pYyBvc2NpbGxhdGlvbi5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWQuaHRtbCNzcHJpbmdcbiAgICovXG4gIHNwcmluZyxcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBBbmltYXRlZCB2YWx1ZSBjb21wb3NlZCBmcm9tIHR3byBBbmltYXRlZCB2YWx1ZXMgYWRkZWRcbiAgICogdG9nZXRoZXIuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkLmh0bWwjYWRkXG4gICAqL1xuICBhZGQsXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQW5pbWF0ZWQgdmFsdWUgY29tcG9zZWQgYnkgc3VidHJhY3RpbmcgdGhlIHNlY29uZCBBbmltYXRlZFxuICAgKiB2YWx1ZSBmcm9tIHRoZSBmaXJzdCBBbmltYXRlZCB2YWx1ZS5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWQuaHRtbCNzdWJ0cmFjdFxuICAgKi9cbiAgc3VidHJhY3QsXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQW5pbWF0ZWQgdmFsdWUgY29tcG9zZWQgYnkgZGl2aWRpbmcgdGhlIGZpcnN0IEFuaW1hdGVkIHZhbHVlXG4gICAqIGJ5IHRoZSBzZWNvbmQgQW5pbWF0ZWQgdmFsdWUuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkLmh0bWwjZGl2aWRlXG4gICAqL1xuICBkaXZpZGUsXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQW5pbWF0ZWQgdmFsdWUgY29tcG9zZWQgZnJvbSB0d28gQW5pbWF0ZWQgdmFsdWVzIG11bHRpcGxpZWRcbiAgICogdG9nZXRoZXIuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkLmh0bWwjbXVsdGlwbHlcbiAgICovXG4gIG11bHRpcGx5LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEFuaW1hdGVkIHZhbHVlIHRoYXQgaXMgdGhlIChub24tbmVnYXRpdmUpIG1vZHVsbyBvZiB0aGVcbiAgICogcHJvdmlkZWQgQW5pbWF0ZWQgdmFsdWUuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkLmh0bWwjbW9kdWxvXG4gICAqL1xuICBtb2R1bG8sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBBbmltYXRlZCB2YWx1ZSB0aGF0IGlzIGxpbWl0ZWQgYmV0d2VlbiAyIHZhbHVlcy4gSXQgdXNlcyB0aGVcbiAgICogZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBsYXN0IHZhbHVlIHNvIGV2ZW4gaWYgdGhlIHZhbHVlIGlzIGZhciBmcm9tIHRoZVxuICAgKiBib3VuZHMgaXQgd2lsbCBzdGFydCBjaGFuZ2luZyB3aGVuIHRoZSB2YWx1ZSBzdGFydHMgZ2V0dGluZyBjbG9zZXIgYWdhaW4uXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkLmh0bWwjZGlmZmNsYW1wXG4gICAqL1xuICBkaWZmQ2xhbXAsXG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBhbiBhbmltYXRpb24gYWZ0ZXIgdGhlIGdpdmVuIGRlbGF5LlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZC5odG1sI2RlbGF5XG4gICAqL1xuICBkZWxheSxcbiAgLyoqXG4gICAqIFN0YXJ0cyBhbiBhcnJheSBvZiBhbmltYXRpb25zIGluIG9yZGVyLCB3YWl0aW5nIGZvciBlYWNoIHRvIGNvbXBsZXRlXG4gICAqIGJlZm9yZSBzdGFydGluZyB0aGUgbmV4dC4gSWYgdGhlIGN1cnJlbnQgcnVubmluZyBhbmltYXRpb24gaXMgc3RvcHBlZCwgbm9cbiAgICogZm9sbG93aW5nIGFuaW1hdGlvbnMgd2lsbCBiZSBzdGFydGVkLlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZC5odG1sI3NlcXVlbmNlXG4gICAqL1xuICBzZXF1ZW5jZSxcbiAgLyoqXG4gICAqIFN0YXJ0cyBhbiBhcnJheSBvZiBhbmltYXRpb25zIGFsbCBhdCB0aGUgc2FtZSB0aW1lLiBCeSBkZWZhdWx0LCBpZiBvbmVcbiAgICogb2YgdGhlIGFuaW1hdGlvbnMgaXMgc3RvcHBlZCwgdGhleSB3aWxsIGFsbCBiZSBzdG9wcGVkLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAqIHRoaXMgd2l0aCB0aGUgYHN0b3BUb2dldGhlcmAgZmxhZy5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWQuaHRtbCNwYXJhbGxlbFxuICAgKi9cbiAgcGFyYWxsZWwsXG4gIC8qKlxuICAgKiBBcnJheSBvZiBhbmltYXRpb25zIG1heSBydW4gaW4gcGFyYWxsZWwgKG92ZXJsYXApLCBidXQgYXJlIHN0YXJ0ZWQgaW5cbiAgICogc2VxdWVuY2Ugd2l0aCBzdWNjZXNzaXZlIGRlbGF5cy4gIE5pY2UgZm9yIGRvaW5nIHRyYWlsaW5nIGVmZmVjdHMuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkLmh0bWwjc3RhZ2dlclxuICAgKi9cbiAgc3RhZ2dlcixcbiAgLyoqXG4gICAqIExvb3BzIGEgZ2l2ZW4gYW5pbWF0aW9uIGNvbnRpbnVvdXNseSwgc28gdGhhdCBlYWNoIHRpbWUgaXQgcmVhY2hlcyB0aGVcbiAgICogZW5kLCBpdCByZXNldHMgYW5kIGJlZ2lucyBhZ2FpbiBmcm9tIHRoZSBzdGFydC5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWQuaHRtbCNsb29wXG4gICAqL1xuICBsb29wLFxuXG4gIC8qKlxuICAgKiBUYWtlcyBhbiBhcnJheSBvZiBtYXBwaW5ncyBhbmQgZXh0cmFjdHMgdmFsdWVzIGZyb20gZWFjaCBhcmcgYWNjb3JkaW5nbHksXG4gICAqIHRoZW4gY2FsbHMgYHNldFZhbHVlYCBvbiB0aGUgbWFwcGVkIG91dHB1dHMuXG4gICAqXG4gICAqIFNlZSBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0LW5hdGl2ZS9kb2NzL2FuaW1hdGVkLmh0bWwjZXZlbnRcbiAgICovXG4gIGV2ZW50LFxuXG4gIC8qKlxuICAgKiBNYWtlIGFueSBSZWFjdCBjb21wb25lbnQgQW5pbWF0YWJsZS4gIFVzZWQgdG8gY3JlYXRlIGBBbmltYXRlZC5WaWV3YCwgZXRjLlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZC5odG1sI2NyZWF0ZWFuaW1hdGVkY29tcG9uZW50XG4gICAqL1xuICBjcmVhdGVBbmltYXRlZENvbXBvbmVudCxcblxuICAvKipcbiAgICogSW1wZXJhdGl2ZSBBUEkgdG8gYXR0YWNoIGFuIGFuaW1hdGVkIHZhbHVlIHRvIGFuIGV2ZW50IG9uIGEgdmlldy4gUHJlZmVyXG4gICAqIHVzaW5nIGBBbmltYXRlZC5ldmVudGAgd2l0aCBgdXNlTmF0aXZlRHJpdmU6IHRydWVgIGlmIHBvc3NpYmxlLlxuICAgKlxuICAgKiBTZWUgaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC1uYXRpdmUvZG9jcy9hbmltYXRlZC5odG1sI2F0dGFjaG5hdGl2ZWV2ZW50XG4gICAqL1xuICBhdHRhY2hOYXRpdmVFdmVudCxcblxuICAvKipcbiAgICogQWR2YW5jZWQgaW1wZXJhdGl2ZSBBUEkgZm9yIHNub29waW5nIG9uIGFuaW1hdGVkIGV2ZW50cyB0aGF0IGFyZSBwYXNzZWQgaW5cbiAgICogdGhyb3VnaCBwcm9wcy4gVXNlIHZhbHVlcyBkaXJlY3RseSB3aGVyZSBwb3NzaWJsZS5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QtbmF0aXZlL2RvY3MvYW5pbWF0ZWQuaHRtbCNmb3JrZXZlbnRcbiAgICovXG4gIGZvcmtFdmVudCxcbiAgdW5mb3JrRXZlbnQsXG5cbiAgLyoqXG4gICAqIEV4cG9zZSBFdmVudCBjbGFzcywgc28gaXQgY2FuIGJlIHVzZWQgYXMgYSB0eXBlIGZvciB0eXBlIGNoZWNrZXJzLlxuICAgKi9cbiAgRXZlbnQ6IEFuaW1hdGVkRXZlbnQsXG5cbiAgX19Qcm9wc09ubHlGb3JUZXN0czogQW5pbWF0ZWRQcm9wcyxc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