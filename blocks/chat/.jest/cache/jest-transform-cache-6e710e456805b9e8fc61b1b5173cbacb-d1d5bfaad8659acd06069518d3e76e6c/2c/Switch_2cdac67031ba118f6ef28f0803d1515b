a8c8803bb8472cbb6bb5ba913ee8581e
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _SwitchNativeComponent = _interopRequireDefault(require("./SwitchNativeComponent"));
var _excluded = ["disabled", "ios_backgroundColor", "onChange", "onValueChange", "style", "thumbColor", "trackColor", "value"];
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var AndroidSwitchNativeComponent = require('./AndroidSwitchNativeComponent');
var Platform = require('../../Utilities/Platform');
var React = require('react');
var StyleSheet = require('../../StyleSheet/StyleSheet');
var Switch = function (_React$Component) {
  (0, _inherits2.default)(Switch, _React$Component);
  var _super = _createSuper(Switch);
  function Switch() {
    var _this;
    (0, _classCallCheck2.default)(this, Switch);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _this._handleChange = function (event) {
      if (_this._nativeSwitchRef == null) {
        return;
      }
      var value = _this.props.value === true;
      if (Platform.OS === 'android') {
        _this._nativeSwitchRef.setNativeProps({
          on: value
        });
      } else {
        _this._nativeSwitchRef.setNativeProps({
          value: value
        });
      }
      if (_this.props.onChange != null) {
        _this.props.onChange(event);
      }
      if (_this.props.onValueChange != null) {
        _this.props.onValueChange(event.nativeEvent.value);
      }
    };
    _this._handleSwitchNativeComponentRef = function (ref) {
      _this._nativeSwitchRef = ref;
    };
    return _this;
  }
  (0, _createClass2.default)(Switch, [{
    key: "render",
    value: function render() {
      var _props$accessibilityR2;
      var _this$props = this.props,
        disabled = _this$props.disabled,
        ios_backgroundColor = _this$props.ios_backgroundColor,
        onChange = _this$props.onChange,
        onValueChange = _this$props.onValueChange,
        style = _this$props.style,
        thumbColor = _this$props.thumbColor,
        trackColor = _this$props.trackColor,
        value = _this$props.value,
        props = (0, _objectWithoutProperties2.default)(_this$props, _excluded);
      var _thumbColor = thumbColor;
      var _trackColorForFalse = trackColor == null ? void 0 : trackColor.false;
      var _trackColorForTrue = trackColor == null ? void 0 : trackColor.true;
      var _ref = props,
        thumbTintColor = _ref.thumbTintColor,
        tintColor = _ref.tintColor,
        onTintColor = _ref.onTintColor;
      if (thumbTintColor != null) {
        _thumbColor = thumbTintColor;
        if (__DEV__) {
          console.warn('Switch: `thumbTintColor` is deprecated, use `thumbColor` instead.');
        }
      }
      if (tintColor != null) {
        _trackColorForFalse = tintColor;
        if (__DEV__) {
          console.warn('Switch: `tintColor` is deprecated, use `trackColor` instead.');
        }
      }
      if (onTintColor != null) {
        _trackColorForTrue = onTintColor;
        if (__DEV__) {
          console.warn('Switch: `onTintColor` is deprecated, use `trackColor` instead.');
        }
      }
      if (Platform.OS === 'android') {
        var _props$accessibilityR;
        var _platformProps = {
          enabled: disabled !== true,
          on: value === true,
          style: style,
          thumbTintColor: _thumbColor,
          trackColorForFalse: _trackColorForFalse,
          trackColorForTrue: _trackColorForTrue,
          trackTintColor: value === true ? _trackColorForTrue : _trackColorForFalse
        };
        return React.createElement(AndroidSwitchNativeComponent, (0, _extends2.default)({}, props, _platformProps, {
          accessibilityRole: (_props$accessibilityR = props.accessibilityRole) != null ? _props$accessibilityR : 'button',
          onChange: this._handleChange,
          onResponderTerminationRequest: returnsFalse,
          onStartShouldSetResponder: returnsTrue,
          ref: this._handleSwitchNativeComponentRef
        }));
      }
      var platformProps = {
        disabled: disabled,
        onTintColor: _trackColorForTrue,
        style: StyleSheet.compose({
          height: 31,
          width: 51
        }, StyleSheet.compose(style, ios_backgroundColor == null ? null : {
          backgroundColor: ios_backgroundColor,
          borderRadius: 16
        })),
        thumbTintColor: _thumbColor,
        tintColor: _trackColorForFalse,
        value: value === true
      };
      return React.createElement(_SwitchNativeComponent.default, (0, _extends2.default)({}, props, platformProps, {
        accessibilityRole: (_props$accessibilityR2 = props.accessibilityRole) != null ? _props$accessibilityR2 : 'button',
        onChange: this._handleChange,
        onResponderTerminationRequest: returnsFalse,
        onStartShouldSetResponder: returnsTrue,
        ref: this._handleSwitchNativeComponentRef
      }));
    }
  }]);
  return Switch;
}(React.Component);
var returnsFalse = function returnsFalse() {
  return false;
};
var returnsTrue = function returnsTrue() {
  return true;
};
module.exports = Switch;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9leHRlbmRzMiIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllczIiLCJfY2xhc3NDYWxsQ2hlY2syIiwiX2NyZWF0ZUNsYXNzMiIsIl9pbmhlcml0czIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfZ2V0UHJvdG90eXBlT2YyIiwiX1N3aXRjaE5hdGl2ZUNvbXBvbmVudCIsIl9leGNsdWRlZCIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIl9jcmVhdGVTdXBlckludGVybmFsIiwiU3VwZXIiLCJkZWZhdWx0IiwicmVzdWx0IiwiTmV3VGFyZ2V0IiwiY29uc3RydWN0b3IiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJzaGFtIiwiUHJveHkiLCJCb29sZWFuIiwicHJvdG90eXBlIiwidmFsdWVPZiIsImNhbGwiLCJlIiwiQW5kcm9pZFN3aXRjaE5hdGl2ZUNvbXBvbmVudCIsIlBsYXRmb3JtIiwiUmVhY3QiLCJTdHlsZVNoZWV0IiwiU3dpdGNoIiwiX1JlYWN0JENvbXBvbmVudCIsIl9zdXBlciIsIl90aGlzIiwiX2xlbiIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJjb25jYXQiLCJfaGFuZGxlQ2hhbmdlIiwiZXZlbnQiLCJfbmF0aXZlU3dpdGNoUmVmIiwidmFsdWUiLCJwcm9wcyIsIk9TIiwic2V0TmF0aXZlUHJvcHMiLCJvbiIsIm9uQ2hhbmdlIiwib25WYWx1ZUNoYW5nZSIsIm5hdGl2ZUV2ZW50IiwiX2hhbmRsZVN3aXRjaE5hdGl2ZUNvbXBvbmVudFJlZiIsInJlZiIsImtleSIsInJlbmRlciIsIl9wcm9wcyRhY2Nlc3NpYmlsaXR5UjIiLCJfdGhpcyRwcm9wcyIsImRpc2FibGVkIiwiaW9zX2JhY2tncm91bmRDb2xvciIsInN0eWxlIiwidGh1bWJDb2xvciIsInRyYWNrQ29sb3IiLCJfdGh1bWJDb2xvciIsIl90cmFja0NvbG9yRm9yRmFsc2UiLCJmYWxzZSIsIl90cmFja0NvbG9yRm9yVHJ1ZSIsInRydWUiLCJfcmVmIiwidGh1bWJUaW50Q29sb3IiLCJ0aW50Q29sb3IiLCJvblRpbnRDb2xvciIsIl9fREVWX18iLCJjb25zb2xlIiwid2FybiIsIl9wcm9wcyRhY2Nlc3NpYmlsaXR5UiIsInBsYXRmb3JtUHJvcHMiLCJlbmFibGVkIiwidHJhY2tDb2xvckZvckZhbHNlIiwidHJhY2tDb2xvckZvclRydWUiLCJ0cmFja1RpbnRDb2xvciIsImNyZWF0ZUVsZW1lbnQiLCJhY2Nlc3NpYmlsaXR5Um9sZSIsIm9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0IiwicmV0dXJuc0ZhbHNlIiwib25TdGFydFNob3VsZFNldFJlc3BvbmRlciIsInJldHVybnNUcnVlIiwiY29tcG9zZSIsImhlaWdodCIsIndpZHRoIiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyUmFkaXVzIiwiQ29tcG9uZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlN3aXRjaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBBbmRyb2lkU3dpdGNoTmF0aXZlQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9BbmRyb2lkU3dpdGNoTmF0aXZlQ29tcG9uZW50Jyk7XG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybScpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuY29uc3QgU3R5bGVTaGVldCA9IHJlcXVpcmUoJy4uLy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCcpO1xuXG5pbXBvcnQgdHlwZSB7Q29sb3JWYWx1ZX0gZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0VHlwZXMnO1xuaW1wb3J0IHR5cGUge1N5bnRoZXRpY0V2ZW50fSBmcm9tICcuLi8uLi9UeXBlcy9Db3JlRXZlbnRUeXBlcyc7XG5pbXBvcnQgdHlwZSB7Vmlld1Byb3BzfSBmcm9tICcuLi9WaWV3L1ZpZXdQcm9wVHlwZXMnO1xuaW1wb3J0IFN3aXRjaE5hdGl2ZUNvbXBvbmVudCBmcm9tICcuL1N3aXRjaE5hdGl2ZUNvbXBvbmVudCc7XG5cbnR5cGUgU3dpdGNoQ2hhbmdlRXZlbnQgPSBTeW50aGV0aWNFdmVudDxcbiAgJFJlYWRPbmx5PHt8XG4gICAgdmFsdWU6IGJvb2xlYW4sXG4gIHx9Pixcbj47XG5cbmV4cG9ydCB0eXBlIFByb3BzID0gJFJlYWRPbmx5PHt8XG4gIC4uLlZpZXdQcm9wcyxcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgc3dpdGNoIGlzIGRpc2FibGVkLiBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICovXG4gIGRpc2FibGVkPzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIEJvb2xlYW4gdmFsdWUgb2YgdGhlIHN3aXRjaC4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAqL1xuICB2YWx1ZT86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBDdXN0b20gY29sb3IgZm9yIHRoZSBzd2l0Y2ggdGh1bWIuXG4gICAqL1xuICB0aHVtYkNvbG9yPzogP0NvbG9yVmFsdWUsXG5cbiAgLyoqXG4gICAqIEN1c3RvbSBjb2xvcnMgZm9yIHRoZSBzd2l0Y2ggdHJhY2suXG4gICAqXG4gICAqIE5PVEU6IE9uIGlPUyB3aGVuIHRoZSBzd2l0Y2ggdmFsdWUgaXMgZmFsc2UsIHRoZSB0cmFjayBzaHJpbmtzIGludG8gdGhlXG4gICAqIGJvcmRlci4gSWYgeW91IHdhbnQgdG8gY2hhbmdlIHRoZSBjb2xvciBvZiB0aGUgYmFja2dyb3VuZCBleHBvc2VkIGJ5IHRoZVxuICAgKiBzaHJ1bmtlbiB0cmFjaywgdXNlIGBpb3NfYmFja2dyb3VuZENvbG9yYC5cbiAgICovXG4gIHRyYWNrQ29sb3I/OiA/JFJlYWRPbmx5PHt8XG4gICAgZmFsc2U/OiA/Q29sb3JWYWx1ZSxcbiAgICB0cnVlPzogP0NvbG9yVmFsdWUsXG4gIHx9PixcblxuICAvKipcbiAgICogT24gaU9TLCBjdXN0b20gY29sb3IgZm9yIHRoZSBiYWNrZ3JvdW5kLiBUaGlzIGJhY2tncm91bmQgY29sb3IgY2FuIGJlIHNlZW5cbiAgICogZWl0aGVyIHdoZW4gdGhlIHN3aXRjaCB2YWx1ZSBpcyBmYWxzZSBvciB3aGVuIHRoZSBzd2l0Y2ggaXMgZGlzYWJsZWQgKGFuZFxuICAgKiB0aGUgc3dpdGNoIGlzIHRyYW5zbHVjZW50KS5cbiAgICovXG4gIGlvc19iYWNrZ3JvdW5kQ29sb3I/OiA/Q29sb3JWYWx1ZSxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhlIHVzZXIgdHJpZXMgdG8gY2hhbmdlIHRoZSB2YWx1ZSBvZiB0aGUgc3dpdGNoLlxuICAgKlxuICAgKiBSZWNlaXZlcyB0aGUgY2hhbmdlIGV2ZW50IGFzIGFuIGFyZ3VtZW50LiBJZiB5b3Ugd2FudCB0byBvbmx5IHJlY2VpdmUgdGhlXG4gICAqIG5ldyB2YWx1ZSwgdXNlIGBvblZhbHVlQ2hhbmdlYCBpbnN0ZWFkLlxuICAgKi9cbiAgb25DaGFuZ2U/OiA/KGV2ZW50OiBTd2l0Y2hDaGFuZ2VFdmVudCkgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWQsXG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSB1c2VyIHRyaWVzIHRvIGNoYW5nZSB0aGUgdmFsdWUgb2YgdGhlIHN3aXRjaC5cbiAgICpcbiAgICogUmVjZWl2ZXMgdGhlIG5ldyB2YWx1ZSBhcyBhbiBhcmd1bWVudC4gSWYgeW91IHdhbnQgdG8gaW5zdGVhZCByZWNlaXZlIGFuXG4gICAqIGV2ZW50LCB1c2UgYG9uQ2hhbmdlYC5cbiAgICovXG4gIG9uVmFsdWVDaGFuZ2U/OiA/KHZhbHVlOiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZCxcbnx9PjtcblxuLyoqXG4gKiBBIHZpc3VhbCB0b2dnbGUgYmV0d2VlbiB0d28gbXV0dWFsbHkgZXhjbHVzaXZlIHN0YXRlcy5cbiAqXG4gKiBUaGlzIGlzIGEgY29udHJvbGxlZCBjb21wb25lbnQgdGhhdCByZXF1aXJlcyBhbiBgb25WYWx1ZUNoYW5nZWAgY2FsbGJhY2sgdGhhdFxuICogdXBkYXRlcyB0aGUgYHZhbHVlYCBwcm9wIGluIG9yZGVyIGZvciB0aGUgY29tcG9uZW50IHRvIHJlZmxlY3QgdXNlciBhY3Rpb25zLlxuICogSWYgdGhlIGB2YWx1ZWAgcHJvcCBpcyBub3QgdXBkYXRlZCwgdGhlIGNvbXBvbmVudCB3aWxsIGNvbnRpbnVlIHRvIHJlbmRlciB0aGVcbiAqIHN1cHBsaWVkIGB2YWx1ZWAgcHJvcCBpbnN0ZWFkIG9mIHRoZSBleHBlY3RlZCByZXN1bHQgb2YgYW55IHVzZXIgYWN0aW9ucy5cbiAqL1xuY2xhc3MgU3dpdGNoIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIF9uYXRpdmVTd2l0Y2hSZWY6ID9SZWFjdC5FbGVtZW50UmVmPFxuICAgIHR5cGVvZiBTd2l0Y2hOYXRpdmVDb21wb25lbnQgfCB0eXBlb2YgQW5kcm9pZFN3aXRjaE5hdGl2ZUNvbXBvbmVudCxcbiAgPjtcblxuICByZW5kZXIoKTogUmVhY3QuTm9kZSB7XG4gICAgY29uc3Qge1xuICAgICAgZGlzYWJsZWQsXG4gICAgICBpb3NfYmFja2dyb3VuZENvbG9yLFxuICAgICAgb25DaGFuZ2UsXG4gICAgICBvblZhbHVlQ2hhbmdlLFxuICAgICAgc3R5bGUsXG4gICAgICB0aHVtYkNvbG9yLFxuICAgICAgdHJhY2tDb2xvcixcbiAgICAgIHZhbHVlLFxuICAgICAgLi4ucHJvcHNcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIFN1cHBvcnQgZGVwcmVjYXRlZCBjb2xvciBwcm9wcy5cbiAgICBsZXQgX3RodW1iQ29sb3IgPSB0aHVtYkNvbG9yO1xuICAgIGxldCBfdHJhY2tDb2xvckZvckZhbHNlID0gdHJhY2tDb2xvcj8uZmFsc2U7XG4gICAgbGV0IF90cmFja0NvbG9yRm9yVHJ1ZSA9IHRyYWNrQ29sb3I/LnRydWU7XG5cbiAgICAvLyBUT0RPOiBSZW1vdmUgc3VwcG9ydCBmb3IgdGhlc2UgcHJvcHMgYWZ0ZXIgYSBjb3VwbGUgcmVsZWFzZXMuXG4gICAgY29uc3Qge3RodW1iVGludENvbG9yLCB0aW50Q29sb3IsIG9uVGludENvbG9yfSA9IChwcm9wczogJEZsb3dGaXhNZSk7XG4gICAgaWYgKHRodW1iVGludENvbG9yICE9IG51bGwpIHtcbiAgICAgIF90aHVtYkNvbG9yID0gdGh1bWJUaW50Q29sb3I7XG4gICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ1N3aXRjaDogYHRodW1iVGludENvbG9yYCBpcyBkZXByZWNhdGVkLCB1c2UgYHRodW1iQ29sb3JgIGluc3RlYWQuJyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbnRDb2xvciAhPSBudWxsKSB7XG4gICAgICBfdHJhY2tDb2xvckZvckZhbHNlID0gdGludENvbG9yO1xuICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICdTd2l0Y2g6IGB0aW50Q29sb3JgIGlzIGRlcHJlY2F0ZWQsIHVzZSBgdHJhY2tDb2xvcmAgaW5zdGVhZC4nLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob25UaW50Q29sb3IgIT0gbnVsbCkge1xuICAgICAgX3RyYWNrQ29sb3JGb3JUcnVlID0gb25UaW50Q29sb3I7XG4gICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ1N3aXRjaDogYG9uVGludENvbG9yYCBpcyBkZXByZWNhdGVkLCB1c2UgYHRyYWNrQ29sb3JgIGluc3RlYWQuJyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgY29uc3QgcGxhdGZvcm1Qcm9wcyA9IHtcbiAgICAgICAgZW5hYmxlZDogZGlzYWJsZWQgIT09IHRydWUsXG4gICAgICAgIG9uOiB2YWx1ZSA9PT0gdHJ1ZSxcbiAgICAgICAgc3R5bGUsXG4gICAgICAgIHRodW1iVGludENvbG9yOiBfdGh1bWJDb2xvcixcbiAgICAgICAgdHJhY2tDb2xvckZvckZhbHNlOiBfdHJhY2tDb2xvckZvckZhbHNlLFxuICAgICAgICB0cmFja0NvbG9yRm9yVHJ1ZTogX3RyYWNrQ29sb3JGb3JUcnVlLFxuICAgICAgICB0cmFja1RpbnRDb2xvcjpcbiAgICAgICAgICB2YWx1ZSA9PT0gdHJ1ZSA/IF90cmFja0NvbG9yRm9yVHJ1ZSA6IF90cmFja0NvbG9yRm9yRmFsc2UsXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8QW5kcm9pZFN3aXRjaE5hdGl2ZUNvbXBvbmVudFxuICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICB7Li4ucGxhdGZvcm1Qcm9wc31cbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT17cHJvcHMuYWNjZXNzaWJpbGl0eVJvbGUgPz8gJ2J1dHRvbid9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdD17cmV0dXJuc0ZhbHNlfVxuICAgICAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXI9e3JldHVybnNUcnVlfVxuICAgICAgICAgIHJlZj17dGhpcy5faGFuZGxlU3dpdGNoTmF0aXZlQ29tcG9uZW50UmVmfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBwbGF0Zm9ybVByb3BzID0ge1xuICAgICAgZGlzYWJsZWQsXG4gICAgICBvblRpbnRDb2xvcjogX3RyYWNrQ29sb3JGb3JUcnVlLFxuICAgICAgc3R5bGU6IFN0eWxlU2hlZXQuY29tcG9zZShcbiAgICAgICAge2hlaWdodDogMzEsIHdpZHRoOiA1MX0sXG4gICAgICAgIFN0eWxlU2hlZXQuY29tcG9zZShcbiAgICAgICAgICBzdHlsZSxcbiAgICAgICAgICBpb3NfYmFja2dyb3VuZENvbG9yID09IG51bGxcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBpb3NfYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogMTYsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICksXG4gICAgICApLFxuICAgICAgdGh1bWJUaW50Q29sb3I6IF90aHVtYkNvbG9yLFxuICAgICAgdGludENvbG9yOiBfdHJhY2tDb2xvckZvckZhbHNlLFxuICAgICAgdmFsdWU6IHZhbHVlID09PSB0cnVlLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFN3aXRjaE5hdGl2ZUNvbXBvbmVudFxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIHsuLi5wbGF0Zm9ybVByb3BzfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT17cHJvcHMuYWNjZXNzaWJpbGl0eVJvbGUgPz8gJ2J1dHRvbid9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLl9oYW5kbGVDaGFuZ2V9XG4gICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0PXtyZXR1cm5zRmFsc2V9XG4gICAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXI9e3JldHVybnNUcnVlfVxuICAgICAgICByZWY9e3RoaXMuX2hhbmRsZVN3aXRjaE5hdGl2ZUNvbXBvbmVudFJlZn1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIF9oYW5kbGVDaGFuZ2UgPSAoZXZlbnQ6IFN3aXRjaENoYW5nZUV2ZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuX25hdGl2ZVN3aXRjaFJlZiA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRm9yY2UgdmFsdWUgb2YgbmF0aXZlIHN3aXRjaCBpbiBvcmRlciB0byBjb250cm9sIGl0LlxuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5wcm9wcy52YWx1ZSA9PT0gdHJ1ZTtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgdGhpcy5fbmF0aXZlU3dpdGNoUmVmLnNldE5hdGl2ZVByb3BzKHtvbjogdmFsdWV9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbmF0aXZlU3dpdGNoUmVmLnNldE5hdGl2ZVByb3BzKHt2YWx1ZX0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLm9uQ2hhbmdlICE9IG51bGwpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UoZXZlbnQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLm9uVmFsdWVDaGFuZ2UgIT0gbnVsbCkge1xuICAgICAgdGhpcy5wcm9wcy5vblZhbHVlQ2hhbmdlKGV2ZW50Lm5hdGl2ZUV2ZW50LnZhbHVlKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZVN3aXRjaE5hdGl2ZUNvbXBvbmVudFJlZiA9IChcbiAgICByZWY6ID9SZWFjdC5FbGVtZW50UmVmPFxuICAgICAgdHlwZW9mIFN3aXRjaE5hdGl2ZUNvbXBvbmVudCB8IHR5cGVvZiBBbmRyb2lkU3dpdGNoTmF0aXZlQ29tcG9uZW50LFxuICAgID4sXG4gICkgPT4ge1xuICAgIHRoaXMuX25hdGl2ZVN3aXRjaFJlZiA9IHJlZjtcbiAgfTtcbn1cblxuY29uc3QgcmV0dXJuc0ZhbHNlID0gKCkgPT4gZmFsc2U7XG5jb25zdCByZXR1cm5zVHJ1ZSA9ICgpID0+IHRydWU7XG5c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